/* rygel-media-export-item.c generated by valac 0.16.1, the Vala compiler
 * generated from rygel-media-export-item.vala, do not modify */

/*
 * Copyright (C) 2008 Zeeshan Ali <zeenix@gmail.com>.
 * Copyright (C) 2008 Nokia Corporation.
 *
 * Author: Zeeshan Ali <zeenix@gmail.com>
 *
 * This file is part of Rygel.
 *
 * Rygel is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * Rygel is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 */

#include <glib.h>
#include <glib-object.h>
#include <rygel-server.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <libgupnp-dlna/gupnp-dlna-information.h>
#include <gst/pbutils/pbutils.h>
#include <gst/gst.h>
#include <gst/tag/tag.h>


#define RYGEL_MEDIA_EXPORT_TYPE_VIDEO_ITEM (rygel_media_export_video_item_get_type ())
#define RYGEL_MEDIA_EXPORT_VIDEO_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_VIDEO_ITEM, RygelMediaExportVideoItem))
#define RYGEL_MEDIA_EXPORT_VIDEO_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_VIDEO_ITEM, RygelMediaExportVideoItemClass))
#define RYGEL_MEDIA_EXPORT_IS_VIDEO_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_VIDEO_ITEM))
#define RYGEL_MEDIA_EXPORT_IS_VIDEO_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_VIDEO_ITEM))
#define RYGEL_MEDIA_EXPORT_VIDEO_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_VIDEO_ITEM, RygelMediaExportVideoItemClass))

typedef struct _RygelMediaExportVideoItem RygelMediaExportVideoItem;
typedef struct _RygelMediaExportVideoItemClass RygelMediaExportVideoItemClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define RYGEL_MEDIA_EXPORT_TYPE_PHOTO_ITEM (rygel_media_export_photo_item_get_type ())
#define RYGEL_MEDIA_EXPORT_PHOTO_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_PHOTO_ITEM, RygelMediaExportPhotoItem))
#define RYGEL_MEDIA_EXPORT_PHOTO_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_PHOTO_ITEM, RygelMediaExportPhotoItemClass))
#define RYGEL_MEDIA_EXPORT_IS_PHOTO_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_PHOTO_ITEM))
#define RYGEL_MEDIA_EXPORT_IS_PHOTO_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_PHOTO_ITEM))
#define RYGEL_MEDIA_EXPORT_PHOTO_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_PHOTO_ITEM, RygelMediaExportPhotoItemClass))

typedef struct _RygelMediaExportPhotoItem RygelMediaExportPhotoItem;
typedef struct _RygelMediaExportPhotoItemClass RygelMediaExportPhotoItemClass;

#define RYGEL_MEDIA_EXPORT_TYPE_MUSIC_ITEM (rygel_media_export_music_item_get_type ())
#define RYGEL_MEDIA_EXPORT_MUSIC_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_MUSIC_ITEM, RygelMediaExportMusicItem))
#define RYGEL_MEDIA_EXPORT_MUSIC_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_MUSIC_ITEM, RygelMediaExportMusicItemClass))
#define RYGEL_MEDIA_EXPORT_IS_MUSIC_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_MUSIC_ITEM))
#define RYGEL_MEDIA_EXPORT_IS_MUSIC_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_MUSIC_ITEM))
#define RYGEL_MEDIA_EXPORT_MUSIC_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_MUSIC_ITEM, RygelMediaExportMusicItemClass))

typedef struct _RygelMediaExportMusicItem RygelMediaExportMusicItem;
typedef struct _RygelMediaExportMusicItemClass RygelMediaExportMusicItemClass;
#define __g_list_free__gst_mini_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__gst_mini_object_unref0_ (var), NULL)))
#define _gst_mini_object_unref0(var) ((var == NULL) ? NULL : (var = (gst_mini_object_unref (var), NULL)))

#define RYGEL_MEDIA_EXPORT_TYPE_JPEG_WRITER (rygel_media_export_jpeg_writer_get_type ())
#define RYGEL_MEDIA_EXPORT_JPEG_WRITER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_JPEG_WRITER, RygelMediaExportJPEGWriter))
#define RYGEL_MEDIA_EXPORT_JPEG_WRITER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_JPEG_WRITER, RygelMediaExportJPEGWriterClass))
#define RYGEL_MEDIA_EXPORT_IS_JPEG_WRITER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_JPEG_WRITER))
#define RYGEL_MEDIA_EXPORT_IS_JPEG_WRITER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_JPEG_WRITER))
#define RYGEL_MEDIA_EXPORT_JPEG_WRITER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_JPEG_WRITER, RygelMediaExportJPEGWriterClass))

typedef struct _RygelMediaExportJPEGWriter RygelMediaExportJPEGWriter;
typedef struct _RygelMediaExportJPEGWriterClass RygelMediaExportJPEGWriterClass;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _gst_structure_free0(var) ((var == NULL) ? NULL : (var = (gst_structure_free (var), NULL)))
typedef struct _RygelMediaExportMusicItemPrivate RygelMediaExportMusicItemPrivate;

struct _RygelMediaExportMusicItem {
	RygelMusicItem parent_instance;
	RygelMediaExportMusicItemPrivate * priv;
	gint disc;
};

struct _RygelMediaExportMusicItemClass {
	RygelMusicItemClass parent_class;
};



RygelMediaItem* rygel_media_export_item_factory_create_simple (RygelMediaContainer* parent, GFile* file, GFileInfo* info);
gchar* rygel_media_export_media_cache_get_id (GFile* file);
RygelMediaExportVideoItem* rygel_media_export_video_item_new (const gchar* id, RygelMediaContainer* parent, const gchar* title, const gchar* upnp_class);
RygelMediaExportVideoItem* rygel_media_export_video_item_construct (GType object_type, const gchar* id, RygelMediaContainer* parent, const gchar* title, const gchar* upnp_class);
GType rygel_media_export_video_item_get_type (void) G_GNUC_CONST;
RygelMediaExportPhotoItem* rygel_media_export_photo_item_new (const gchar* id, RygelMediaContainer* parent, const gchar* title, const gchar* upnp_class);
RygelMediaExportPhotoItem* rygel_media_export_photo_item_construct (GType object_type, const gchar* id, RygelMediaContainer* parent, const gchar* title, const gchar* upnp_class);
GType rygel_media_export_photo_item_get_type (void) G_GNUC_CONST;
RygelMediaExportMusicItem* rygel_media_export_music_item_new (const gchar* id, RygelMediaContainer* parent, const gchar* title, const gchar* upnp_class);
RygelMediaExportMusicItem* rygel_media_export_music_item_construct (GType object_type, const gchar* id, RygelMediaContainer* parent, const gchar* title, const gchar* upnp_class);
GType rygel_media_export_music_item_get_type (void) G_GNUC_CONST;
RygelMediaItem* rygel_media_export_item_factory_create_from_info (RygelMediaContainer* parent, GFile* file, GUPnPDLNAInformation* dlna_info, GFileInfo* file_info);
static void _gst_mini_object_unref0_ (gpointer var);
static void _g_list_free__gst_mini_object_unref0_ (GList* self);
RygelMediaItem* rygel_media_export_item_factory_fill_photo_item (RygelMediaExportPhotoItem* item, GFile* file, GUPnPDLNAInformation* dlna_info, GstDiscovererVideoInfo* video_info, GFileInfo* file_info);
RygelMediaItem* rygel_media_export_item_factory_fill_video_item (RygelMediaExportVideoItem* item, GFile* file, GUPnPDLNAInformation* dlna_info, GstDiscovererVideoInfo* video_info, GstDiscovererAudioInfo* audio_info, GFileInfo* file_info);
RygelMediaItem* rygel_media_export_item_factory_fill_music_item (RygelMediaExportMusicItem* item, GFile* file, GUPnPDLNAInformation* dlna_info, GstDiscovererAudioInfo* audio_info, GFileInfo* file_info);
void rygel_media_export_item_factory_fill_audio_item (RygelAudioItem* item, GUPnPDLNAInformation* dlna_info, GstDiscovererAudioInfo* audio_info);
void rygel_media_export_item_factory_fill_media_item (RygelMediaItem* item, GFile* file, GUPnPDLNAInformation* dlna_info, GFileInfo* file_info);
RygelMediaExportJPEGWriter* rygel_media_export_jpeg_writer_new (GError** error);
RygelMediaExportJPEGWriter* rygel_media_export_jpeg_writer_construct (GType object_type, GError** error);
GType rygel_media_export_jpeg_writer_get_type (void) G_GNUC_CONST;
void rygel_media_export_jpeg_writer_write (RygelMediaExportJPEGWriter* self, GstBuffer* buffer, GFile* file);


RygelMediaItem* rygel_media_export_item_factory_create_simple (RygelMediaContainer* parent, GFile* file, GFileInfo* info) {
	RygelMediaItem* result = NULL;
	GFileInfo* _tmp0_;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_;
	gchar* title;
	RygelMediaItem* item = NULL;
	GFileInfo* _tmp3_;
	const gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	gchar* mime;
	const gchar* _tmp6_;
	gboolean _tmp7_ = FALSE;
	RygelMediaItem* _tmp28_;
	const gchar* _tmp29_;
	gchar* _tmp30_;
	RygelMediaItem* _tmp31_;
	GFileInfo* _tmp32_;
	gint64 _tmp33_ = 0LL;
	RygelMediaItem* _tmp34_;
	GFileInfo* _tmp35_;
	guint64 _tmp36_ = 0ULL;
	RygelMediaItem* _tmp37_;
	GFile* _tmp38_;
	gchar* _tmp39_ = NULL;
	gchar* _tmp40_;
#line 31 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (parent != NULL, NULL);
#line 31 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 31 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (info != NULL, NULL);
#line 34 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp0_ = info;
#line 34 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp1_ = g_file_info_get_display_name (_tmp0_);
#line 34 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp2_ = g_strdup (_tmp1_);
#line 34 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	title = _tmp2_;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp3_ = info;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp4_ = g_file_info_get_content_type (_tmp3_);
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp5_ = g_content_type_get_mime_type (_tmp4_);
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	mime = _tmp5_;
#line 38 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp6_ = mime;
#line 38 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp7_ = g_str_has_prefix (_tmp6_, "video/");
#line 38 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp7_) {
#line 178 "rygel-media-export-item.c"
		GFile* _tmp8_;
		gchar* _tmp9_ = NULL;
		gchar* _tmp10_;
		RygelMediaContainer* _tmp11_;
		const gchar* _tmp12_;
		RygelMediaExportVideoItem* _tmp13_;
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp8_ = file;
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp9_ = rygel_media_export_media_cache_get_id (_tmp8_);
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp10_ = _tmp9_;
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp11_ = parent;
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp12_ = title;
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp13_ = rygel_media_export_video_item_new (_tmp10_, _tmp11_, _tmp12_, RYGEL_VIDEO_ITEM_UPNP_CLASS);
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_object_unref0 (item);
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		item = (RygelMediaItem*) _tmp13_;
#line 39 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (_tmp10_);
#line 203 "rygel-media-export-item.c"
	} else {
		const gchar* _tmp14_;
		gboolean _tmp15_ = FALSE;
#line 40 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp14_ = mime;
#line 40 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp15_ = g_str_has_prefix (_tmp14_, "image/");
#line 40 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		if (_tmp15_) {
#line 213 "rygel-media-export-item.c"
			GFile* _tmp16_;
			gchar* _tmp17_ = NULL;
			gchar* _tmp18_;
			RygelMediaContainer* _tmp19_;
			const gchar* _tmp20_;
			RygelMediaExportPhotoItem* _tmp21_;
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp16_ = file;
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp17_ = rygel_media_export_media_cache_get_id (_tmp16_);
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp18_ = _tmp17_;
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp19_ = parent;
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp20_ = title;
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp21_ = rygel_media_export_photo_item_new (_tmp18_, _tmp19_, _tmp20_, RYGEL_PHOTO_ITEM_UPNP_CLASS);
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_g_object_unref0 (item);
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			item = (RygelMediaItem*) _tmp21_;
#line 41 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_g_free0 (_tmp18_);
#line 238 "rygel-media-export-item.c"
		} else {
			GFile* _tmp22_;
			gchar* _tmp23_ = NULL;
			gchar* _tmp24_;
			RygelMediaContainer* _tmp25_;
			const gchar* _tmp26_;
			RygelMediaExportMusicItem* _tmp27_;
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp22_ = file;
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp23_ = rygel_media_export_media_cache_get_id (_tmp22_);
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp24_ = _tmp23_;
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp25_ = parent;
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp26_ = title;
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp27_ = rygel_media_export_music_item_new (_tmp24_, _tmp25_, _tmp26_, RYGEL_MUSIC_ITEM_UPNP_CLASS);
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_g_object_unref0 (item);
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			item = (RygelMediaItem*) _tmp27_;
#line 43 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_g_free0 (_tmp24_);
#line 264 "rygel-media-export-item.c"
		}
	}
#line 46 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp28_ = item;
#line 46 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp29_ = mime;
#line 46 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp30_ = g_strdup (_tmp29_);
#line 46 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_g_free0 (_tmp28_->mime_type);
#line 46 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp28_->mime_type = _tmp30_;
#line 47 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp31_ = item;
#line 47 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp32_ = info;
#line 47 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp33_ = g_file_info_get_size (_tmp32_);
#line 47 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_item_set_size (_tmp31_, (gint64) _tmp33_);
#line 48 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp34_ = item;
#line 48 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp35_ = info;
#line 48 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp36_ = g_file_info_get_attribute_uint64 (_tmp35_, G_FILE_ATTRIBUTE_TIME_MODIFIED);
#line 48 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	((RygelMediaObject*) _tmp34_)->modified = _tmp36_;
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp37_ = item;
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp38_ = file;
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp39_ = g_file_get_uri (_tmp38_);
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp40_ = _tmp39_;
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_item_add_uri (_tmp37_, _tmp40_);
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_g_free0 (_tmp40_);
#line 52 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	result = item;
#line 52 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_g_free0 (mime);
#line 52 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_g_free0 (title);
#line 52 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	return result;
#line 313 "rygel-media-export-item.c"
}


static void _gst_mini_object_unref0_ (gpointer var) {
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	(var == NULL) ? NULL : (var = (gst_mini_object_unref (var), NULL));
#line 320 "rygel-media-export-item.c"
}


static void _g_list_free__gst_mini_object_unref0_ (GList* self) {
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_list_foreach (self, (GFunc) _gst_mini_object_unref0_, NULL);
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_list_free (self);
#line 329 "rygel-media-export-item.c"
}


static gpointer _gst_mini_object_ref0 (gpointer self) {
#line 86 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	return self ? gst_mini_object_ref (self) : NULL;
#line 336 "rygel-media-export-item.c"
}


RygelMediaItem* rygel_media_export_item_factory_create_from_info (RygelMediaContainer* parent, GFile* file, GUPnPDLNAInformation* dlna_info, GFileInfo* file_info) {
	RygelMediaItem* result = NULL;
	RygelMediaItem* item = NULL;
	GFile* _tmp0_;
	gchar* _tmp1_ = NULL;
	gchar* id;
	GList* audio_streams = NULL;
	GList* video_streams = NULL;
	GUPnPDLNAInformation* _tmp2_;
	GstDiscovererInfo* _tmp3_;
	GstDiscovererInfo* _tmp4_;
	GList* _tmp5_ = NULL;
	GUPnPDLNAInformation* _tmp6_;
	GstDiscovererInfo* _tmp7_;
	GstDiscovererInfo* _tmp8_;
	GList* _tmp9_ = NULL;
	gboolean _tmp10_ = FALSE;
	GList* _tmp11_;
	gboolean _tmp13_;
	gboolean _tmp17_ = FALSE;
	GList* _tmp18_;
	gboolean _tmp22_;
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (parent != NULL, NULL);
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (dlna_info != NULL, NULL);
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file_info != NULL, NULL);
#line 61 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp0_ = file;
#line 61 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp1_ = rygel_media_export_media_cache_get_id (_tmp0_);
#line 61 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	id = _tmp1_;
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp2_ = dlna_info;
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp3_ = gupnp_dlna_information_get_info (_tmp2_);
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp4_ = _tmp3_;
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp5_ = gst_discoverer_info_get_audio_streams (_tmp4_);
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	__g_list_free__gst_mini_object_unref0_0 (audio_streams);
#line 65 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	audio_streams = _tmp5_;
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp6_ = dlna_info;
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp7_ = gupnp_dlna_information_get_info (_tmp6_);
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp8_ = _tmp7_;
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp9_ = gst_discoverer_info_get_video_streams (_tmp8_);
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	__g_list_free__gst_mini_object_unref0_0 (video_streams);
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	video_streams = _tmp9_;
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp11_ = audio_streams;
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp11_ == NULL) {
#line 404 "rygel-media-export-item.c"
		GList* _tmp12_;
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp12_ = video_streams;
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp10_ = _tmp12_ == NULL;
#line 410 "rygel-media-export-item.c"
	} else {
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp10_ = FALSE;
#line 414 "rygel-media-export-item.c"
	}
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp13_ = _tmp10_;
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp13_) {
#line 420 "rygel-media-export-item.c"
		GFile* _tmp14_;
		gchar* _tmp15_ = NULL;
		gchar* _tmp16_;
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp14_ = file;
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp15_ = g_file_get_uri (_tmp14_);
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp16_ = _tmp15_;
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		g_debug ("%s had neither audio nor video/picture " "streams. Ignoring.", _tmp16_);
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (_tmp16_);
#line 73 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		result = NULL;
#line 73 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		__g_list_free__gst_mini_object_unref0_0 (video_streams);
#line 73 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		__g_list_free__gst_mini_object_unref0_0 (audio_streams);
#line 73 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (id);
#line 73 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_object_unref0 (item);
#line 73 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		return result;
#line 446 "rygel-media-export-item.c"
	}
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp18_ = audio_streams;
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp18_ == NULL) {
#line 452 "rygel-media-export-item.c"
		GList* _tmp19_;
		gconstpointer _tmp20_;
		gboolean _tmp21_ = FALSE;
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp19_ = video_streams;
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp20_ = _tmp19_->data;
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp21_ = gst_discoverer_video_info_is_image ((GstDiscovererVideoInfo*) _tmp20_);
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp17_ = _tmp21_;
#line 464 "rygel-media-export-item.c"
	} else {
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp17_ = FALSE;
#line 468 "rygel-media-export-item.c"
	}
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp22_ = _tmp17_;
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp22_) {
#line 474 "rygel-media-export-item.c"
		const gchar* _tmp23_;
		RygelMediaContainer* _tmp24_;
		RygelMediaExportPhotoItem* _tmp25_;
		RygelMediaItem* _tmp26_;
		GFile* _tmp27_;
		GUPnPDLNAInformation* _tmp28_;
		GList* _tmp29_;
		gconstpointer _tmp30_;
		GFileInfo* _tmp31_;
		RygelMediaItem* _tmp32_ = NULL;
#line 77 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp23_ = id;
#line 77 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp24_ = parent;
#line 77 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp25_ = rygel_media_export_photo_item_new (_tmp23_, _tmp24_, "", RYGEL_PHOTO_ITEM_UPNP_CLASS);
#line 77 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_object_unref0 (item);
#line 77 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		item = (RygelMediaItem*) _tmp25_;
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp26_ = item;
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp27_ = file;
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp28_ = dlna_info;
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp29_ = video_streams;
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp30_ = _tmp29_->data;
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp31_ = file_info;
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp32_ = rygel_media_export_item_factory_fill_photo_item (RYGEL_MEDIA_EXPORT_IS_PHOTO_ITEM (_tmp26_) ? ((RygelMediaExportPhotoItem*) _tmp26_) : NULL, _tmp27_, _tmp28_, (GstDiscovererVideoInfo*) _tmp30_, _tmp31_);
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		result = _tmp32_;
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		__g_list_free__gst_mini_object_unref0_0 (video_streams);
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		__g_list_free__gst_mini_object_unref0_0 (audio_streams);
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (id);
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_object_unref0 (item);
#line 78 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		return result;
#line 521 "rygel-media-export-item.c"
	} else {
		GList* _tmp33_;
#line 83 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp33_ = video_streams;
#line 83 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		if (_tmp33_ != NULL) {
#line 528 "rygel-media-export-item.c"
			const gchar* _tmp34_;
			RygelMediaContainer* _tmp35_;
			RygelMediaExportVideoItem* _tmp36_;
			GstDiscovererAudioInfo* _tmp37_;
			GstDiscovererAudioInfo* audio_info;
			GList* _tmp38_;
			RygelMediaItem* _tmp42_;
			GFile* _tmp43_;
			GUPnPDLNAInformation* _tmp44_;
			GList* _tmp45_;
			gconstpointer _tmp46_;
			GstDiscovererAudioInfo* _tmp47_;
			GFileInfo* _tmp48_;
			RygelMediaItem* _tmp49_ = NULL;
#line 84 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp34_ = id;
#line 84 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp35_ = parent;
#line 84 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp36_ = rygel_media_export_video_item_new (_tmp34_, _tmp35_, "", RYGEL_VIDEO_ITEM_UPNP_CLASS);
#line 84 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_g_object_unref0 (item);
#line 84 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			item = (RygelMediaItem*) _tmp36_;
#line 86 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp37_ = _gst_mini_object_ref0 (GST_IS_DISCOVERER_AUDIO_INFO (NULL) ? ((GstDiscovererAudioInfo*) NULL) : NULL);
#line 86 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			audio_info = _tmp37_;
#line 87 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp38_ = audio_streams;
#line 87 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			if (_tmp38_ != NULL) {
#line 561 "rygel-media-export-item.c"
				GList* _tmp39_;
				gconstpointer _tmp40_;
				GstDiscovererAudioInfo* _tmp41_;
#line 88 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp39_ = audio_streams;
#line 88 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp40_ = _tmp39_->data;
#line 88 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp41_ = _gst_mini_object_ref0 ((GstDiscovererAudioInfo*) _tmp40_);
#line 88 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_gst_mini_object_unref0 (audio_info);
#line 88 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				audio_info = _tmp41_;
#line 575 "rygel-media-export-item.c"
			}
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp42_ = item;
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp43_ = file;
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp44_ = dlna_info;
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp45_ = video_streams;
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp46_ = _tmp45_->data;
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp47_ = audio_info;
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp48_ = file_info;
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp49_ = rygel_media_export_item_factory_fill_video_item (RYGEL_MEDIA_EXPORT_IS_VIDEO_ITEM (_tmp42_) ? ((RygelMediaExportVideoItem*) _tmp42_) : NULL, _tmp43_, _tmp44_, (GstDiscovererVideoInfo*) _tmp46_, _tmp47_, _tmp48_);
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			result = _tmp49_;
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_gst_mini_object_unref0 (audio_info);
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			__g_list_free__gst_mini_object_unref0_0 (video_streams);
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			__g_list_free__gst_mini_object_unref0_0 (audio_streams);
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_g_free0 (id);
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_g_object_unref0 (item);
#line 91 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			return result;
#line 607 "rygel-media-export-item.c"
		} else {
			GList* _tmp50_;
#line 97 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp50_ = audio_streams;
#line 97 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			if (_tmp50_ != NULL) {
#line 614 "rygel-media-export-item.c"
				const gchar* _tmp51_;
				RygelMediaContainer* _tmp52_;
				RygelMediaExportMusicItem* _tmp53_;
				RygelMediaItem* _tmp54_;
				GFile* _tmp55_;
				GUPnPDLNAInformation* _tmp56_;
				GList* _tmp57_;
				gconstpointer _tmp58_;
				GFileInfo* _tmp59_;
				RygelMediaItem* _tmp60_ = NULL;
#line 98 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp51_ = id;
#line 98 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp52_ = parent;
#line 98 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp53_ = rygel_media_export_music_item_new (_tmp51_, _tmp52_, "", RYGEL_MUSIC_ITEM_UPNP_CLASS);
#line 98 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_g_object_unref0 (item);
#line 98 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				item = (RygelMediaItem*) _tmp53_;
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp54_ = item;
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp55_ = file;
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp56_ = dlna_info;
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp57_ = audio_streams;
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp58_ = _tmp57_->data;
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp59_ = file_info;
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp60_ = rygel_media_export_item_factory_fill_music_item (RYGEL_MEDIA_EXPORT_IS_MUSIC_ITEM (_tmp54_) ? ((RygelMediaExportMusicItem*) _tmp54_) : NULL, _tmp55_, _tmp56_, (GstDiscovererAudioInfo*) _tmp58_, _tmp59_);
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				result = _tmp60_;
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				__g_list_free__gst_mini_object_unref0_0 (video_streams);
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				__g_list_free__gst_mini_object_unref0_0 (audio_streams);
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_g_free0 (id);
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_g_object_unref0 (item);
#line 99 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				return result;
#line 661 "rygel-media-export-item.c"
			} else {
#line 105 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				result = NULL;
#line 105 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				__g_list_free__gst_mini_object_unref0_0 (video_streams);
#line 105 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				__g_list_free__gst_mini_object_unref0_0 (audio_streams);
#line 105 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_g_free0 (id);
#line 105 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_g_object_unref0 (item);
#line 105 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				return result;
#line 675 "rygel-media-export-item.c"
			}
		}
	}
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	__g_list_free__gst_mini_object_unref0_0 (video_streams);
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	__g_list_free__gst_mini_object_unref0_0 (audio_streams);
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_g_free0 (id);
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_g_object_unref0 (item);
#line 687 "rygel-media-export-item.c"
}


void rygel_media_export_item_factory_fill_audio_item (RygelAudioItem* item, GUPnPDLNAInformation* dlna_info, GstDiscovererAudioInfo* audio_info) {
	GUPnPDLNAInformation* _tmp0_;
	GstDiscovererInfo* _tmp1_;
	GstDiscovererInfo* _tmp2_;
	GstClockTime _tmp3_ = 0ULL;
	GstDiscovererAudioInfo* _tmp10_;
#line 109 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_if_fail (item != NULL);
#line 109 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_if_fail (dlna_info != NULL);
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp0_ = dlna_info;
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp1_ = gupnp_dlna_information_get_info (_tmp0_);
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp2_ = _tmp1_;
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp3_ = gst_discoverer_info_get_duration (_tmp2_);
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp3_ > ((GstClockTime) 0)) {
#line 711 "rygel-media-export-item.c"
		RygelAudioItem* _tmp4_;
		GUPnPDLNAInformation* _tmp5_;
		GstDiscovererInfo* _tmp6_;
		GstDiscovererInfo* _tmp7_;
		GstClockTime _tmp8_ = 0ULL;
#line 113 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp4_ = item;
#line 113 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp5_ = dlna_info;
#line 113 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp6_ = gupnp_dlna_information_get_info (_tmp5_);
#line 113 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp7_ = _tmp6_;
#line 113 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp8_ = gst_discoverer_info_get_duration (_tmp7_);
#line 113 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		rygel_audio_item_set_duration (_tmp4_, (glong) (_tmp8_ / GST_SECOND));
#line 729 "rygel-media-export-item.c"
	} else {
		RygelAudioItem* _tmp9_;
#line 115 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp9_ = item;
#line 115 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		rygel_audio_item_set_duration (_tmp9_, (glong) (-1));
#line 736 "rygel-media-export-item.c"
	}
#line 118 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp10_ = audio_info;
#line 118 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp10_ != NULL) {
#line 742 "rygel-media-export-item.c"
		GstDiscovererAudioInfo* _tmp11_;
		GstTagList* _tmp12_ = NULL;
		RygelAudioItem* _tmp18_;
		GstDiscovererAudioInfo* _tmp19_;
		guint _tmp20_ = 0U;
		RygelAudioItem* _tmp21_;
		GstDiscovererAudioInfo* _tmp22_;
		guint _tmp23_ = 0U;
#line 119 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp11_ = audio_info;
#line 119 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp12_ = gst_discoverer_stream_info_get_tags ((GstDiscovererStreamInfo*) _tmp11_);
#line 119 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		if (_tmp12_ != NULL) {
#line 757 "rygel-media-export-item.c"
			guint tmp = 0U;
			GstDiscovererAudioInfo* _tmp13_;
			GstTagList* _tmp14_ = NULL;
			guint _tmp15_ = 0U;
			RygelAudioItem* _tmp16_;
			guint _tmp17_;
#line 121 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp13_ = audio_info;
#line 121 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp14_ = gst_discoverer_stream_info_get_tags ((GstDiscovererStreamInfo*) _tmp13_);
#line 121 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			gst_tag_list_get_uint (_tmp14_, GST_TAG_BITRATE, &_tmp15_);
#line 121 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			tmp = _tmp15_;
#line 122 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp16_ = item;
#line 122 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp17_ = tmp;
#line 122 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			rygel_audio_item_set_bitrate (_tmp16_, ((gint) _tmp17_) / 8);
#line 778 "rygel-media-export-item.c"
		}
#line 124 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp18_ = item;
#line 124 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp19_ = audio_info;
#line 124 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp20_ = gst_discoverer_audio_info_get_channels (_tmp19_);
#line 124 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		rygel_audio_item_set_channels (_tmp18_, (gint) _tmp20_);
#line 125 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp21_ = item;
#line 125 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp22_ = audio_info;
#line 125 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp23_ = gst_discoverer_audio_info_get_sample_rate (_tmp22_);
#line 125 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		rygel_audio_item_set_sample_freq (_tmp21_, (gint) _tmp23_);
#line 796 "rygel-media-export-item.c"
	}
}


static gpointer _g_object_ref0 (gpointer self) {
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	return self ? g_object_ref (self) : NULL;
#line 804 "rygel-media-export-item.c"
}


RygelMediaItem* rygel_media_export_item_factory_fill_video_item (RygelMediaExportVideoItem* item, GFile* file, GUPnPDLNAInformation* dlna_info, GstDiscovererVideoInfo* video_info, GstDiscovererAudioInfo* audio_info, GFileInfo* file_info) {
	RygelMediaItem* result = NULL;
	RygelMediaExportVideoItem* _tmp0_;
	GUPnPDLNAInformation* _tmp1_;
	GstDiscovererAudioInfo* _tmp2_;
	RygelMediaExportVideoItem* _tmp3_;
	GFile* _tmp4_;
	GUPnPDLNAInformation* _tmp5_;
	GFileInfo* _tmp6_;
	RygelMediaExportVideoItem* _tmp7_;
	GstDiscovererVideoInfo* _tmp8_;
	guint _tmp9_ = 0U;
	RygelMediaExportVideoItem* _tmp10_;
	GstDiscovererVideoInfo* _tmp11_;
	guint _tmp12_ = 0U;
	GstDiscovererVideoInfo* _tmp13_;
	guint _tmp14_ = 0U;
	gint color_depth;
	gint _tmp15_ = 0;
	gint _tmp16_;
	RygelMediaExportVideoItem* _tmp18_;
	gint _tmp19_;
	RygelMediaExportVideoItem* _tmp20_;
	RygelMediaItem* _tmp21_;
#line 130 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (item != NULL, NULL);
#line 130 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 130 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (dlna_info != NULL, NULL);
#line 130 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (video_info != NULL, NULL);
#line 130 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file_info != NULL, NULL);
#line 136 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp0_ = item;
#line 136 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp1_ = dlna_info;
#line 136 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp2_ = audio_info;
#line 136 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_export_item_factory_fill_audio_item (RYGEL_IS_AUDIO_ITEM (_tmp0_) ? ((RygelAudioItem*) _tmp0_) : NULL, _tmp1_, _tmp2_);
#line 137 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp3_ = item;
#line 137 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp4_ = file;
#line 137 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp5_ = dlna_info;
#line 137 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp6_ = file_info;
#line 137 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_export_item_factory_fill_media_item ((RygelMediaItem*) _tmp3_, _tmp4_, _tmp5_, _tmp6_);
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp7_ = item;
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp8_ = video_info;
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp9_ = gst_discoverer_video_info_get_width (_tmp8_);
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_visual_item_set_width ((RygelVisualItem*) _tmp7_, (gint) _tmp9_);
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp10_ = item;
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp11_ = video_info;
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp12_ = gst_discoverer_video_info_get_height (_tmp11_);
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_visual_item_set_height ((RygelVisualItem*) _tmp10_, (gint) _tmp12_);
#line 142 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp13_ = video_info;
#line 142 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp14_ = gst_discoverer_video_info_get_depth (_tmp13_);
#line 142 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	color_depth = (gint) _tmp14_;
#line 143 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp16_ = color_depth;
#line 143 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp16_ == 0) {
#line 143 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp15_ = -1;
#line 888 "rygel-media-export-item.c"
	} else {
		gint _tmp17_;
#line 143 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp17_ = color_depth;
#line 143 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp15_ = _tmp17_;
#line 895 "rygel-media-export-item.c"
	}
#line 143 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp18_ = item;
#line 143 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp19_ = _tmp15_;
#line 143 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_visual_item_set_color_depth ((RygelVisualItem*) _tmp18_, _tmp19_);
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp20_ = item;
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp21_ = _g_object_ref0 ((RygelMediaItem*) _tmp20_);
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	result = _tmp21_;
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	return result;
#line 911 "rygel-media-export-item.c"
}


RygelMediaItem* rygel_media_export_item_factory_fill_photo_item (RygelMediaExportPhotoItem* item, GFile* file, GUPnPDLNAInformation* dlna_info, GstDiscovererVideoInfo* video_info, GFileInfo* file_info) {
	RygelMediaItem* result = NULL;
	RygelMediaExportPhotoItem* _tmp0_;
	GFile* _tmp1_;
	GUPnPDLNAInformation* _tmp2_;
	GFileInfo* _tmp3_;
	RygelMediaExportPhotoItem* _tmp4_;
	GstDiscovererVideoInfo* _tmp5_;
	guint _tmp6_ = 0U;
	RygelMediaExportPhotoItem* _tmp7_;
	GstDiscovererVideoInfo* _tmp8_;
	guint _tmp9_ = 0U;
	GstDiscovererVideoInfo* _tmp10_;
	guint _tmp11_ = 0U;
	gint color_depth;
	gint _tmp12_ = 0;
	gint _tmp13_;
	RygelMediaExportPhotoItem* _tmp15_;
	gint _tmp16_;
	RygelMediaExportPhotoItem* _tmp17_;
	RygelMediaItem* _tmp18_;
#line 148 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (item != NULL, NULL);
#line 148 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 148 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (dlna_info != NULL, NULL);
#line 148 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (video_info != NULL, NULL);
#line 148 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file_info != NULL, NULL);
#line 153 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp0_ = item;
#line 153 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp1_ = file;
#line 153 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp2_ = dlna_info;
#line 153 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp3_ = file_info;
#line 153 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_export_item_factory_fill_media_item ((RygelMediaItem*) _tmp0_, _tmp1_, _tmp2_, _tmp3_);
#line 155 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp4_ = item;
#line 155 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp5_ = video_info;
#line 155 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp6_ = gst_discoverer_video_info_get_width (_tmp5_);
#line 155 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_visual_item_set_width ((RygelVisualItem*) _tmp4_, (gint) _tmp6_);
#line 156 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp7_ = item;
#line 156 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp8_ = video_info;
#line 156 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp9_ = gst_discoverer_video_info_get_height (_tmp8_);
#line 156 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_visual_item_set_height ((RygelVisualItem*) _tmp7_, (gint) _tmp9_);
#line 158 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp10_ = video_info;
#line 158 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp11_ = gst_discoverer_video_info_get_depth (_tmp10_);
#line 158 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	color_depth = (gint) _tmp11_;
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp13_ = color_depth;
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp13_ == 0) {
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp12_ = -1;
#line 984 "rygel-media-export-item.c"
	} else {
		gint _tmp14_;
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp14_ = color_depth;
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp12_ = _tmp14_;
#line 991 "rygel-media-export-item.c"
	}
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp15_ = item;
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp16_ = _tmp12_;
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_visual_item_set_color_depth ((RygelVisualItem*) _tmp15_, _tmp16_);
#line 161 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp17_ = item;
#line 161 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp18_ = _g_object_ref0 ((RygelMediaItem*) _tmp17_);
#line 161 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	result = _tmp18_;
#line 161 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	return result;
#line 1007 "rygel-media-export-item.c"
}


static gpointer _gst_structure_copy0 (gpointer self) {
#line 177 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	return self ? gst_structure_copy (self) : NULL;
#line 1014 "rygel-media-export-item.c"
}


RygelMediaItem* rygel_media_export_item_factory_fill_music_item (RygelMediaExportMusicItem* item, GFile* file, GUPnPDLNAInformation* dlna_info, GstDiscovererAudioInfo* audio_info, GFileInfo* file_info) {
	RygelMediaItem* result = NULL;
	RygelMediaExportMusicItem* _tmp0_;
	GUPnPDLNAInformation* _tmp1_;
	GstDiscovererAudioInfo* _tmp2_;
	RygelMediaExportMusicItem* _tmp3_;
	GFile* _tmp4_;
	GUPnPDLNAInformation* _tmp5_;
	GFileInfo* _tmp6_;
	GstDiscovererAudioInfo* _tmp7_;
	RygelMediaExportMusicItem* _tmp64_;
	RygelMediaItem* _tmp65_;
	GError * _inner_error_ = NULL;
#line 164 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (item != NULL, NULL);
#line 164 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 164 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (dlna_info != NULL, NULL);
#line 164 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_val_if_fail (file_info != NULL, NULL);
#line 169 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp0_ = item;
#line 169 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp1_ = dlna_info;
#line 169 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp2_ = audio_info;
#line 169 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_export_item_factory_fill_audio_item (RYGEL_IS_AUDIO_ITEM (_tmp0_) ? ((RygelAudioItem*) _tmp0_) : NULL, _tmp1_, _tmp2_);
#line 170 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp3_ = item;
#line 170 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp4_ = file;
#line 170 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp5_ = dlna_info;
#line 170 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp6_ = file_info;
#line 170 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_export_item_factory_fill_media_item ((RygelMediaItem*) _tmp3_, _tmp4_, _tmp5_, _tmp6_);
#line 172 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp7_ = audio_info;
#line 172 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp7_ != NULL) {
#line 1061 "rygel-media-export-item.c"
		GstDiscovererAudioInfo* _tmp8_;
		GstTagList* _tmp9_ = NULL;
		gchar* artist = NULL;
		GUPnPDLNAInformation* _tmp29_;
		GstDiscovererInfo* _tmp30_;
		GstDiscovererInfo* _tmp31_;
		GstTagList* _tmp32_ = NULL;
		gchar* _tmp33_ = NULL;
		RygelMediaExportMusicItem* _tmp34_;
		const gchar* _tmp35_;
		gchar* album = NULL;
		GUPnPDLNAInformation* _tmp36_;
		GstDiscovererInfo* _tmp37_;
		GstDiscovererInfo* _tmp38_;
		GstTagList* _tmp39_ = NULL;
		gchar* _tmp40_ = NULL;
		RygelMediaExportMusicItem* _tmp41_;
		const gchar* _tmp42_;
		gchar* genre = NULL;
		GUPnPDLNAInformation* _tmp43_;
		GstDiscovererInfo* _tmp44_;
		GstDiscovererInfo* _tmp45_;
		GstTagList* _tmp46_ = NULL;
		gchar* _tmp47_ = NULL;
		RygelMediaExportMusicItem* _tmp48_;
		const gchar* _tmp49_;
		guint tmp = 0U;
		GUPnPDLNAInformation* _tmp50_;
		GstDiscovererInfo* _tmp51_;
		GstDiscovererInfo* _tmp52_;
		GstTagList* _tmp53_ = NULL;
		guint _tmp54_ = 0U;
		RygelMediaExportMusicItem* _tmp55_;
		guint _tmp56_;
		GUPnPDLNAInformation* _tmp57_;
		GstDiscovererInfo* _tmp58_;
		GstDiscovererInfo* _tmp59_;
		GstTagList* _tmp60_ = NULL;
		guint _tmp61_ = 0U;
		RygelMediaExportMusicItem* _tmp62_;
		guint _tmp63_;
#line 173 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp8_ = audio_info;
#line 173 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp9_ = gst_discoverer_stream_info_get_tags ((GstDiscovererStreamInfo*) _tmp8_);
#line 173 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		if (_tmp9_ != NULL) {
#line 1109 "rygel-media-export-item.c"
			GstBuffer* buffer = NULL;
			GstDiscovererAudioInfo* _tmp10_;
			GstTagList* _tmp11_ = NULL;
			GstBuffer* _tmp12_ = NULL;
			GstBuffer* _tmp13_;
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp10_ = audio_info;
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp11_ = gst_discoverer_stream_info_get_tags ((GstDiscovererStreamInfo*) _tmp10_);
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			gst_tag_list_get_buffer (_tmp11_, GST_TAG_IMAGE, &_tmp12_);
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			buffer = _tmp12_;
#line 176 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp13_ = buffer;
#line 176 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			if (_tmp13_ != NULL) {
#line 1127 "rygel-media-export-item.c"
				GstBuffer* _tmp14_;
				GstCaps* _tmp15_;
				const GstStructure* _tmp16_ = NULL;
				GstStructure* _tmp17_;
				GstStructure* structure;
				gint image_type = 0;
				const GstStructure* _tmp18_;
				gint _tmp19_ = 0;
				gint _tmp20_;
#line 177 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp14_ = buffer;
#line 177 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp15_ = _tmp14_->caps;
#line 177 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp16_ = gst_caps_get_structure (_tmp15_, (guint) 0);
#line 177 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp17_ = _gst_structure_copy0 (_tmp16_);
#line 177 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				structure = _tmp17_;
#line 179 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp18_ = structure;
#line 179 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				gst_structure_get_enum (_tmp18_, "image-type", GST_TYPE_TAG_IMAGE_TYPE, &_tmp19_);
#line 179 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				image_type = _tmp19_;
#line 182 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_tmp20_ = image_type;
#line 182 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				switch (_tmp20_) {
#line 182 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
					case GST_TAG_IMAGE_TYPE_UNDEFINED:
#line 182 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
					case GST_TAG_IMAGE_TYPE_FRONT_COVER:
#line 1161 "rygel-media-export-item.c"
					{
						RygelMediaArtStore* _tmp21_ = NULL;
						RygelMediaArtStore* store;
						RygelMediaArtStore* _tmp22_;
						RygelMediaExportMusicItem* _tmp23_;
						GFile* _tmp24_ = NULL;
						GFile* thumb;
#line 185 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						_tmp21_ = rygel_media_art_store_get_default ();
#line 185 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						store = _tmp21_;
#line 186 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						_tmp22_ = store;
#line 186 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						_tmp23_ = item;
#line 186 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						_tmp24_ = rygel_media_art_store_get_media_art_file (_tmp22_, "album", (RygelMusicItem*) _tmp23_, TRUE);
#line 186 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						thumb = _tmp24_;
#line 1181 "rygel-media-export-item.c"
						{
							RygelMediaExportJPEGWriter* _tmp25_;
							RygelMediaExportJPEGWriter* writer;
							RygelMediaExportJPEGWriter* _tmp26_;
							GstBuffer* _tmp27_;
							GFile* _tmp28_;
#line 190 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_tmp25_ = rygel_media_export_jpeg_writer_new (&_inner_error_);
#line 190 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							writer = _tmp25_;
#line 190 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							if (_inner_error_ != NULL) {
#line 1194 "rygel-media-export-item.c"
								goto __catch59_g_error;
							}
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_tmp26_ = writer;
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_tmp27_ = buffer;
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_tmp28_ = thumb;
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							rygel_media_export_jpeg_writer_write (_tmp26_, _tmp27_, _tmp28_);
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_g_object_unref0 (writer);
#line 1207 "rygel-media-export-item.c"
						}
						goto __finally59;
						__catch59_g_error:
						{
							GError* _error_ = NULL;
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_error_ = _inner_error_;
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_inner_error_ = NULL;
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_g_error_free0 (_error_);
#line 1219 "rygel-media-export-item.c"
						}
						__finally59:
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						if (_inner_error_ != NULL) {
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_g_object_unref0 (thumb);
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_g_object_unref0 (store);
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							_gst_structure_free0 (structure);
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							g_clear_error (&_inner_error_);
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
							return NULL;
#line 1236 "rygel-media-export-item.c"
						}
#line 193 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						_g_object_unref0 (thumb);
#line 193 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						_g_object_unref0 (store);
#line 193 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						break;
#line 1244 "rygel-media-export-item.c"
					}
					default:
					{
#line 195 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
						break;
#line 1250 "rygel-media-export-item.c"
					}
				}
#line 176 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
				_gst_structure_free0 (structure);
#line 1255 "rygel-media-export-item.c"
			}
		}
#line 201 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp29_ = dlna_info;
#line 201 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp30_ = gupnp_dlna_information_get_info (_tmp29_);
#line 201 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp31_ = _tmp30_;
#line 201 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp32_ = gst_discoverer_info_get_tags (_tmp31_);
#line 201 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		gst_tag_list_get_string (_tmp32_, GST_TAG_ARTIST, &_tmp33_);
#line 201 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (artist);
#line 201 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		artist = _tmp33_;
#line 202 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp34_ = item;
#line 202 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp35_ = artist;
#line 202 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		rygel_music_item_set_artist ((RygelMusicItem*) _tmp34_, _tmp35_);
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp36_ = dlna_info;
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp37_ = gupnp_dlna_information_get_info (_tmp36_);
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp38_ = _tmp37_;
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp39_ = gst_discoverer_info_get_tags (_tmp38_);
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		gst_tag_list_get_string (_tmp39_, GST_TAG_ALBUM, &_tmp40_);
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (album);
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		album = _tmp40_;
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp41_ = item;
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp42_ = album;
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		rygel_music_item_set_album ((RygelMusicItem*) _tmp41_, _tmp42_);
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp43_ = dlna_info;
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp44_ = gupnp_dlna_information_get_info (_tmp43_);
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp45_ = _tmp44_;
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp46_ = gst_discoverer_info_get_tags (_tmp45_);
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		gst_tag_list_get_string (_tmp46_, GST_TAG_GENRE, &_tmp47_);
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (genre);
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		genre = _tmp47_;
#line 210 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp48_ = item;
#line 210 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp49_ = genre;
#line 210 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		rygel_music_item_set_genre ((RygelMusicItem*) _tmp48_, _tmp49_);
#line 213 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp50_ = dlna_info;
#line 213 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp51_ = gupnp_dlna_information_get_info (_tmp50_);
#line 213 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp52_ = _tmp51_;
#line 213 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp53_ = gst_discoverer_info_get_tags (_tmp52_);
#line 213 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		gst_tag_list_get_uint (_tmp53_, GST_TAG_ALBUM_VOLUME_NUMBER, &_tmp54_);
#line 213 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		tmp = _tmp54_;
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp55_ = item;
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp56_ = tmp;
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp55_->disc = (gint) _tmp56_;
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp57_ = dlna_info;
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp58_ = gupnp_dlna_information_get_info (_tmp57_);
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp59_ = _tmp58_;
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp60_ = gst_discoverer_info_get_tags (_tmp59_);
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		gst_tag_list_get_uint (_tmp60_, GST_TAG_TRACK_NUMBER, &_tmp61_);
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		tmp = _tmp61_;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp62_ = item;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp63_ = tmp;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		rygel_music_item_set_track_number ((RygelMusicItem*) _tmp62_, (gint) _tmp63_);
#line 172 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (genre);
#line 172 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (album);
#line 172 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (artist);
#line 1360 "rygel-media-export-item.c"
	}
#line 221 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp64_ = item;
#line 221 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp65_ = _g_object_ref0 ((RygelMediaItem*) _tmp64_);
#line 221 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	result = _tmp65_;
#line 221 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	return result;
#line 1370 "rygel-media-export-item.c"
}


void rygel_media_export_item_factory_fill_media_item (RygelMediaItem* item, GFile* file, GUPnPDLNAInformation* dlna_info, GFileInfo* file_info) {
	gchar* title;
	gboolean _tmp0_ = FALSE;
	GUPnPDLNAInformation* _tmp1_;
	GstDiscovererInfo* _tmp2_;
	GstDiscovererInfo* _tmp3_;
	GstTagList* _tmp4_ = NULL;
	gboolean _tmp11_;
	RygelMediaItem* _tmp15_;
	const gchar* _tmp16_;
	GUPnPDLNAInformation* _tmp17_;
	GstDiscovererInfo* _tmp18_;
	GstDiscovererInfo* _tmp19_;
	GstTagList* _tmp20_ = NULL;
	GFileInfo* _tmp33_;
	guint64 _tmp34_ = 0ULL;
	guint64 mtime;
	RygelMediaItem* _tmp35_;
	const gchar* _tmp36_;
	RygelMediaItem* _tmp41_;
	GFileInfo* _tmp42_;
	gint64 _tmp43_ = 0LL;
	RygelMediaItem* _tmp44_;
	guint64 _tmp45_;
	GUPnPDLNAInformation* _tmp46_;
	const gchar* _tmp47_;
	const gchar* _tmp48_;
	RygelMediaItem* _tmp63_;
	GFile* _tmp64_;
	gchar* _tmp65_ = NULL;
	gchar* _tmp66_;
#line 224 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_if_fail (item != NULL);
#line 224 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_if_fail (file != NULL);
#line 224 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_if_fail (dlna_info != NULL);
#line 224 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	g_return_if_fail (file_info != NULL);
#line 228 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	title = NULL;
#line 230 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp1_ = dlna_info;
#line 230 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp2_ = gupnp_dlna_information_get_info (_tmp1_);
#line 230 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp3_ = _tmp2_;
#line 230 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp4_ = gst_discoverer_info_get_tags (_tmp3_);
#line 230 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp4_ == NULL) {
#line 230 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp0_ = TRUE;
#line 1427 "rygel-media-export-item.c"
	} else {
		GUPnPDLNAInformation* _tmp5_;
		GstDiscovererInfo* _tmp6_;
		GstDiscovererInfo* _tmp7_;
		GstTagList* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		gboolean _tmp10_ = FALSE;
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp5_ = dlna_info;
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp6_ = gupnp_dlna_information_get_info (_tmp5_);
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp7_ = _tmp6_;
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp8_ = gst_discoverer_info_get_tags (_tmp7_);
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp10_ = gst_tag_list_get_string (_tmp8_, GST_TAG_TITLE, &_tmp9_);
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (title);
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		title = _tmp9_;
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp0_ = !_tmp10_;
#line 1451 "rygel-media-export-item.c"
	}
#line 230 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp11_ = _tmp0_;
#line 230 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp11_) {
#line 1457 "rygel-media-export-item.c"
		GFileInfo* _tmp12_;
		const gchar* _tmp13_ = NULL;
		gchar* _tmp14_;
#line 232 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp12_ = file_info;
#line 232 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp13_ = g_file_info_get_display_name (_tmp12_);
#line 232 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp14_ = g_strdup (_tmp13_);
#line 232 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (title);
#line 232 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		title = _tmp14_;
#line 1471 "rygel-media-export-item.c"
	}
#line 235 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp15_ = item;
#line 235 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp16_ = title;
#line 235 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_object_set_title ((RygelMediaObject*) _tmp15_, _tmp16_);
#line 237 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp17_ = dlna_info;
#line 237 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp18_ = gupnp_dlna_information_get_info (_tmp17_);
#line 237 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp19_ = _tmp18_;
#line 237 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp20_ = gst_discoverer_info_get_tags (_tmp19_);
#line 237 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp20_ != NULL) {
#line 1489 "rygel-media-export-item.c"
		GDate* date = NULL;
		GUPnPDLNAInformation* _tmp21_;
		GstDiscovererInfo* _tmp22_;
		GstDiscovererInfo* _tmp23_;
		GstTagList* _tmp24_ = NULL;
		GDate* _tmp25_ = NULL;
		gboolean _tmp26_ = FALSE;
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp21_ = dlna_info;
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp22_ = gupnp_dlna_information_get_info (_tmp21_);
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp23_ = _tmp22_;
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp24_ = gst_discoverer_info_get_tags (_tmp23_);
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp26_ = gst_tag_list_get_date (_tmp24_, GST_TAG_DATE, &_tmp25_);
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (date);
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		date = _tmp25_;
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		if (_tmp26_) {
#line 1513 "rygel-media-export-item.c"
			gchar* _tmp27_ = NULL;
			gchar* datestr;
			gint datestr_length1;
			gint _datestr_size_;
			GDate* _tmp28_;
			gchar* _tmp29_;
			gint _tmp29__length1;
			RygelMediaItem* _tmp30_;
			gchar* _tmp31_;
			gint _tmp31__length1;
			gchar* _tmp32_;
#line 240 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp27_ = g_new0 (gchar, 30);
#line 240 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			datestr = _tmp27_;
#line 240 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			datestr_length1 = 30;
#line 240 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_datestr_size_ = datestr_length1;
#line 241 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp28_ = date;
#line 241 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp29_ = datestr;
#line 241 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp29__length1 = datestr_length1;
#line 241 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			g_date_strftime (_tmp29_, _tmp29__length1, "%F", _tmp28_);
#line 242 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp30_ = item;
#line 242 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp31_ = datestr;
#line 242 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp31__length1 = datestr_length1;
#line 242 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp32_ = g_strdup ((const gchar*) _tmp31_);
#line 242 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_g_free0 (_tmp30_->date);
#line 242 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			_tmp30_->date = _tmp32_;
#line 239 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
			datestr = (g_free (datestr), NULL);
#line 1555 "rygel-media-export-item.c"
		}
#line 237 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (date);
#line 1559 "rygel-media-export-item.c"
	}
#line 247 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp33_ = file_info;
#line 247 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp34_ = g_file_info_get_attribute_uint64 (_tmp33_, G_FILE_ATTRIBUTE_TIME_MODIFIED);
#line 247 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	mtime = _tmp34_;
#line 250 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp35_ = item;
#line 250 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp36_ = _tmp35_->date;
#line 250 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp36_ == NULL) {
#line 1573 "rygel-media-export-item.c"
		guint64 _tmp37_;
		GTimeVal _tmp38_ = {0};
		GTimeVal tv;
		RygelMediaItem* _tmp39_;
		gchar* _tmp40_ = NULL;
#line 251 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp37_ = mtime;
#line 251 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp38_.tv_sec = (glong) _tmp37_;
#line 251 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp38_.tv_usec = (glong) 0;
#line 251 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		tv = _tmp38_;
#line 252 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp39_ = item;
#line 252 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp40_ = g_time_val_to_iso8601 (&tv);
#line 252 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (_tmp39_->date);
#line 252 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp39_->date = _tmp40_;
#line 1595 "rygel-media-export-item.c"
	}
#line 255 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp41_ = item;
#line 255 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp42_ = file_info;
#line 255 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp43_ = g_file_info_get_size (_tmp42_);
#line 255 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_item_set_size (_tmp41_, (gint64) _tmp43_);
#line 256 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp44_ = item;
#line 256 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp45_ = mtime;
#line 256 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	((RygelMediaObject*) _tmp44_)->modified = (guint64) ((gint64) _tmp45_);
#line 257 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp46_ = dlna_info;
#line 257 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp47_ = gupnp_dlna_information_get_name (_tmp46_);
#line 257 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp48_ = _tmp47_;
#line 257 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	if (_tmp48_ != NULL) {
#line 1619 "rygel-media-export-item.c"
		RygelMediaItem* _tmp49_;
		GUPnPDLNAInformation* _tmp50_;
		const gchar* _tmp51_;
		const gchar* _tmp52_;
		gchar* _tmp53_;
		RygelMediaItem* _tmp54_;
		GUPnPDLNAInformation* _tmp55_;
		const gchar* _tmp56_;
		const gchar* _tmp57_;
		gchar* _tmp58_;
#line 258 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp49_ = item;
#line 258 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp50_ = dlna_info;
#line 258 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp51_ = gupnp_dlna_information_get_name (_tmp50_);
#line 258 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp52_ = _tmp51_;
#line 258 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp53_ = g_strdup (_tmp52_);
#line 258 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (_tmp49_->dlna_profile);
#line 258 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp49_->dlna_profile = _tmp53_;
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp54_ = item;
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp55_ = dlna_info;
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp56_ = gupnp_dlna_information_get_mime (_tmp55_);
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp57_ = _tmp56_;
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp58_ = g_strdup (_tmp57_);
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (_tmp54_->mime_type);
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp54_->mime_type = _tmp58_;
#line 1658 "rygel-media-export-item.c"
	} else {
		RygelMediaItem* _tmp59_;
		GFileInfo* _tmp60_;
		const gchar* _tmp61_ = NULL;
		gchar* _tmp62_ = NULL;
#line 261 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp59_ = item;
#line 261 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp60_ = file_info;
#line 261 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp61_ = g_file_info_get_content_type (_tmp60_);
#line 261 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp62_ = g_content_type_get_mime_type (_tmp61_);
#line 261 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_g_free0 (_tmp59_->mime_type);
#line 261 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
		_tmp59_->mime_type = _tmp62_;
#line 1676 "rygel-media-export-item.c"
	}
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp63_ = item;
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp64_ = file;
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp65_ = g_file_get_uri (_tmp64_);
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_tmp66_ = _tmp65_;
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	rygel_media_item_add_uri (_tmp63_, _tmp66_);
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_g_free0 (_tmp66_);
#line 224 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-item.vala"
	_g_free0 (title);
#line 1692 "rygel-media-export-item.c"
}



