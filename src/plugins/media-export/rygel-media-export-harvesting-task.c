/* rygel-media-export-harvesting-task.c generated by valac 0.16.1, the Vala compiler
 * generated from rygel-media-export-harvesting-task.vala, do not modify */

/*
 * Copyright (C) 2009 Jens Georg <mail@jensge.org>.
 *
 * This file is part of Rygel.
 *
 * Rygel is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * Rygel is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 */

#include <glib.h>
#include <glib-object.h>
#include <rygel-core.h>
#include <gio/gio.h>
#include <rygel-server.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <libgupnp-dlna/gupnp-dlna-information.h>
#include <glib/gi18n-lib.h>


#define RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK (rygel_media_export_harvesting_task_get_type ())
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTask))
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTaskClass))
#define RYGEL_MEDIA_EXPORT_IS_HARVESTING_TASK(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK))
#define RYGEL_MEDIA_EXPORT_IS_HARVESTING_TASK_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK))
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTaskClass))

typedef struct _RygelMediaExportHarvestingTask RygelMediaExportHarvestingTask;
typedef struct _RygelMediaExportHarvestingTaskClass RygelMediaExportHarvestingTaskClass;
typedef struct _RygelMediaExportHarvestingTaskPrivate RygelMediaExportHarvestingTaskPrivate;

#define RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR (rygel_media_export_metadata_extractor_get_type ())
#define RYGEL_MEDIA_EXPORT_METADATA_EXTRACTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR, RygelMediaExportMetadataExtractor))
#define RYGEL_MEDIA_EXPORT_METADATA_EXTRACTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR, RygelMediaExportMetadataExtractorClass))
#define RYGEL_MEDIA_EXPORT_IS_METADATA_EXTRACTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR))
#define RYGEL_MEDIA_EXPORT_IS_METADATA_EXTRACTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR))
#define RYGEL_MEDIA_EXPORT_METADATA_EXTRACTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR, RygelMediaExportMetadataExtractorClass))

typedef struct _RygelMediaExportMetadataExtractor RygelMediaExportMetadataExtractor;
typedef struct _RygelMediaExportMetadataExtractorClass RygelMediaExportMetadataExtractorClass;

#define RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE (rygel_media_export_media_cache_get_type ())
#define RYGEL_MEDIA_EXPORT_MEDIA_CACHE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE, RygelMediaExportMediaCache))
#define RYGEL_MEDIA_EXPORT_MEDIA_CACHE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE, RygelMediaExportMediaCacheClass))
#define RYGEL_MEDIA_EXPORT_IS_MEDIA_CACHE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE))
#define RYGEL_MEDIA_EXPORT_IS_MEDIA_CACHE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE))
#define RYGEL_MEDIA_EXPORT_MEDIA_CACHE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE, RygelMediaExportMediaCacheClass))

typedef struct _RygelMediaExportMediaCache RygelMediaExportMediaCache;
typedef struct _RygelMediaExportMediaCacheClass RygelMediaExportMediaCacheClass;

#define RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR (rygel_media_export_recursive_file_monitor_get_type ())
#define RYGEL_MEDIA_EXPORT_RECURSIVE_FILE_MONITOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR, RygelMediaExportRecursiveFileMonitor))
#define RYGEL_MEDIA_EXPORT_RECURSIVE_FILE_MONITOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR, RygelMediaExportRecursiveFileMonitorClass))
#define RYGEL_MEDIA_EXPORT_IS_RECURSIVE_FILE_MONITOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR))
#define RYGEL_MEDIA_EXPORT_IS_RECURSIVE_FILE_MONITOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR))
#define RYGEL_MEDIA_EXPORT_RECURSIVE_FILE_MONITOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR, RygelMediaExportRecursiveFileMonitorClass))

typedef struct _RygelMediaExportRecursiveFileMonitor RygelMediaExportRecursiveFileMonitor;
typedef struct _RygelMediaExportRecursiveFileMonitorClass RygelMediaExportRecursiveFileMonitorClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define __g_queue_free__g_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_queue_free__g_object_unref0_ (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _RygelMediaExportHarvestingTaskRunData RygelMediaExportHarvestingTaskRunData;

#define RYGEL_TYPE_NULL_CONTAINER (rygel_null_container_get_type ())
#define RYGEL_NULL_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_TYPE_NULL_CONTAINER, RygelNullContainer))
#define RYGEL_NULL_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_TYPE_NULL_CONTAINER, RygelNullContainerClass))
#define RYGEL_IS_NULL_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_TYPE_NULL_CONTAINER))
#define RYGEL_IS_NULL_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_TYPE_NULL_CONTAINER))
#define RYGEL_NULL_CONTAINER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_TYPE_NULL_CONTAINER, RygelNullContainerClass))

typedef struct _RygelNullContainer RygelNullContainer;
typedef struct _RygelNullContainerClass RygelNullContainerClass;

#define RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER (rygel_media_export_dummy_container_get_type ())
#define RYGEL_MEDIA_EXPORT_DUMMY_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER, RygelMediaExportDummyContainer))
#define RYGEL_MEDIA_EXPORT_DUMMY_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER, RygelMediaExportDummyContainerClass))
#define RYGEL_MEDIA_EXPORT_IS_DUMMY_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER))
#define RYGEL_MEDIA_EXPORT_IS_DUMMY_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER))
#define RYGEL_MEDIA_EXPORT_DUMMY_CONTAINER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER, RygelMediaExportDummyContainerClass))

typedef struct _RygelMediaExportDummyContainer RygelMediaExportDummyContainer;
typedef struct _RygelMediaExportDummyContainerClass RygelMediaExportDummyContainerClass;
typedef struct _RygelNullContainerPrivate RygelNullContainerPrivate;
typedef struct _RygelMediaExportDummyContainerPrivate RygelMediaExportDummyContainerPrivate;
#define __g_list_free__g_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__g_object_unref0_ (var), NULL)))
typedef struct _RygelMediaExportHarvestingTaskEnumerateDirectoryData RygelMediaExportHarvestingTaskEnumerateDirectoryData;

struct _RygelMediaExportHarvestingTask {
	GObject parent_instance;
	RygelMediaExportHarvestingTaskPrivate * priv;
	GFile* origin;
};

struct _RygelMediaExportHarvestingTaskClass {
	GObjectClass parent_class;
};

struct _RygelMediaExportHarvestingTaskPrivate {
	RygelMediaExportMetadataExtractor* extractor;
	RygelMediaExportMediaCache* cache;
	GQueue* containers;
	GeeQueue* files;
	RygelMediaExportRecursiveFileMonitor* monitor;
	gchar* flag;
	RygelMediaContainer* parent;
	GCancellable* _cancellable;
};

struct _RygelMediaExportHarvestingTaskRunData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	RygelMediaExportHarvestingTask* self;
	GFile* _tmp0_;
	GCancellable* _tmp1_;
	GCancellable* _tmp2_;
	GFileInfo* _tmp3_;
	GFileInfo* info;
	GFile* _tmp4_;
	RygelMediaContainer* _tmp5_;
	gboolean _tmp6_;
	GFileType _tmp7_;
	GQueue* _tmp8_;
	RygelMediaContainer* _tmp9_;
	RygelMediaContainer* _tmp10_;
	GError* _error_;
	GError* _tmp11_;
	const gchar* _tmp12_;
	GFile* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	GError* _tmp16_;
	const gchar* _tmp17_;
	GFile* _tmp18_;
	gchar* _tmp19_;
	gchar* _tmp20_;
	GError * _inner_error_;
};

typedef enum  {
	RYGEL_MEDIA_EXPORT_DATABASE_ERROR_IO_ERROR,
	RYGEL_MEDIA_EXPORT_DATABASE_ERROR_SQLITE_ERROR
} RygelMediaExportDatabaseError;
#define RYGEL_MEDIA_EXPORT_DATABASE_ERROR rygel_media_export_database_error_quark ()
struct _RygelNullContainer {
	RygelMediaContainer parent_instance;
	RygelNullContainerPrivate * priv;
};

struct _RygelNullContainerClass {
	RygelMediaContainerClass parent_class;
};

struct _RygelMediaExportDummyContainer {
	RygelNullContainer parent_instance;
	RygelMediaExportDummyContainerPrivate * priv;
	GFile* file;
	GeeList* children;
};

struct _RygelMediaExportDummyContainerClass {
	RygelNullContainerClass parent_class;
};

struct _RygelMediaExportHarvestingTaskEnumerateDirectoryData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	RygelMediaExportHarvestingTask* self;
	GQueue* _tmp0_;
	gconstpointer _tmp1_;
	GFile* _tmp2_;
	GFile* _tmp3_;
	GFile* directory;
	GFile* _tmp4_;
	GCancellable* _tmp5_;
	GCancellable* _tmp6_;
	GFileEnumerator* _tmp7_;
	GFileEnumerator* enumerator;
	GList* list;
	gboolean _tmp8_;
	gboolean _tmp9_;
	GList* _tmp10_;
	gboolean _tmp11_;
	GFileEnumerator* _tmp12_;
	GCancellable* _tmp13_;
	GCancellable* _tmp14_;
	GList* _tmp15_;
	GList* _tmp16_;
	GFileEnumerator* _tmp17_;
	GCancellable* _tmp18_;
	GCancellable* _tmp19_;
	GError* err;
	const gchar* _tmp20_;
	GError* _tmp21_;
	const gchar* _tmp22_;
	GError * _inner_error_;
};


static gpointer rygel_media_export_harvesting_task_parent_class = NULL;
static RygelStateMachineIface* rygel_media_export_harvesting_task_rygel_state_machine_parent_iface = NULL;

GType rygel_media_export_harvesting_task_get_type (void) G_GNUC_CONST;
GType rygel_media_export_metadata_extractor_get_type (void) G_GNUC_CONST;
GType rygel_media_export_media_cache_get_type (void) G_GNUC_CONST;
GType rygel_media_export_recursive_file_monitor_get_type (void) G_GNUC_CONST;
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTaskPrivate))
enum  {
	RYGEL_MEDIA_EXPORT_HARVESTING_TASK_DUMMY_PROPERTY,
	RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CANCELLABLE
};
static void _g_object_unref0_ (gpointer var);
static void _g_queue_free__g_object_unref0_ (GQueue* self);
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_BATCH_SIZE 256
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_HARVESTER_ATTRIBUTES G_FILE_ATTRIBUTE_STANDARD_NAME "," G_FILE_ATTRIBUTE_STANDARD_TYPE "," G_FILE_ATTRIBUTE_TIME_MODIFIED "," G_FILE_ATTRIBUTE_STANDARD_CONTENT_TYPE "," G_FILE_ATTRIBUTE_STANDARD_SIZE
RygelMediaExportHarvestingTask* rygel_media_export_harvesting_task_new (RygelMediaExportMetadataExtractor* extractor, RygelMediaExportRecursiveFileMonitor* monitor, GFile* file, RygelMediaContainer* parent, const gchar* flag);
RygelMediaExportHarvestingTask* rygel_media_export_harvesting_task_construct (GType object_type, RygelMediaExportMetadataExtractor* extractor, RygelMediaExportRecursiveFileMonitor* monitor, GFile* file, RygelMediaContainer* parent, const gchar* flag);
RygelMediaExportMediaCache* rygel_media_export_media_cache_get_default (GError** error);
static void rygel_media_export_harvesting_task_on_extracted_cb (RygelMediaExportHarvestingTask* self, GFile* file, GUPnPDLNAInformation* dlna, GFileInfo* file_info);
static void _rygel_media_export_harvesting_task_on_extracted_cb_rygel_media_export_metadata_extractor_extraction_done (RygelMediaExportMetadataExtractor* _sender, GFile* file, GUPnPDLNAInformation* dlna, GFileInfo* file_info, gpointer self);
static void rygel_media_export_harvesting_task_on_extractor_error_cb (RygelMediaExportHarvestingTask* self, GFile* file, GError* _error_);
static void _rygel_media_export_harvesting_task_on_extractor_error_cb_rygel_media_export_metadata_extractor_error (RygelMediaExportMetadataExtractor* _sender, GFile* file, GError* err, gpointer self);
void rygel_media_export_harvesting_task_cancel (RygelMediaExportHarvestingTask* self);
static void rygel_media_export_harvesting_task_real_run_data_free (gpointer _data);
static void rygel_media_export_harvesting_task_real_run (RygelStateMachine* base, GAsyncReadyCallback _callback_, gpointer _user_data_);
static gboolean rygel_media_export_harvesting_task_real_run_co (RygelMediaExportHarvestingTaskRunData* _data_);
static void rygel_media_export_harvesting_task_run_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static gboolean rygel_media_export_harvesting_task_process_file (RygelMediaExportHarvestingTask* self, GFile* file, GFileInfo* info, RygelMediaContainer* parent);
static gboolean rygel_media_export_harvesting_task_on_idle (RygelMediaExportHarvestingTask* self);
static gboolean rygel_media_export_harvesting_task_push_if_changed_or_unknown (RygelMediaExportHarvestingTask* self, GFile* file, GFileInfo* info);
GQuark rygel_media_export_database_error_quark (void);
gboolean rygel_media_export_media_cache_exists (RygelMediaExportMediaCache* self, GFile* file, gint64* timestamp, gint64* size, GError** error);
void rygel_media_export_recursive_file_monitor_add (RygelMediaExportRecursiveFileMonitor* self, GFile* file, GAsyncReadyCallback _callback_, gpointer _user_data_);
void rygel_media_export_recursive_file_monitor_add_finish (RygelMediaExportRecursiveFileMonitor* self, GAsyncResult* _res_);
RygelMediaExportDummyContainer* rygel_media_export_dummy_container_new (GFile* file, RygelMediaContainer* parent);
RygelMediaExportDummyContainer* rygel_media_export_dummy_container_construct (GType object_type, GFile* file, RygelMediaContainer* parent);
GType rygel_null_container_get_type (void) G_GNUC_CONST;
GType rygel_media_export_dummy_container_get_type (void) G_GNUC_CONST;
void rygel_media_export_media_cache_save_container (RygelMediaExportMediaCache* self, RygelMediaContainer* container, GError** error);
static gboolean rygel_media_export_harvesting_task_process_children (RygelMediaExportHarvestingTask* self, GList* list);
void rygel_media_export_dummy_container_seen (RygelMediaExportDummyContainer* self, GFile* file);
static void rygel_media_export_harvesting_task_enumerate_directory_data_free (gpointer _data);
static void rygel_media_export_harvesting_task_enumerate_directory (RygelMediaExportHarvestingTask* self, GAsyncReadyCallback _callback_, gpointer _user_data_);
static void rygel_media_export_harvesting_task_enumerate_directory_finish (RygelMediaExportHarvestingTask* self, GAsyncResult* _res_);
static gboolean rygel_media_export_harvesting_task_enumerate_directory_co (RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_);
static void rygel_media_export_harvesting_task_enumerate_directory_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static void _g_list_free__g_object_unref0_ (GList* self);
static void rygel_media_export_harvesting_task_cleanup_database (RygelMediaExportHarvestingTask* self);
static void rygel_media_export_harvesting_task_do_update (RygelMediaExportHarvestingTask* self);
void rygel_media_export_media_cache_remove_by_id (RygelMediaExportMediaCache* self, const gchar* id, GError** error);
void rygel_media_export_metadata_extractor_extract (RygelMediaExportMetadataExtractor* self, GFile* file);
void rygel_media_export_media_cache_flag_object (RygelMediaExportMediaCache* self, GFile* file, const gchar* flag, GError** error);
RygelMediaItem* rygel_media_export_item_factory_create_simple (RygelMediaContainer* parent, GFile* file, GFileInfo* info);
RygelMediaItem* rygel_media_export_item_factory_create_from_info (RygelMediaContainer* parent, GFile* file, GUPnPDLNAInformation* dlna_info, GFileInfo* file_info);
void rygel_media_export_media_cache_save_item (RygelMediaExportMediaCache* self, RygelMediaItem* item, GError** error);
gint rygel_media_export_media_cache_get_child_count (RygelMediaExportMediaCache* self, const gchar* container_id, GError** error);
static void rygel_media_export_harvesting_task_finalize (GObject* obj);
static void _vala_rygel_media_export_harvesting_task_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_rygel_media_export_harvesting_task_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);


static void _g_object_unref0_ (gpointer var) {
#line 29 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 287 "rygel-media-export-harvesting-task.c"
}


static void _g_queue_free__g_object_unref0_ (GQueue* self) {
#line 29 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_queue_foreach (self, (GFunc) _g_object_unref0_, NULL);
#line 29 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_queue_free (self);
#line 296 "rygel-media-export-harvesting-task.c"
}


static gpointer _g_object_ref0 (gpointer self) {
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return self ? g_object_ref (self) : NULL;
#line 303 "rygel-media-export-harvesting-task.c"
}


static void _rygel_media_export_harvesting_task_on_extracted_cb_rygel_media_export_metadata_extractor_extraction_done (RygelMediaExportMetadataExtractor* _sender, GFile* file, GUPnPDLNAInformation* dlna, GFileInfo* file_info, gpointer self) {
#line 63 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_on_extracted_cb (self, file, dlna, file_info);
#line 310 "rygel-media-export-harvesting-task.c"
}


static void _rygel_media_export_harvesting_task_on_extractor_error_cb_rygel_media_export_metadata_extractor_error (RygelMediaExportMetadataExtractor* _sender, GFile* file, GError* err, gpointer self) {
#line 64 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_on_extractor_error_cb (self, file, err);
#line 317 "rygel-media-export-harvesting-task.c"
}


RygelMediaExportHarvestingTask* rygel_media_export_harvesting_task_construct (GType object_type, RygelMediaExportMetadataExtractor* extractor, RygelMediaExportRecursiveFileMonitor* monitor, GFile* file, RygelMediaContainer* parent, const gchar* flag) {
	RygelMediaExportHarvestingTask * self = NULL;
	RygelMediaExportMetadataExtractor* _tmp0_;
	RygelMediaExportMetadataExtractor* _tmp1_;
	GFile* _tmp2_;
	GFile* _tmp3_;
	RygelMediaContainer* _tmp4_;
	RygelMediaContainer* _tmp5_;
	RygelMediaExportMetadataExtractor* _tmp8_;
	RygelMediaExportMetadataExtractor* _tmp9_;
	GeeLinkedList* _tmp10_;
	GQueue* _tmp11_;
	RygelMediaExportRecursiveFileMonitor* _tmp12_;
	RygelMediaExportRecursiveFileMonitor* _tmp13_;
	const gchar* _tmp14_;
	gchar* _tmp15_;
	GError * _inner_error_ = NULL;
#line 45 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (extractor != NULL, NULL);
#line 45 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (monitor != NULL, NULL);
#line 45 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 45 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (parent != NULL, NULL);
#line 45 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (RygelMediaExportHarvestingTask*) g_object_new (object_type, NULL);
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = extractor;
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->extractor);
#line 50 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->extractor = _tmp1_;
#line 51 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = file;
#line 51 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 51 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->origin);
#line 51 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->origin = _tmp3_;
#line 52 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp4_ = parent;
#line 52 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp5_ = _g_object_ref0 (_tmp4_);
#line 52 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->parent);
#line 52 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->parent = _tmp5_;
#line 372 "rygel-media-export-harvesting-task.c"
	{
		RygelMediaExportMediaCache* _tmp6_ = NULL;
		RygelMediaExportMediaCache* _tmp7_;
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp6_ = rygel_media_export_media_cache_get_default (&_inner_error_);
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = _tmp6_;
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_inner_error_ != NULL) {
#line 382 "rygel-media-export-harvesting-task.c"
			goto __catch50_g_error;
		}
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (self->priv->cache);
#line 55 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		self->priv->cache = _tmp7_;
#line 389 "rygel-media-export-harvesting-task.c"
	}
	goto __finally50;
	__catch50_g_error:
	{
		GError* _error_ = NULL;
#line 54 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_error_ = _inner_error_;
#line 54 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_inner_error_ = NULL;
#line 60 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_assert_not_reached ();
#line 54 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_error_);
#line 403 "rygel-media-export-harvesting-task.c"
	}
	__finally50:
#line 54 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_inner_error_ != NULL) {
#line 54 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 54 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_inner_error_);
#line 54 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return NULL;
#line 414 "rygel-media-export-harvesting-task.c"
	}
#line 63 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp8_ = self->priv->extractor;
#line 63 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_signal_connect_object (_tmp8_, "extraction-done", (GCallback) _rygel_media_export_harvesting_task_on_extracted_cb_rygel_media_export_metadata_extractor_extraction_done, self, 0);
#line 64 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp9_ = self->priv->extractor;
#line 64 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_signal_connect_object (_tmp9_, "error", (GCallback) _rygel_media_export_harvesting_task_on_extractor_error_cb_rygel_media_export_metadata_extractor_error, self, 0);
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp10_ = gee_linked_list_new (G_TYPE_FILE, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->files);
#line 66 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->files = (GeeQueue*) _tmp10_;
#line 67 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp11_ = g_queue_new ();
#line 67 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	__g_queue_free__g_object_unref0_0 (self->priv->containers);
#line 67 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->containers = _tmp11_;
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp12_ = monitor;
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp13_ = _g_object_ref0 (_tmp12_);
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->monitor);
#line 68 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->monitor = _tmp13_;
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp14_ = flag;
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp15_ = g_strdup (_tmp14_);
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_free0 (self->priv->flag);
#line 69 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->flag = _tmp15_;
#line 45 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return self;
#line 454 "rygel-media-export-harvesting-task.c"
}


RygelMediaExportHarvestingTask* rygel_media_export_harvesting_task_new (RygelMediaExportMetadataExtractor* extractor, RygelMediaExportRecursiveFileMonitor* monitor, GFile* file, RygelMediaContainer* parent, const gchar* flag) {
#line 45 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return rygel_media_export_harvesting_task_construct (RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, extractor, monitor, file, parent, flag);
#line 461 "rygel-media-export-harvesting-task.c"
}


void rygel_media_export_harvesting_task_cancel (RygelMediaExportHarvestingTask* self) {
	GCancellable* _tmp0_;
	GCancellable* _tmp1_;
	GCancellable* _tmp2_;
	GCancellable* _tmp3_;
#line 72 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 75 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = g_cancellable_new ();
#line 75 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _tmp0_;
#line 75 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_state_machine_set_cancellable ((RygelStateMachine*) self, _tmp1_);
#line 75 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_tmp1_);
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) self);
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = _tmp2_;
#line 76 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_cancellable_cancel (_tmp3_);
#line 486 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_real_run_data_free (gpointer _data) {
	RygelMediaExportHarvestingTaskRunData* _data_;
	_data_ = _data;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_data_->self);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_slice_free (RygelMediaExportHarvestingTaskRunData, _data_);
#line 497 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_real_run (RygelStateMachine* base, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	RygelMediaExportHarvestingTask * self;
	RygelMediaExportHarvestingTaskRunData* _data_;
	RygelMediaExportHarvestingTask* _tmp0_;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (RygelMediaExportHarvestingTask*) base;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = g_slice_new0 (RygelMediaExportHarvestingTaskRunData);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_async_result = g_simple_async_result_new (G_OBJECT (self), _callback_, _user_data_, rygel_media_export_harvesting_task_real_run);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, rygel_media_export_harvesting_task_real_run_data_free);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->self = _tmp0_;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_real_run_co (_data_);
#line 519 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_real_run_finish (RygelStateMachine* base, GAsyncResult* _res_) {
	RygelMediaExportHarvestingTaskRunData* _data_;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
#line 527 "rygel-media-export-harvesting-task.c"
}


/**
     * Extract all metainformation from a given file.
     *
     * What action will be taken depends on the arguments
     * * file is a simple file. Then only information of this
     *   file will be extracted
     * * file is a directory and recursive is false. The children
     *   of the directory (if not directories themselves) will be
     *   enqueued for extraction
     * * file is a directory and recursive is true. ++ All ++ children
     *   of the directory will be enqueued for extraction, even directories
     *
     * No matter how many children are contained within file's hierarchy,
     * only one event is sent when all the children are done.
     */
static void rygel_media_export_harvesting_task_run_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	RygelMediaExportHarvestingTaskRunData* _data_;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = _user_data_;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_source_object_ = source_object;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_res_ = _res_;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_real_run_co (_data_);
#line 556 "rygel-media-export-harvesting-task.c"
}


static gboolean rygel_media_export_harvesting_task_real_run_co (RygelMediaExportHarvestingTaskRunData* _data_) {
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	switch (_data_->_state_) {
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 0:
#line 565 "rygel-media-export-harvesting-task.c"
		goto _state_0;
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 1:
#line 569 "rygel-media-export-harvesting-task.c"
		goto _state_1;
		default:
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_assert_not_reached ();
#line 574 "rygel-media-export-harvesting-task.c"
	}
	_state_0:
	{
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp0_ = _data_->self->origin;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp1_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) _data_->self);
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp2_ = _data_->_tmp1_;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_state_ = 1;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_file_query_info_async (_data_->_tmp0_, RYGEL_MEDIA_EXPORT_HARVESTING_TASK_HARVESTER_ATTRIBUTES, G_FILE_QUERY_INFO_NONE, G_PRIORITY_DEFAULT, _data_->_tmp2_, rygel_media_export_harvesting_task_run_ready, _data_);
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 590 "rygel-media-export-harvesting-task.c"
		_state_1:
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp3_ = NULL;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp3_ = g_file_query_info_finish (_data_->_tmp0_, _data_->_res_, &_data_->_inner_error_);
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->info = _data_->_tmp3_;
#line 96 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_data_->_inner_error_ != NULL) {
#line 600 "rygel-media-export-harvesting-task.c"
			goto __catch51_g_error;
		}
#line 102 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp4_ = _data_->self->origin;
#line 102 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp5_ = _data_->self->priv->parent;
#line 102 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp6_ = FALSE;
#line 102 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp6_ = rygel_media_export_harvesting_task_process_file (_data_->self, _data_->_tmp4_, _data_->info, _data_->_tmp5_);
#line 102 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_data_->_tmp6_) {
#line 103 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp7_ = 0;
#line 103 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp7_ = g_file_info_get_file_type (_data_->info);
#line 103 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_data_->_tmp7_ != G_FILE_TYPE_DIRECTORY) {
#line 104 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp8_ = _data_->self->priv->containers;
#line 104 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp9_ = _data_->self->priv->parent;
#line 104 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp10_ = _g_object_ref0 (_data_->_tmp9_);
#line 104 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				g_queue_push_tail (_data_->_tmp8_, _data_->_tmp10_);
#line 627 "rygel-media-export-harvesting-task.c"
			}
#line 106 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_media_export_harvesting_task_on_idle (_data_->self);
#line 631 "rygel-media-export-harvesting-task.c"
		} else {
#line 108 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_signal_emit_by_name ((RygelStateMachine*) _data_->self, "completed");
#line 635 "rygel-media-export-harvesting-task.c"
		}
#line 95 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_data_->info);
#line 639 "rygel-media-export-harvesting-task.c"
	}
	goto __finally51;
	__catch51_g_error:
	{
#line 95 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_error_ = _data_->_inner_error_;
#line 95 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_inner_error_ = NULL;
#line 111 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp11_ = _data_->_error_;
#line 111 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (!g_error_matches (_data_->_tmp11_, G_IO_ERROR, G_IO_ERROR_CANCELLED)) {
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp12_ = NULL;
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp12_ = _ ("Failed to harvest file %s: %s");
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp13_ = _data_->self->origin;
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp14_ = NULL;
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp14_ = g_file_get_uri (_data_->_tmp13_);
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp15_ = _data_->_tmp14_;
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp16_ = _data_->_error_;
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp17_ = _data_->_tmp16_->message;
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_warning (_data_->_tmp12_, _data_->_tmp15_, _data_->_tmp17_);
#line 112 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_free0 (_data_->_tmp15_);
#line 672 "rygel-media-export-harvesting-task.c"
		} else {
#line 116 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp18_ = _data_->self->origin;
#line 116 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp19_ = NULL;
#line 116 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp19_ = g_file_get_uri (_data_->_tmp18_);
#line 116 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp20_ = _data_->_tmp19_;
#line 116 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_debug ("rygel-media-export-harvesting-task.vala:116: Harvesting of uri %s was " \
"cancelled", _data_->_tmp20_);
#line 116 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_free0 (_data_->_tmp20_);
#line 686 "rygel-media-export-harvesting-task.c"
		}
#line 119 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_signal_emit_by_name ((RygelStateMachine*) _data_->self, "completed");
#line 95 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_data_->_error_);
#line 692 "rygel-media-export-harvesting-task.c"
	}
	__finally51:
#line 95 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_data_->_inner_error_ != NULL) {
#line 95 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 95 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_data_->_inner_error_);
#line 95 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 703 "rygel-media-export-harvesting-task.c"
	}
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_data_->_state_ == 0) {
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_simple_async_result_complete_in_idle (_data_->_async_result);
#line 709 "rygel-media-export-harvesting-task.c"
	} else {
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_simple_async_result_complete (_data_->_async_result);
#line 713 "rygel-media-export-harvesting-task.c"
	}
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_object_unref (_data_->_async_result);
#line 94 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return FALSE;
#line 719 "rygel-media-export-harvesting-task.c"
}


/**
     * Add a file to the meta-data extraction queue.
     *
     * The file will only be added to the queue if one of the following
     * conditions is met:
     *   - The file is not in the cache
     *   - The current mtime of the file is larger than the cached
     *   - The size has changed
     * @param file to check
     * @param info FileInfo of the file to check
     * @return true, if the file has been queued, false otherwise.
     */
static gboolean rygel_media_export_harvesting_task_push_if_changed_or_unknown (RygelMediaExportHarvestingTask* self, GFile* file, GFileInfo* info) {
	gboolean result = FALSE;
	gint64 timestamp = 0LL;
	gint64 size = 0LL;
	GError * _inner_error_ = NULL;
#line 135 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 135 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (file != NULL, FALSE);
#line 135 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (info != NULL, FALSE);
#line 746 "rygel-media-export-harvesting-task.c"
	{
		RygelMediaExportMediaCache* _tmp0_;
		GFile* _tmp1_;
		gint64 _tmp2_ = 0LL;
		gint64 _tmp3_ = 0LL;
		gboolean _tmp4_ = FALSE;
		gboolean _tmp5_;
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = self->priv->cache;
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp1_ = file;
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp4_ = rygel_media_export_media_cache_exists (_tmp0_, _tmp1_, &_tmp2_, &_tmp3_, &_inner_error_);
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		timestamp = _tmp2_;
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		size = _tmp3_;
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = _tmp4_;
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_inner_error_ != NULL) {
#line 768 "rygel-media-export-harvesting-task.c"
			goto __catch52_g_error;
		}
#line 140 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp5_) {
#line 773 "rygel-media-export-harvesting-task.c"
			GFileInfo* _tmp6_;
			guint64 _tmp7_ = 0ULL;
			gint64 mtime;
			gboolean _tmp8_ = FALSE;
			gint64 _tmp9_;
			gint64 _tmp10_;
			gboolean _tmp14_;
#line 141 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp6_ = info;
#line 141 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp7_ = g_file_info_get_attribute_uint64 (_tmp6_, G_FILE_ATTRIBUTE_TIME_MODIFIED);
#line 141 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			mtime = (gint64) _tmp7_;
#line 144 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp9_ = mtime;
#line 144 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp10_ = timestamp;
#line 144 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_tmp9_ > _tmp10_) {
#line 144 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp8_ = TRUE;
#line 795 "rygel-media-export-harvesting-task.c"
			} else {
				GFileInfo* _tmp11_;
				gint64 _tmp12_ = 0LL;
				gint64 _tmp13_;
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp11_ = info;
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp12_ = g_file_info_get_size (_tmp11_);
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp13_ = size;
#line 145 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp8_ = _tmp12_ != _tmp13_;
#line 808 "rygel-media-export-harvesting-task.c"
			}
#line 144 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp14_ = _tmp8_;
#line 144 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_tmp14_) {
#line 814 "rygel-media-export-harvesting-task.c"
				GeeQueue* _tmp15_;
				GFile* _tmp16_;
#line 146 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp15_ = self->priv->files;
#line 146 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp16_ = file;
#line 146 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				gee_queue_offer (_tmp15_, _tmp16_);
#line 148 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				result = TRUE;
#line 148 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				return result;
#line 827 "rygel-media-export-harvesting-task.c"
			}
		} else {
			GeeQueue* _tmp17_;
			GFile* _tmp18_;
#line 151 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp17_ = self->priv->files;
#line 151 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp18_ = file;
#line 151 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			gee_queue_offer (_tmp17_, _tmp18_);
#line 153 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			result = TRUE;
#line 153 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return result;
#line 842 "rygel-media-export-harvesting-task.c"
		}
	}
	goto __finally52;
	__catch52_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp19_ = NULL;
		GError* _tmp20_;
		const gchar* _tmp21_;
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_error_ = _inner_error_;
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_inner_error_ = NULL;
#line 156 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp19_ = _ ("Failed to query database: %s");
#line 156 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp20_ = _error_;
#line 156 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp21_ = _tmp20_->message;
#line 156 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_warning (_tmp19_, _tmp21_);
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_error_);
#line 866 "rygel-media-export-harvesting-task.c"
	}
	__finally52:
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_inner_error_ != NULL) {
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_inner_error_);
#line 139 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 877 "rygel-media-export-harvesting-task.c"
	}
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	result = FALSE;
#line 159 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return result;
#line 883 "rygel-media-export-harvesting-task.c"
}


static gchar string_get (const gchar* self, glong index) {
	gchar result = '\0';
	glong _tmp0_;
	gchar _tmp1_;
#line 1159 "/usr/share/vala-0.16/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, '\0');
#line 1160 "/usr/share/vala-0.16/vapi/glib-2.0.vapi"
	_tmp0_ = index;
#line 1160 "/usr/share/vala-0.16/vapi/glib-2.0.vapi"
	_tmp1_ = ((gchar*) self)[_tmp0_];
#line 1160 "/usr/share/vala-0.16/vapi/glib-2.0.vapi"
	result = _tmp1_;
#line 1160 "/usr/share/vala-0.16/vapi/glib-2.0.vapi"
	return result;
#line 901 "rygel-media-export-harvesting-task.c"
}


static gboolean rygel_media_export_harvesting_task_process_file (RygelMediaExportHarvestingTask* self, GFile* file, GFileInfo* info, RygelMediaContainer* parent) {
	gboolean result = FALSE;
	GFileInfo* _tmp0_;
	const gchar* _tmp1_ = NULL;
	gchar _tmp2_ = '\0';
	GFileInfo* _tmp3_;
	GFileType _tmp4_ = 0;
	GError * _inner_error_ = NULL;
#line 162 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 162 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (file != NULL, FALSE);
#line 162 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (info != NULL, FALSE);
#line 162 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (parent != NULL, FALSE);
#line 165 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = info;
#line 165 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = g_file_info_get_name (_tmp0_);
#line 165 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = string_get (_tmp1_, (glong) 0);
#line 165 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp2_ == '.') {
#line 166 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = FALSE;
#line 166 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 933 "rygel-media-export-harvesting-task.c"
	}
#line 169 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = info;
#line 169 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp4_ = g_file_info_get_file_type (_tmp3_);
#line 169 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp4_ == G_FILE_TYPE_DIRECTORY) {
#line 941 "rygel-media-export-harvesting-task.c"
		RygelMediaExportRecursiveFileMonitor* _tmp5_;
		GFile* _tmp6_;
		GFile* _tmp7_;
		RygelMediaContainer* _tmp8_;
		RygelMediaExportDummyContainer* _tmp9_;
		RygelMediaExportDummyContainer* container;
		GQueue* _tmp10_;
		RygelMediaExportDummyContainer* _tmp11_;
		RygelMediaContainer* _tmp12_;
#line 171 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = self->priv->monitor;
#line 171 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp6_ = file;
#line 171 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		rygel_media_export_recursive_file_monitor_add (_tmp5_, _tmp6_, NULL, NULL);
#line 173 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = file;
#line 173 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp8_ = parent;
#line 173 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp9_ = rygel_media_export_dummy_container_new (_tmp7_, _tmp8_);
#line 173 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		container = _tmp9_;
#line 174 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp10_ = self->priv->containers;
#line 174 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp11_ = container;
#line 174 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp12_ = _g_object_ref0 ((RygelMediaContainer*) _tmp11_);
#line 174 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_queue_push_tail (_tmp10_, _tmp12_);
#line 973 "rygel-media-export-harvesting-task.c"
		{
			RygelMediaExportMediaCache* _tmp13_;
			RygelMediaExportDummyContainer* _tmp14_;
#line 176 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp13_ = self->priv->cache;
#line 176 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp14_ = container;
#line 176 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_media_export_media_cache_save_container (_tmp13_, (RygelMediaContainer*) _tmp14_, &_inner_error_);
#line 176 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_inner_error_ != NULL) {
#line 985 "rygel-media-export-harvesting-task.c"
				goto __catch53_g_error;
			}
		}
		goto __finally53;
		__catch53_g_error:
		{
			GError* err = NULL;
			const gchar* _tmp15_ = NULL;
			GError* _tmp16_;
			const gchar* _tmp17_;
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			err = _inner_error_;
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_inner_error_ = NULL;
#line 178 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp15_ = _ ("Failed to update database: %s");
#line 178 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp16_ = err;
#line 178 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp17_ = _tmp16_->message;
#line 178 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_warning (_tmp15_, _tmp17_);
#line 180 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			result = FALSE;
#line 180 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_error_free0 (err);
#line 180 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (container);
#line 180 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return result;
#line 1016 "rygel-media-export-harvesting-task.c"
		}
		__finally53:
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_inner_error_ != NULL) {
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (container);
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_clear_error (&_inner_error_);
#line 175 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return FALSE;
#line 1029 "rygel-media-export-harvesting-task.c"
		}
#line 183 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = TRUE;
#line 183 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (container);
#line 183 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 1037 "rygel-media-export-harvesting-task.c"
	} else {
		gboolean _tmp18_ = FALSE;
		gboolean _tmp19_ = FALSE;
		gboolean _tmp20_ = FALSE;
		GFileInfo* _tmp21_;
		const gchar* _tmp22_ = NULL;
		gboolean _tmp23_ = FALSE;
		gboolean _tmp27_;
		gboolean _tmp31_;
		gboolean _tmp34_;
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp21_ = info;
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp22_ = g_file_info_get_content_type (_tmp21_);
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp23_ = g_str_has_prefix (_tmp22_, "image/");
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp23_) {
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp20_ = TRUE;
#line 1058 "rygel-media-export-harvesting-task.c"
		} else {
			GFileInfo* _tmp24_;
			const gchar* _tmp25_ = NULL;
			gboolean _tmp26_ = FALSE;
#line 188 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp24_ = info;
#line 188 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp25_ = g_file_info_get_content_type (_tmp24_);
#line 188 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp26_ = g_str_has_prefix (_tmp25_, "video/");
#line 188 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp20_ = _tmp26_;
#line 1071 "rygel-media-export-harvesting-task.c"
		}
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp27_ = _tmp20_;
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp27_) {
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp19_ = TRUE;
#line 1079 "rygel-media-export-harvesting-task.c"
		} else {
			GFileInfo* _tmp28_;
			const gchar* _tmp29_ = NULL;
			gboolean _tmp30_ = FALSE;
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp28_ = info;
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp29_ = g_file_info_get_content_type (_tmp28_);
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp30_ = g_str_has_prefix (_tmp29_, "audio/");
#line 189 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp19_ = _tmp30_;
#line 1092 "rygel-media-export-harvesting-task.c"
		}
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp31_ = _tmp19_;
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp31_) {
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp18_ = TRUE;
#line 1100 "rygel-media-export-harvesting-task.c"
		} else {
			GFileInfo* _tmp32_;
			const gchar* _tmp33_ = NULL;
#line 190 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp32_ = info;
#line 190 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp33_ = g_file_info_get_content_type (_tmp32_);
#line 190 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp18_ = g_strcmp0 (_tmp33_, "application/ogg") == 0;
#line 1110 "rygel-media-export-harvesting-task.c"
		}
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp34_ = _tmp18_;
#line 187 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp34_) {
#line 1116 "rygel-media-export-harvesting-task.c"
			GFile* _tmp35_;
			GFileInfo* _tmp36_;
			gboolean _tmp37_ = FALSE;
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp35_ = file;
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp36_ = info;
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp37_ = rygel_media_export_harvesting_task_push_if_changed_or_unknown (self, _tmp35_, _tmp36_);
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			result = _tmp37_;
#line 191 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return result;
#line 1130 "rygel-media-export-harvesting-task.c"
		}
#line 194 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = FALSE;
#line 194 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 1136 "rygel-media-export-harvesting-task.c"
	}
}


static gboolean rygel_media_export_harvesting_task_process_children (RygelMediaExportHarvestingTask* self, GList* list) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	GList* _tmp1_;
	gboolean _tmp5_;
	GQueue* _tmp6_;
	gconstpointer _tmp7_ = NULL;
	RygelMediaExportDummyContainer* _tmp8_;
	RygelMediaExportDummyContainer* container;
	GList* _tmp9_;
#line 198 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = list;
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp1_ == NULL) {
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = TRUE;
#line 1159 "rygel-media-export-harvesting-task.c"
	} else {
		GCancellable* _tmp2_;
		GCancellable* _tmp3_;
		gboolean _tmp4_ = FALSE;
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp2_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) self);
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp3_ = _tmp2_;
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp4_ = g_cancellable_is_cancelled (_tmp3_);
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = _tmp4_;
#line 1172 "rygel-media-export-harvesting-task.c"
	}
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp5_ = _tmp0_;
#line 199 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp5_) {
#line 200 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = FALSE;
#line 200 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 1182 "rygel-media-export-harvesting-task.c"
	}
#line 203 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp6_ = self->priv->containers;
#line 203 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp7_ = g_queue_peek_head (_tmp6_);
#line 203 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp8_ = _g_object_ref0 (RYGEL_MEDIA_EXPORT_IS_DUMMY_CONTAINER ((RygelMediaContainer*) _tmp7_) ? ((RygelMediaExportDummyContainer*) ((RygelMediaContainer*) _tmp7_)) : NULL);
#line 203 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	container = _tmp8_;
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp9_ = list;
#line 1194 "rygel-media-export-harvesting-task.c"
	{
		GList* info_collection = NULL;
		GList* info_it = NULL;
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		info_collection = _tmp9_;
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		for (info_it = info_collection; info_it != NULL; info_it = info_it->next) {
#line 1202 "rygel-media-export-harvesting-task.c"
			GFileInfo* _tmp10_;
			GFileInfo* info = NULL;
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp10_ = _g_object_ref0 ((GFileInfo*) info_it->data);
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			info = _tmp10_;
#line 1209 "rygel-media-export-harvesting-task.c"
			{
				RygelMediaExportDummyContainer* _tmp11_;
				GFile* _tmp12_;
				GFileInfo* _tmp13_;
				const gchar* _tmp14_ = NULL;
				GFile* _tmp15_ = NULL;
				GFile* file;
				RygelMediaExportDummyContainer* _tmp16_;
				GFile* _tmp17_;
				GFile* _tmp18_;
				GFileInfo* _tmp19_;
				RygelMediaExportDummyContainer* _tmp20_;
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp11_ = container;
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp12_ = _tmp11_->file;
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp13_ = info;
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp14_ = g_file_info_get_name (_tmp13_);
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp15_ = g_file_get_child (_tmp12_, _tmp14_);
#line 206 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				file = _tmp15_;
#line 208 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp16_ = container;
#line 208 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp17_ = file;
#line 208 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				rygel_media_export_dummy_container_seen (_tmp16_, _tmp17_);
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp18_ = file;
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp19_ = info;
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp20_ = container;
#line 209 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				rygel_media_export_harvesting_task_process_file (self, _tmp18_, _tmp19_, (RygelMediaContainer*) _tmp20_);
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_g_object_unref0 (file);
#line 205 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_g_object_unref0 (info);
#line 1252 "rygel-media-export-harvesting-task.c"
			}
		}
	}
#line 212 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	result = TRUE;
#line 212 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (container);
#line 212 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return result;
#line 1262 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_enumerate_directory_data_free (gpointer _data) {
	RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_;
	_data_ = _data;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_data_->self);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_slice_free (RygelMediaExportHarvestingTaskEnumerateDirectoryData, _data_);
#line 1273 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_enumerate_directory (RygelMediaExportHarvestingTask* self, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_;
	RygelMediaExportHarvestingTask* _tmp0_;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = g_slice_new0 (RygelMediaExportHarvestingTaskEnumerateDirectoryData);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_async_result = g_simple_async_result_new (G_OBJECT (self), _callback_, _user_data_, rygel_media_export_harvesting_task_enumerate_directory);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, rygel_media_export_harvesting_task_enumerate_directory_data_free);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->self = _tmp0_;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_enumerate_directory_co (_data_);
#line 1292 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_enumerate_directory_finish (RygelMediaExportHarvestingTask* self, GAsyncResult* _res_) {
	RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
#line 1300 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_enumerate_directory_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = _user_data_;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_source_object_ = source_object;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_res_ = _res_;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_enumerate_directory_co (_data_);
#line 1314 "rygel-media-export-harvesting-task.c"
}


static void _g_list_free__g_object_unref0_ (GList* self) {
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_list_foreach (self, (GFunc) _g_object_unref0_, NULL);
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_list_free (self);
#line 1323 "rygel-media-export-harvesting-task.c"
}


static gboolean rygel_media_export_harvesting_task_enumerate_directory_co (RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_) {
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	switch (_data_->_state_) {
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 0:
#line 1332 "rygel-media-export-harvesting-task.c"
		goto _state_0;
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 1:
#line 1336 "rygel-media-export-harvesting-task.c"
		goto _state_1;
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 2:
#line 1340 "rygel-media-export-harvesting-task.c"
		goto _state_2;
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 3:
#line 1344 "rygel-media-export-harvesting-task.c"
		goto _state_3;
		default:
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_assert_not_reached ();
#line 1349 "rygel-media-export-harvesting-task.c"
	}
	_state_0:
#line 216 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp0_ = _data_->self->priv->containers;
#line 216 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp1_ = NULL;
#line 216 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp1_ = g_queue_peek_head (_data_->_tmp0_);
#line 216 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp2_ = (RYGEL_MEDIA_EXPORT_IS_DUMMY_CONTAINER ((RygelMediaContainer*) _data_->_tmp1_) ? ((RygelMediaExportDummyContainer*) ((RygelMediaContainer*) _data_->_tmp1_)) : NULL)->file;
#line 216 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp3_ = _g_object_ref0 (_data_->_tmp2_);
#line 216 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->directory = _data_->_tmp3_;
#line 1364 "rygel-media-export-harvesting-task.c"
	{
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp4_ = _data_->directory;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp5_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) _data_->self);
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp6_ = _data_->_tmp5_;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_state_ = 1;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_file_enumerate_children_async (_data_->_tmp4_, RYGEL_MEDIA_EXPORT_HARVESTING_TASK_HARVESTER_ATTRIBUTES, G_FILE_QUERY_INFO_NONE, G_PRIORITY_DEFAULT, _data_->_tmp6_, rygel_media_export_harvesting_task_enumerate_directory_ready, _data_);
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 1378 "rygel-media-export-harvesting-task.c"
		_state_1:
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp7_ = NULL;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp7_ = g_file_enumerate_children_finish (_data_->_tmp4_, _data_->_res_, &_data_->_inner_error_);
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->enumerator = _data_->_tmp7_;
#line 218 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_data_->_inner_error_ != NULL) {
#line 1388 "rygel-media-export-harvesting-task.c"
			goto __catch54_g_error;
		}
#line 224 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->list = NULL;
#line 1393 "rygel-media-export-harvesting-task.c"
		{
#line 225 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp8_ = TRUE;
#line 225 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			while (TRUE) {
#line 225 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp9_ = _data_->_tmp8_;
#line 225 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (!_data_->_tmp9_) {
#line 229 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_data_->_tmp10_ = _data_->list;
#line 229 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_data_->_tmp11_ = FALSE;
#line 229 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_data_->_tmp11_ = rygel_media_export_harvesting_task_process_children (_data_->self, _data_->_tmp10_);
#line 229 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					if (!_data_->_tmp11_) {
#line 229 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
						break;
#line 1413 "rygel-media-export-harvesting-task.c"
					}
				}
#line 225 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp8_ = FALSE;
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp12_ = _data_->enumerator;
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp13_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) _data_->self);
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp14_ = _data_->_tmp13_;
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_state_ = 2;
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				g_file_enumerator_next_files_async (_data_->_tmp12_, RYGEL_MEDIA_EXPORT_HARVESTING_TASK_BATCH_SIZE, G_PRIORITY_DEFAULT, _data_->_tmp14_, rygel_media_export_harvesting_task_enumerate_directory_ready, _data_);
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				return FALSE;
#line 1430 "rygel-media-export-harvesting-task.c"
				_state_2:
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp15_ = NULL;
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp15_ = g_file_enumerator_next_files_finish (_data_->_tmp12_, _data_->_res_, &_data_->_inner_error_);
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp16_ = _data_->_tmp15_;
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (_data_->_inner_error_ != NULL) {
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					__g_list_free__g_object_unref0_0 (_data_->list);
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (_data_->enumerator);
#line 1444 "rygel-media-export-harvesting-task.c"
					goto __catch54_g_error;
				}
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				__g_list_free__g_object_unref0_0 (_data_->list);
#line 226 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->list = _data_->_tmp16_;
#line 1451 "rygel-media-export-harvesting-task.c"
			}
		}
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp17_ = _data_->enumerator;
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp18_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) _data_->self);
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp19_ = _data_->_tmp18_;
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_state_ = 3;
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_file_enumerator_close_async (_data_->_tmp17_, G_PRIORITY_DEFAULT, _data_->_tmp19_, rygel_media_export_harvesting_task_enumerate_directory_ready, _data_);
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 1466 "rygel-media-export-harvesting-task.c"
		_state_3:
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_file_enumerator_close_finish (_data_->_tmp17_, _data_->_res_, &_data_->_inner_error_);
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_data_->_inner_error_ != NULL) {
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			__g_list_free__g_object_unref0_0 (_data_->list);
#line 231 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (_data_->enumerator);
#line 1476 "rygel-media-export-harvesting-task.c"
			goto __catch54_g_error;
		}
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		__g_list_free__g_object_unref0_0 (_data_->list);
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_data_->enumerator);
#line 1483 "rygel-media-export-harvesting-task.c"
	}
	goto __finally54;
	__catch54_g_error:
	{
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->err = _data_->_inner_error_;
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_inner_error_ = NULL;
#line 233 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp20_ = NULL;
#line 233 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp20_ = _ ("failed to enumerate folder: %s");
#line 233 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp21_ = _data_->err;
#line 233 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp22_ = _data_->_tmp21_->message;
#line 233 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_warning (_data_->_tmp20_, _data_->_tmp22_);
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_data_->err);
#line 1504 "rygel-media-export-harvesting-task.c"
	}
	__finally54:
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_data_->_inner_error_ != NULL) {
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_data_->directory);
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_data_->_inner_error_);
#line 217 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 1517 "rygel-media-export-harvesting-task.c"
	}
#line 236 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_cleanup_database (_data_->self);
#line 237 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_do_update (_data_->self);
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_data_->directory);
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_data_->_state_ == 0) {
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_simple_async_result_complete_in_idle (_data_->_async_result);
#line 1529 "rygel-media-export-harvesting-task.c"
	} else {
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_simple_async_result_complete (_data_->_async_result);
#line 1533 "rygel-media-export-harvesting-task.c"
	}
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_object_unref (_data_->_async_result);
#line 215 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return FALSE;
#line 1539 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_cleanup_database (RygelMediaExportHarvestingTask* self) {
	GQueue* _tmp0_;
	gconstpointer _tmp1_ = NULL;
	RygelMediaExportDummyContainer* _tmp2_;
	RygelMediaExportDummyContainer* container;
	GError * _inner_error_ = NULL;
#line 240 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 241 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = self->priv->containers;
#line 241 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = g_queue_peek_head (_tmp0_);
#line 241 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = _g_object_ref0 (RYGEL_MEDIA_EXPORT_IS_DUMMY_CONTAINER ((RygelMediaContainer*) _tmp1_) ? ((RygelMediaExportDummyContainer*) ((RygelMediaContainer*) _tmp1_)) : NULL);
#line 241 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	container = _tmp2_;
#line 1559 "rygel-media-export-harvesting-task.c"
	{
		{
			RygelMediaExportDummyContainer* _tmp3_;
			GeeList* _tmp4_;
			GeeList* _tmp5_;
			GeeList* _child_list;
			GeeList* _tmp6_;
			gint _tmp7_;
			gint _tmp8_;
			gint _child_size;
			gint _child_index;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp3_ = container;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp4_ = _tmp3_->children;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp5_ = _g_object_ref0 (_tmp4_);
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_child_list = _tmp5_;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp6_ = _child_list;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp7_ = gee_collection_get_size ((GeeCollection*) _tmp6_);
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp8_ = _tmp7_;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_child_size = _tmp8_;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_child_index = -1;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			while (TRUE) {
#line 1591 "rygel-media-export-harvesting-task.c"
				gint _tmp9_;
				gint _tmp10_;
				gint _tmp11_;
				GeeList* _tmp12_;
				gint _tmp13_;
				gpointer _tmp14_ = NULL;
				gchar* child;
				RygelMediaExportMediaCache* _tmp15_;
				const gchar* _tmp16_;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp9_ = _child_index;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_child_index = _tmp9_ + 1;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp10_ = _child_index;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp11_ = _child_size;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (!(_tmp10_ < _tmp11_)) {
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					break;
#line 1613 "rygel-media-export-harvesting-task.c"
				}
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp12_ = _child_list;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp13_ = _child_index;
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp14_ = gee_list_get (_tmp12_, _tmp13_);
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				child = (gchar*) _tmp14_;
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp15_ = self->priv->cache;
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp16_ = child;
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				rygel_media_export_media_cache_remove_by_id (_tmp15_, _tmp16_, &_inner_error_);
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (_inner_error_ != NULL) {
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_free0 (child);
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (_child_list);
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					if (_inner_error_->domain == RYGEL_MEDIA_EXPORT_DATABASE_ERROR) {
#line 1637 "rygel-media-export-harvesting-task.c"
						goto __catch55_rygel_media_export_database_error;
					}
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_free0 (child);
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (_child_list);
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (container);
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					g_clear_error (&_inner_error_);
#line 246 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					return;
#line 1652 "rygel-media-export-harvesting-task.c"
				}
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_g_free0 (child);
#line 1656 "rygel-media-export-harvesting-task.c"
			}
#line 245 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (_child_list);
#line 1660 "rygel-media-export-harvesting-task.c"
		}
	}
	goto __finally55;
	__catch55_rygel_media_export_database_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp17_ = NULL;
		RygelMediaExportDummyContainer* _tmp18_;
		const gchar* _tmp19_;
		GError* _tmp20_;
		const gchar* _tmp21_;
#line 244 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_error_ = _inner_error_;
#line 244 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_inner_error_ = NULL;
#line 249 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp17_ = _ ("Failed to get children of container %s: %s");
#line 249 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp18_ = container;
#line 249 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp19_ = ((RygelMediaObject*) _tmp18_)->id;
#line 249 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp20_ = _error_;
#line 249 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp21_ = _tmp20_->message;
#line 249 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_warning (_tmp17_, _tmp19_, _tmp21_);
#line 244 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_error_);
#line 1690 "rygel-media-export-harvesting-task.c"
	}
	__finally55:
#line 244 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_inner_error_ != NULL) {
#line 244 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (container);
#line 244 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 244 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_inner_error_);
#line 244 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return;
#line 1703 "rygel-media-export-harvesting-task.c"
	}
#line 240 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (container);
#line 1707 "rygel-media-export-harvesting-task.c"
}


static gboolean rygel_media_export_harvesting_task_on_idle (RygelMediaExportHarvestingTask* self) {
	gboolean result = FALSE;
	GCancellable* _tmp0_;
	GCancellable* _tmp1_;
	gboolean _tmp2_ = FALSE;
	GeeQueue* _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	GError * _inner_error_ = NULL;
#line 255 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 256 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) self);
#line 256 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _tmp0_;
#line 256 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = g_cancellable_is_cancelled (_tmp1_);
#line 256 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp2_) {
#line 257 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_signal_emit_by_name ((RygelStateMachine*) self, "completed");
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = FALSE;
#line 259 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 1736 "rygel-media-export-harvesting-task.c"
	}
#line 262 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = self->priv->files;
#line 262 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp4_ = gee_collection_get_size ((GeeCollection*) _tmp3_);
#line 262 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp5_ = _tmp4_;
#line 262 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp5_ > 0) {
#line 1746 "rygel-media-export-harvesting-task.c"
		GeeQueue* _tmp6_;
		gpointer _tmp7_ = NULL;
		GFile* _tmp8_;
		gchar* _tmp9_ = NULL;
		gchar* _tmp10_;
		RygelMediaExportMetadataExtractor* _tmp11_;
		GeeQueue* _tmp12_;
		gpointer _tmp13_ = NULL;
		GFile* _tmp14_;
#line 263 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp6_ = self->priv->files;
#line 263 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = gee_queue_peek (_tmp6_);
#line 263 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp8_ = (GFile*) _tmp7_;
#line 263 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp9_ = g_file_get_uri (_tmp8_);
#line 263 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp10_ = _tmp9_;
#line 263 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_debug ("rygel-media-export-harvesting-task.vala:263: Scheduling file %s for me" \
"ta-data extraction…", _tmp10_);
#line 263 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_free0 (_tmp10_);
#line 263 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_tmp8_);
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp11_ = self->priv->extractor;
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp12_ = self->priv->files;
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp13_ = gee_queue_peek (_tmp12_);
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp14_ = (GFile*) _tmp13_;
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		rygel_media_export_metadata_extractor_extract (_tmp11_, _tmp14_);
#line 265 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_tmp14_);
#line 1784 "rygel-media-export-harvesting-task.c"
	} else {
		GQueue* _tmp15_;
		guint _tmp16_ = 0U;
#line 266 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp15_ = self->priv->containers;
#line 266 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp16_ = g_queue_get_length (_tmp15_);
#line 266 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp16_ > ((guint) 0)) {
#line 267 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_media_export_harvesting_task_enumerate_directory (self, NULL, NULL);
#line 1796 "rygel-media-export-harvesting-task.c"
		} else {
			const gchar* _tmp17_;
			RygelMediaContainer* _tmp21_;
			RygelMediaContainer* _tmp22_;
#line 270 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp17_ = self->priv->flag;
#line 270 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_tmp17_ != NULL) {
#line 1805 "rygel-media-export-harvesting-task.c"
				{
					RygelMediaExportMediaCache* _tmp18_;
					GFile* _tmp19_;
					const gchar* _tmp20_;
#line 272 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_tmp18_ = self->priv->cache;
#line 272 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_tmp19_ = self->origin;
#line 272 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_tmp20_ = self->priv->flag;
#line 272 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					rygel_media_export_media_cache_flag_object (_tmp18_, _tmp19_, _tmp20_, &_inner_error_);
#line 272 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					if (_inner_error_ != NULL) {
#line 1820 "rygel-media-export-harvesting-task.c"
						goto __catch56_g_error;
					}
				}
				goto __finally56;
				__catch56_g_error:
				{
					GError* _error_ = NULL;
#line 271 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_error_ = _inner_error_;
#line 271 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_inner_error_ = NULL;
#line 271 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_error_free0 (_error_);
#line 1834 "rygel-media-export-harvesting-task.c"
				}
				__finally56:
#line 271 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (_inner_error_ != NULL) {
#line 271 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 271 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					g_clear_error (&_inner_error_);
#line 271 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					return FALSE;
#line 1845 "rygel-media-export-harvesting-task.c"
				}
			}
#line 276 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp21_ = self->priv->parent;
#line 276 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp22_ = self->priv->parent;
#line 276 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_media_container_updated (_tmp21_, (RygelMediaObject*) _tmp22_, RYGEL_OBJECT_EVENT_TYPE_MODIFIED, FALSE);
#line 278 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_signal_emit_by_name ((RygelStateMachine*) self, "completed");
#line 1856 "rygel-media-export-harvesting-task.c"
		}
	}
#line 281 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	result = FALSE;
#line 281 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return result;
#line 1863 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_on_extracted_cb (RygelMediaExportHarvestingTask* self, GFile* file, GUPnPDLNAInformation* dlna, GFileInfo* file_info) {
	GCancellable* _tmp0_;
	GCancellable* _tmp1_;
	gboolean _tmp2_ = FALSE;
	GeeQueue* _tmp3_;
	gpointer _tmp4_ = NULL;
	GFile* entry;
	gboolean _tmp5_ = FALSE;
	GFile* _tmp6_;
	gboolean _tmp9_;
	RygelMediaItem* item = NULL;
	GUPnPDLNAInformation* _tmp10_;
	RygelMediaItem* _tmp22_;
	GeeQueue* _tmp28_;
	gpointer _tmp29_ = NULL;
	GFile* _tmp30_;
	GError * _inner_error_ = NULL;
#line 284 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 284 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (file != NULL);
#line 284 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (file_info != NULL);
#line 287 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) self);
#line 287 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _tmp0_;
#line 287 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = g_cancellable_is_cancelled (_tmp1_);
#line 287 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp2_) {
#line 288 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_signal_emit_by_name ((RygelStateMachine*) self, "completed");
#line 1900 "rygel-media-export-harvesting-task.c"
	}
#line 291 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = self->priv->files;
#line 291 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp4_ = gee_queue_peek (_tmp3_);
#line 291 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	entry = (GFile*) _tmp4_;
#line 292 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp6_ = entry;
#line 292 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp6_ == NULL) {
#line 292 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = TRUE;
#line 1914 "rygel-media-export-harvesting-task.c"
	} else {
		GFile* _tmp7_;
		GFile* _tmp8_;
#line 292 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = file;
#line 292 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp8_ = entry;
#line 292 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = _tmp7_ != _tmp8_;
#line 1924 "rygel-media-export-harvesting-task.c"
	}
#line 292 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp9_ = _tmp5_;
#line 292 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp9_) {
#line 295 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (entry);
#line 295 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return;
#line 1934 "rygel-media-export-harvesting-task.c"
	}
#line 299 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp10_ = dlna;
#line 299 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp10_ == NULL) {
#line 1940 "rygel-media-export-harvesting-task.c"
		GQueue* _tmp11_;
		gconstpointer _tmp12_ = NULL;
		GFile* _tmp13_;
		GFileInfo* _tmp14_;
		RygelMediaItem* _tmp15_ = NULL;
#line 300 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp11_ = self->priv->containers;
#line 300 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp12_ = g_queue_peek_head (_tmp11_);
#line 300 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp13_ = file;
#line 300 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp14_ = file_info;
#line 300 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp15_ = rygel_media_export_item_factory_create_simple ((RygelMediaContainer*) _tmp12_, _tmp13_, _tmp14_);
#line 300 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (item);
#line 300 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		item = _tmp15_;
#line 1960 "rygel-media-export-harvesting-task.c"
	} else {
		GQueue* _tmp16_;
		gconstpointer _tmp17_ = NULL;
		GFile* _tmp18_;
		GUPnPDLNAInformation* _tmp19_;
		GFileInfo* _tmp20_;
		RygelMediaItem* _tmp21_ = NULL;
#line 304 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp16_ = self->priv->containers;
#line 304 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp17_ = g_queue_peek_head (_tmp16_);
#line 304 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp18_ = file;
#line 304 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp19_ = dlna;
#line 304 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp20_ = file_info;
#line 304 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp21_ = rygel_media_export_item_factory_create_from_info ((RygelMediaContainer*) _tmp17_, _tmp18_, _tmp19_, _tmp20_);
#line 304 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (item);
#line 304 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		item = _tmp21_;
#line 1984 "rygel-media-export-harvesting-task.c"
	}
#line 310 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp22_ = item;
#line 310 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp22_ != NULL) {
#line 1990 "rygel-media-export-harvesting-task.c"
		RygelMediaItem* _tmp23_;
		GQueue* _tmp24_;
		gconstpointer _tmp25_ = NULL;
#line 311 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp23_ = item;
#line 311 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp24_ = self->priv->containers;
#line 311 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp25_ = g_queue_peek_head (_tmp24_);
#line 311 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		rygel_media_object_set_parent_ref ((RygelMediaObject*) _tmp23_, (RygelMediaContainer*) _tmp25_);
#line 2002 "rygel-media-export-harvesting-task.c"
		{
			RygelMediaExportMediaCache* _tmp26_;
			RygelMediaItem* _tmp27_;
#line 313 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp26_ = self->priv->cache;
#line 313 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp27_ = item;
#line 313 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_media_export_media_cache_save_item (_tmp26_, _tmp27_, &_inner_error_);
#line 313 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_inner_error_ != NULL) {
#line 2014 "rygel-media-export-harvesting-task.c"
				goto __catch57_g_error;
			}
		}
		goto __finally57;
		__catch57_g_error:
		{
			GError* _error_ = NULL;
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_error_ = _inner_error_;
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_inner_error_ = NULL;
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_error_free0 (_error_);
#line 2028 "rygel-media-export-harvesting-task.c"
		}
		__finally57:
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_inner_error_ != NULL) {
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (item);
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (entry);
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_clear_error (&_inner_error_);
#line 312 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return;
#line 2043 "rygel-media-export-harvesting-task.c"
		}
	}
#line 319 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp28_ = self->priv->files;
#line 319 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp29_ = gee_queue_poll (_tmp28_);
#line 319 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp30_ = (GFile*) _tmp29_;
#line 319 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_tmp30_);
#line 320 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_do_update (self);
#line 284 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (item);
#line 284 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (entry);
#line 2060 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_on_extractor_error_cb (RygelMediaExportHarvestingTask* self, GFile* file, GError* _error_) {
	GeeQueue* _tmp0_;
	gpointer _tmp1_ = NULL;
	GFile* entry;
	gboolean _tmp2_ = FALSE;
	GFile* _tmp3_;
	gboolean _tmp6_;
	GFile* _tmp7_;
	gchar* _tmp8_ = NULL;
	gchar* _tmp9_;
	GError* _tmp10_;
	const gchar* _tmp11_;
	GeeQueue* _tmp12_;
	gpointer _tmp13_ = NULL;
	GFile* _tmp14_;
#line 323 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 323 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (file != NULL);
#line 324 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = self->priv->files;
#line 324 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = gee_queue_peek (_tmp0_);
#line 324 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	entry = (GFile*) _tmp1_;
#line 325 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = entry;
#line 325 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp3_ == NULL) {
#line 325 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp2_ = TRUE;
#line 2095 "rygel-media-export-harvesting-task.c"
	} else {
		GFile* _tmp4_;
		GFile* _tmp5_;
#line 325 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp4_ = file;
#line 325 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = entry;
#line 325 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp2_ = _tmp4_ != _tmp5_;
#line 2105 "rygel-media-export-harvesting-task.c"
	}
#line 325 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp6_ = _tmp2_;
#line 325 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp6_) {
#line 328 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (entry);
#line 328 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return;
#line 2115 "rygel-media-export-harvesting-task.c"
	}
#line 335 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp7_ = file;
#line 335 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp8_ = g_file_get_uri (_tmp7_);
#line 335 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp9_ = _tmp8_;
#line 335 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp10_ = _error_;
#line 335 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp11_ = _tmp10_->message;
#line 335 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_debug ("rygel-media-export-harvesting-task.vala:335: Skipping %s; extraction c" \
"ompletely failed: %s", _tmp9_, _tmp11_);
#line 335 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_free0 (_tmp9_);
#line 339 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp12_ = self->priv->files;
#line 339 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp13_ = gee_queue_poll (_tmp12_);
#line 339 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp14_ = (GFile*) _tmp13_;
#line 339 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_tmp14_);
#line 340 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_do_update (self);
#line 323 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (entry);
#line 2143 "rygel-media-export-harvesting-task.c"
}


/**
     * If all files of a container were processed, notify the container
     * about this and set the updating signal.
     * Reschedule the iteration and extraction
     */
static void rygel_media_export_harvesting_task_do_update (RygelMediaExportHarvestingTask* self) {
	gboolean _tmp0_ = FALSE;
	GeeQueue* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	gboolean _tmp6_;
	GError * _inner_error_ = NULL;
#line 348 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 349 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = self->priv->files;
#line 349 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = gee_collection_get_size ((GeeCollection*) _tmp1_);
#line 349 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = _tmp2_;
#line 349 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp3_ == 0) {
#line 2169 "rygel-media-export-harvesting-task.c"
		GQueue* _tmp4_;
		guint _tmp5_ = 0U;
#line 350 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp4_ = self->priv->containers;
#line 350 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = g_queue_get_length (_tmp4_);
#line 350 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = _tmp5_ != ((guint) 0);
#line 2178 "rygel-media-export-harvesting-task.c"
	} else {
#line 349 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = FALSE;
#line 2182 "rygel-media-export-harvesting-task.c"
	}
#line 349 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp6_ = _tmp0_;
#line 349 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp6_) {
#line 2188 "rygel-media-export-harvesting-task.c"
		GQueue* _tmp7_;
		gconstpointer _tmp8_ = NULL;
		RygelMediaContainer* _tmp9_;
		RygelMediaContainer* container;
		GQueue* _tmp24_;
		gpointer _tmp25_ = NULL;
		RygelMediaContainer* _tmp26_;
#line 351 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = self->priv->containers;
#line 351 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp8_ = g_queue_peek_head (_tmp7_);
#line 351 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp9_ = _g_object_ref0 ((RygelMediaContainer*) _tmp8_);
#line 351 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		container = _tmp9_;
#line 2204 "rygel-media-export-harvesting-task.c"
		{
			RygelMediaExportMediaCache* _tmp10_ = NULL;
			RygelMediaExportMediaCache* cache;
			RygelMediaExportMediaCache* _tmp11_;
			RygelMediaContainer* _tmp12_;
			const gchar* _tmp13_;
			gint _tmp14_ = 0;
			gint _tmp15_;
#line 353 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp10_ = rygel_media_export_media_cache_get_default (&_inner_error_);
#line 353 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			cache = _tmp10_;
#line 353 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_inner_error_ != NULL) {
#line 2219 "rygel-media-export-harvesting-task.c"
				goto __catch58_g_error;
			}
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp11_ = cache;
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp12_ = container;
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp13_ = ((RygelMediaObject*) _tmp12_)->id;
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp14_ = rygel_media_export_media_cache_get_child_count (_tmp11_, _tmp13_, &_inner_error_);
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp15_ = _tmp14_;
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_inner_error_ != NULL) {
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_g_object_unref0 (cache);
#line 2236 "rygel-media-export-harvesting-task.c"
				goto __catch58_g_error;
			}
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_tmp15_ > 0) {
#line 2241 "rygel-media-export-harvesting-task.c"
				GQueue* _tmp16_;
				gconstpointer _tmp17_ = NULL;
				RygelMediaContainer* _tmp18_;
				RygelMediaContainer* head;
				RygelMediaContainer* _tmp19_;
				RygelMediaContainer* _tmp20_;
#line 355 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp16_ = self->priv->containers;
#line 355 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp17_ = g_queue_peek_head (_tmp16_);
#line 355 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp18_ = _g_object_ref0 ((RygelMediaContainer*) _tmp17_);
#line 355 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				head = _tmp18_;
#line 356 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp19_ = head;
#line 356 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp20_ = head;
#line 356 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				rygel_media_container_updated (_tmp19_, (RygelMediaObject*) _tmp20_, RYGEL_OBJECT_EVENT_TYPE_MODIFIED, FALSE);
#line 354 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_g_object_unref0 (head);
#line 2264 "rygel-media-export-harvesting-task.c"
			} else {
				RygelMediaExportMediaCache* _tmp21_;
				RygelMediaContainer* _tmp22_;
				const gchar* _tmp23_;
#line 358 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp21_ = cache;
#line 358 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp22_ = container;
#line 358 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp23_ = ((RygelMediaObject*) _tmp22_)->id;
#line 358 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				rygel_media_export_media_cache_remove_by_id (_tmp21_, _tmp23_, &_inner_error_);
#line 358 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (_inner_error_ != NULL) {
#line 358 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (cache);
#line 2281 "rygel-media-export-harvesting-task.c"
					goto __catch58_g_error;
				}
			}
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (cache);
#line 2287 "rygel-media-export-harvesting-task.c"
		}
		goto __finally58;
		__catch58_g_error:
		{
			GError* _error_ = NULL;
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_error_ = _inner_error_;
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_inner_error_ = NULL;
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_error_free0 (_error_);
#line 2299 "rygel-media-export-harvesting-task.c"
		}
		__finally58:
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_inner_error_ != NULL) {
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (container);
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_clear_error (&_inner_error_);
#line 352 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return;
#line 2312 "rygel-media-export-harvesting-task.c"
		}
#line 361 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp24_ = self->priv->containers;
#line 361 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp25_ = g_queue_pop_head (_tmp24_);
#line 361 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp26_ = (RygelMediaContainer*) _tmp25_;
#line 361 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_tmp26_);
#line 349 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (container);
#line 2324 "rygel-media-export-harvesting-task.c"
	}
#line 364 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_on_idle (self);
#line 2328 "rygel-media-export-harvesting-task.c"
}


static GCancellable* rygel_media_export_harvesting_task_real_get_cancellable (RygelStateMachine* base) {
	GCancellable* result;
	RygelMediaExportHarvestingTask* self;
	GCancellable* _tmp0_;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (RygelMediaExportHarvestingTask*) base;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = self->priv->_cancellable;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	result = _tmp0_;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return result;
#line 2344 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_real_set_cancellable (RygelStateMachine* base, GCancellable* value) {
	RygelMediaExportHarvestingTask* self;
	GCancellable* _tmp0_;
	GCancellable* _tmp1_;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (RygelMediaExportHarvestingTask*) base;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = value;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->_cancellable);
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->_cancellable = _tmp1_;
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_object_notify ((GObject *) self, "cancellable");
#line 2364 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_class_init (RygelMediaExportHarvestingTaskClass * klass) {
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_parent_class = g_type_class_peek_parent (klass);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_type_class_add_private (klass, sizeof (RygelMediaExportHarvestingTaskPrivate));
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_rygel_media_export_harvesting_task_get_property;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_rygel_media_export_harvesting_task_set_property;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_OBJECT_CLASS (klass)->finalize = rygel_media_export_harvesting_task_finalize;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CANCELLABLE, g_param_spec_object ("cancellable", "cancellable", "cancellable", G_TYPE_CANCELLABLE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 2381 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_rygel_state_machine_interface_init (RygelStateMachineIface * iface) {
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_rygel_state_machine_parent_iface = g_type_interface_peek_parent (iface);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	iface->run = (void (*)(RygelStateMachine*)) rygel_media_export_harvesting_task_real_run;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	iface->run_finish = rygel_media_export_harvesting_task_real_run_finish;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	iface->get_cancellable = rygel_media_export_harvesting_task_real_get_cancellable;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	iface->set_cancellable = rygel_media_export_harvesting_task_real_set_cancellable;
#line 2396 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_instance_init (RygelMediaExportHarvestingTask * self) {
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv = RYGEL_MEDIA_EXPORT_HARVESTING_TASK_GET_PRIVATE (self);
#line 2403 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_finalize (GObject* obj) {
	RygelMediaExportHarvestingTask * self;
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = RYGEL_MEDIA_EXPORT_HARVESTING_TASK (obj);
#line 26 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->origin);
#line 27 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->extractor);
#line 28 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->cache);
#line 29 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	__g_queue_free__g_object_unref0_0 (self->priv->containers);
#line 30 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->files);
#line 31 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->monitor);
#line 32 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_free0 (self->priv->flag);
#line 33 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->parent);
#line 36 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->_cancellable);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_OBJECT_CLASS (rygel_media_export_harvesting_task_parent_class)->finalize (obj);
#line 2431 "rygel-media-export-harvesting-task.c"
}


GType rygel_media_export_harvesting_task_get_type (void) {
	static volatile gsize rygel_media_export_harvesting_task_type_id__volatile = 0;
	if (g_once_init_enter (&rygel_media_export_harvesting_task_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (RygelMediaExportHarvestingTaskClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) rygel_media_export_harvesting_task_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (RygelMediaExportHarvestingTask), 0, (GInstanceInitFunc) rygel_media_export_harvesting_task_instance_init, NULL };
		static const GInterfaceInfo rygel_state_machine_info = { (GInterfaceInitFunc) rygel_media_export_harvesting_task_rygel_state_machine_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType rygel_media_export_harvesting_task_type_id;
		rygel_media_export_harvesting_task_type_id = g_type_register_static (G_TYPE_OBJECT, "RygelMediaExportHarvestingTask", &g_define_type_info, 0);
		g_type_add_interface_static (rygel_media_export_harvesting_task_type_id, RYGEL_TYPE_STATE_MACHINE, &rygel_state_machine_info);
		g_once_init_leave (&rygel_media_export_harvesting_task_type_id__volatile, rygel_media_export_harvesting_task_type_id);
	}
	return rygel_media_export_harvesting_task_type_id__volatile;
}


static void _vala_rygel_media_export_harvesting_task_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	RygelMediaExportHarvestingTask * self;
	self = RYGEL_MEDIA_EXPORT_HARVESTING_TASK (object);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	switch (property_id) {
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CANCELLABLE:
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_value_set_object (value, rygel_state_machine_get_cancellable ((RygelStateMachine*) self));
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		break;
#line 2460 "rygel-media-export-harvesting-task.c"
		default:
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		break;
#line 2466 "rygel-media-export-harvesting-task.c"
	}
}


static void _vala_rygel_media_export_harvesting_task_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	RygelMediaExportHarvestingTask * self;
	self = RYGEL_MEDIA_EXPORT_HARVESTING_TASK (object);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	switch (property_id) {
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CANCELLABLE:
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		rygel_state_machine_set_cancellable ((RygelStateMachine*) self, g_value_get_object (value));
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		break;
#line 2482 "rygel-media-export-harvesting-task.c"
		default:
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 24 "/home/mryan/src/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		break;
#line 2488 "rygel-media-export-harvesting-task.c"
	}
}



