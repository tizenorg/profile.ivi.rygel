/* rygel-media-export-harvesting-task.c generated by valac 0.22.0.18-aa6c, the Vala compiler
 * generated from rygel-media-export-harvesting-task.vala, do not modify */

/*
 * Copyright (C) 2009 Jens Georg <mail@jensge.org>.
 *
 * This file is part of Rygel.
 *
 * Rygel is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * Rygel is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 */

#include <glib.h>
#include <glib-object.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <rygel-core.h>
#include <rygel-server.h>
#include <gee.h>
#include <gst/pbutils/codec-utils.h>
#include <gst/pbutils/descriptions.h>
#include <gst/pbutils/encoding-profile.h>
#include <gst/pbutils/encoding-target.h>
#include <gst/pbutils/gstdiscoverer.h>
#include <gst/pbutils/gstpluginsbaseversion.h>
#include <gst/pbutils/install-plugins.h>
#include <gst/pbutils/missing-plugins.h>
#include <gst/pbutils/pbutils-enumtypes.h>
#include <gst/pbutils/pbutils.h>
#include <libgupnp-dlna/gupnp-dlna.h>
#include <glib/gi18n-lib.h>
#include <gobject/gvaluecollector.h>


#define TYPE_FILE_QUEUE_ENTRY (file_queue_entry_get_type ())
#define FILE_QUEUE_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_FILE_QUEUE_ENTRY, FileQueueEntry))
#define FILE_QUEUE_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_FILE_QUEUE_ENTRY, FileQueueEntryClass))
#define IS_FILE_QUEUE_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_FILE_QUEUE_ENTRY))
#define IS_FILE_QUEUE_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_FILE_QUEUE_ENTRY))
#define FILE_QUEUE_ENTRY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_FILE_QUEUE_ENTRY, FileQueueEntryClass))

typedef struct _FileQueueEntry FileQueueEntry;
typedef struct _FileQueueEntryClass FileQueueEntryClass;
typedef struct _FileQueueEntryPrivate FileQueueEntryPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _ParamSpecFileQueueEntry ParamSpecFileQueueEntry;

#define RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK (rygel_media_export_harvesting_task_get_type ())
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTask))
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTaskClass))
#define RYGEL_MEDIA_EXPORT_IS_HARVESTING_TASK(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK))
#define RYGEL_MEDIA_EXPORT_IS_HARVESTING_TASK_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK))
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTaskClass))

typedef struct _RygelMediaExportHarvestingTask RygelMediaExportHarvestingTask;
typedef struct _RygelMediaExportHarvestingTaskClass RygelMediaExportHarvestingTaskClass;
typedef struct _RygelMediaExportHarvestingTaskPrivate RygelMediaExportHarvestingTaskPrivate;

#define RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR (rygel_media_export_metadata_extractor_get_type ())
#define RYGEL_MEDIA_EXPORT_METADATA_EXTRACTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR, RygelMediaExportMetadataExtractor))
#define RYGEL_MEDIA_EXPORT_METADATA_EXTRACTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR, RygelMediaExportMetadataExtractorClass))
#define RYGEL_MEDIA_EXPORT_IS_METADATA_EXTRACTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR))
#define RYGEL_MEDIA_EXPORT_IS_METADATA_EXTRACTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR))
#define RYGEL_MEDIA_EXPORT_METADATA_EXTRACTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_METADATA_EXTRACTOR, RygelMediaExportMetadataExtractorClass))

typedef struct _RygelMediaExportMetadataExtractor RygelMediaExportMetadataExtractor;
typedef struct _RygelMediaExportMetadataExtractorClass RygelMediaExportMetadataExtractorClass;

#define RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE (rygel_media_export_media_cache_get_type ())
#define RYGEL_MEDIA_EXPORT_MEDIA_CACHE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE, RygelMediaExportMediaCache))
#define RYGEL_MEDIA_EXPORT_MEDIA_CACHE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE, RygelMediaExportMediaCacheClass))
#define RYGEL_MEDIA_EXPORT_IS_MEDIA_CACHE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE))
#define RYGEL_MEDIA_EXPORT_IS_MEDIA_CACHE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE))
#define RYGEL_MEDIA_EXPORT_MEDIA_CACHE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_MEDIA_CACHE, RygelMediaExportMediaCacheClass))

typedef struct _RygelMediaExportMediaCache RygelMediaExportMediaCache;
typedef struct _RygelMediaExportMediaCacheClass RygelMediaExportMediaCacheClass;

#define RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR (rygel_media_export_recursive_file_monitor_get_type ())
#define RYGEL_MEDIA_EXPORT_RECURSIVE_FILE_MONITOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR, RygelMediaExportRecursiveFileMonitor))
#define RYGEL_MEDIA_EXPORT_RECURSIVE_FILE_MONITOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR, RygelMediaExportRecursiveFileMonitorClass))
#define RYGEL_MEDIA_EXPORT_IS_RECURSIVE_FILE_MONITOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR))
#define RYGEL_MEDIA_EXPORT_IS_RECURSIVE_FILE_MONITOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR))
#define RYGEL_MEDIA_EXPORT_RECURSIVE_FILE_MONITOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_RECURSIVE_FILE_MONITOR, RygelMediaExportRecursiveFileMonitorClass))

typedef struct _RygelMediaExportRecursiveFileMonitor RygelMediaExportRecursiveFileMonitor;
typedef struct _RygelMediaExportRecursiveFileMonitorClass RygelMediaExportRecursiveFileMonitorClass;
#define __g_queue_free__g_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_queue_free__g_object_unref0_ (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _RygelMediaExportHarvestingTaskRunData RygelMediaExportHarvestingTaskRunData;
#define _file_queue_entry_unref0(var) ((var == NULL) ? NULL : (var = (file_queue_entry_unref (var), NULL)))

#define RYGEL_MEDIA_EXPORT_TYPE_DB_CONTAINER (rygel_media_export_db_container_get_type ())
#define RYGEL_MEDIA_EXPORT_DB_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_DB_CONTAINER, RygelMediaExportDBContainer))
#define RYGEL_MEDIA_EXPORT_DB_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_DB_CONTAINER, RygelMediaExportDBContainerClass))
#define RYGEL_MEDIA_EXPORT_IS_DB_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_DB_CONTAINER))
#define RYGEL_MEDIA_EXPORT_IS_DB_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_DB_CONTAINER))
#define RYGEL_MEDIA_EXPORT_DB_CONTAINER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_DB_CONTAINER, RygelMediaExportDBContainerClass))

typedef struct _RygelMediaExportDBContainer RygelMediaExportDBContainer;
typedef struct _RygelMediaExportDBContainerClass RygelMediaExportDBContainerClass;

#define RYGEL_MEDIA_EXPORT_TYPE_TRACKABLE_DB_CONTAINER (rygel_media_export_trackable_db_container_get_type ())
#define RYGEL_MEDIA_EXPORT_TRACKABLE_DB_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_TRACKABLE_DB_CONTAINER, RygelMediaExportTrackableDbContainer))
#define RYGEL_MEDIA_EXPORT_TRACKABLE_DB_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_TRACKABLE_DB_CONTAINER, RygelMediaExportTrackableDbContainerClass))
#define RYGEL_MEDIA_EXPORT_IS_TRACKABLE_DB_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_TRACKABLE_DB_CONTAINER))
#define RYGEL_MEDIA_EXPORT_IS_TRACKABLE_DB_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_TRACKABLE_DB_CONTAINER))
#define RYGEL_MEDIA_EXPORT_TRACKABLE_DB_CONTAINER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_TRACKABLE_DB_CONTAINER, RygelMediaExportTrackableDbContainerClass))

typedef struct _RygelMediaExportTrackableDbContainer RygelMediaExportTrackableDbContainer;
typedef struct _RygelMediaExportTrackableDbContainerClass RygelMediaExportTrackableDbContainerClass;

#define RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER (rygel_media_export_dummy_container_get_type ())
#define RYGEL_MEDIA_EXPORT_DUMMY_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER, RygelMediaExportDummyContainer))
#define RYGEL_MEDIA_EXPORT_DUMMY_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER, RygelMediaExportDummyContainerClass))
#define RYGEL_MEDIA_EXPORT_IS_DUMMY_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER))
#define RYGEL_MEDIA_EXPORT_IS_DUMMY_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER))
#define RYGEL_MEDIA_EXPORT_DUMMY_CONTAINER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER, RygelMediaExportDummyContainerClass))

typedef struct _RygelMediaExportDummyContainer RygelMediaExportDummyContainer;
typedef struct _RygelMediaExportDummyContainerClass RygelMediaExportDummyContainerClass;
typedef struct _RygelMediaExportDBContainerPrivate RygelMediaExportDBContainerPrivate;
typedef struct _RygelMediaExportTrackableDbContainerPrivate RygelMediaExportTrackableDbContainerPrivate;
typedef struct _RygelMediaExportDummyContainerPrivate RygelMediaExportDummyContainerPrivate;
#define __g_list_free__g_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__g_object_unref0_ (var), NULL)))
typedef struct _RygelMediaExportHarvestingTaskEnumerateDirectoryData RygelMediaExportHarvestingTaskEnumerateDirectoryData;

#define RYGEL_MEDIA_EXPORT_TYPE_UPDATABLE_OBJECT (rygel_media_export_updatable_object_get_type ())
#define RYGEL_MEDIA_EXPORT_UPDATABLE_OBJECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), RYGEL_MEDIA_EXPORT_TYPE_UPDATABLE_OBJECT, RygelMediaExportUpdatableObject))
#define RYGEL_MEDIA_EXPORT_IS_UPDATABLE_OBJECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), RYGEL_MEDIA_EXPORT_TYPE_UPDATABLE_OBJECT))
#define RYGEL_MEDIA_EXPORT_UPDATABLE_OBJECT_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), RYGEL_MEDIA_EXPORT_TYPE_UPDATABLE_OBJECT, RygelMediaExportUpdatableObjectIface))

typedef struct _RygelMediaExportUpdatableObject RygelMediaExportUpdatableObject;
typedef struct _RygelMediaExportUpdatableObjectIface RygelMediaExportUpdatableObjectIface;

struct _FileQueueEntry {
	GTypeInstance parent_instance;
	volatile int ref_count;
	FileQueueEntryPrivate * priv;
	GFile* file;
	gboolean known;
	gchar* content_type;
};

struct _FileQueueEntryClass {
	GTypeClass parent_class;
	void (*finalize) (FileQueueEntry *self);
};

struct _ParamSpecFileQueueEntry {
	GParamSpec parent_instance;
};

struct _RygelMediaExportHarvestingTask {
	GObject parent_instance;
	RygelMediaExportHarvestingTaskPrivate * priv;
	GFile* origin;
};

struct _RygelMediaExportHarvestingTaskClass {
	GObjectClass parent_class;
};

struct _RygelMediaExportHarvestingTaskPrivate {
	RygelMediaExportMetadataExtractor* extractor;
	RygelMediaExportMediaCache* cache;
	GQueue* containers;
	GeeQueue* files;
	RygelMediaExportRecursiveFileMonitor* monitor;
	RygelMediaContainer* parent;
	GCancellable* _cancellable;
};

struct _RygelMediaExportHarvestingTaskRunData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	RygelMediaExportHarvestingTask* self;
	GFileInfo* info;
	GFile* _tmp0_;
	GCancellable* _tmp1_;
	GCancellable* _tmp2_;
	GFileInfo* _tmp3_;
	GFile* _tmp4_;
	RygelMediaContainer* _tmp5_;
	gboolean _tmp6_;
	GFileType _tmp7_;
	GQueue* _tmp8_;
	RygelMediaContainer* _tmp9_;
	RygelMediaContainer* _tmp10_;
	GError* _error_;
	GError* _tmp11_;
	const gchar* _tmp12_;
	GFile* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	GError* _tmp16_;
	const gchar* _tmp17_;
	GFile* _tmp18_;
	gchar* _tmp19_;
	gchar* _tmp20_;
	GError * _inner_error_;
};

typedef enum  {
	RYGEL_MEDIA_EXPORT_DATABASE_ERROR_IO_ERROR,
	RYGEL_MEDIA_EXPORT_DATABASE_ERROR_SQLITE_ERROR
} RygelMediaExportDatabaseError;
#define RYGEL_MEDIA_EXPORT_DATABASE_ERROR rygel_media_export_database_error_quark ()
struct _RygelMediaExportDBContainer {
	RygelMediaContainer parent_instance;
	RygelMediaExportDBContainerPrivate * priv;
	RygelMediaExportMediaCache* media_db;
};

struct _RygelMediaExportDBContainerClass {
	RygelMediaContainerClass parent_class;
	gint (*count_children) (RygelMediaExportDBContainer* self);
	void (*search) (RygelMediaExportDBContainer* self, RygelSearchExpression* expression, guint offset, guint max_count, const gchar* sort_criteria, GCancellable* cancellable, GAsyncReadyCallback _callback_, gpointer _user_data_);
	RygelMediaObjects* (*search_finish) (RygelMediaExportDBContainer* self, GAsyncResult* _res_, guint* total_matches, GError** error);
};

struct _RygelMediaExportTrackableDbContainer {
	RygelMediaExportDBContainer parent_instance;
	RygelMediaExportTrackableDbContainerPrivate * priv;
};

struct _RygelMediaExportTrackableDbContainerClass {
	RygelMediaExportDBContainerClass parent_class;
	void (*remove_child) (RygelMediaExportTrackableDbContainer* self, RygelMediaObject* object, GAsyncReadyCallback _callback_, gpointer _user_data_);
	void (*remove_child_finish) (RygelMediaExportTrackableDbContainer* self, GAsyncResult* _res_);
	gchar* (*get_service_reset_token) (RygelMediaExportTrackableDbContainer* self);
	void (*set_service_reset_token) (RygelMediaExportTrackableDbContainer* self, const gchar* token);
	guint32 (*get_system_update_id) (RygelMediaExportTrackableDbContainer* self);
};

struct _RygelMediaExportDummyContainer {
	RygelMediaExportTrackableDbContainer parent_instance;
	RygelMediaExportDummyContainerPrivate * priv;
	GFile* file;
	GeeList* children;
};

struct _RygelMediaExportDummyContainerClass {
	RygelMediaExportTrackableDbContainerClass parent_class;
};

struct _RygelMediaExportHarvestingTaskEnumerateDirectoryData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	RygelMediaExportHarvestingTask* self;
	GFile* directory;
	GQueue* _tmp0_;
	gconstpointer _tmp1_;
	RygelMediaContainer* _tmp2_;
	GFile* _tmp3_;
	GFile* _tmp4_;
	GFileEnumerator* enumerator;
	GFile* _tmp5_;
	GCancellable* _tmp6_;
	GCancellable* _tmp7_;
	GFileEnumerator* _tmp8_;
	GList* list;
	gboolean _tmp9_;
	gboolean _tmp10_;
	GList* _tmp11_;
	gboolean _tmp12_;
	GList* _tmp13_;
	GFileEnumerator* _tmp14_;
	GCancellable* _tmp15_;
	GCancellable* _tmp16_;
	GList* _tmp17_;
	GFileEnumerator* _tmp18_;
	GCancellable* _tmp19_;
	GCancellable* _tmp20_;
	GError* err;
	const gchar* _tmp21_;
	GError* _tmp22_;
	const gchar* _tmp23_;
	GError * _inner_error_;
};

struct _RygelMediaExportUpdatableObjectIface {
	GTypeInterface parent_iface;
	void (*commit_custom) (RygelMediaExportUpdatableObject* self, gboolean override_guarded, GAsyncReadyCallback _callback_, gpointer _user_data_);
	void (*commit_custom_finish) (RygelMediaExportUpdatableObject* self, GAsyncResult* _res_, GError** error);
};


static gpointer file_queue_entry_parent_class = NULL;
static gpointer rygel_media_export_harvesting_task_parent_class = NULL;
static RygelStateMachineIface* rygel_media_export_harvesting_task_rygel_state_machine_parent_iface = NULL;

gpointer file_queue_entry_ref (gpointer instance);
void file_queue_entry_unref (gpointer instance);
GParamSpec* param_spec_file_queue_entry (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_file_queue_entry (GValue* value, gpointer v_object);
void value_take_file_queue_entry (GValue* value, gpointer v_object);
gpointer value_get_file_queue_entry (const GValue* value);
GType file_queue_entry_get_type (void) G_GNUC_CONST;
enum  {
	FILE_QUEUE_ENTRY_DUMMY_PROPERTY
};
FileQueueEntry* file_queue_entry_new (GFile* file, gboolean known, const gchar* content_type);
FileQueueEntry* file_queue_entry_construct (GType object_type, GFile* file, gboolean known, const gchar* content_type);
static void file_queue_entry_finalize (FileQueueEntry* obj);
GType rygel_media_export_harvesting_task_get_type (void) G_GNUC_CONST;
GType rygel_media_export_metadata_extractor_get_type (void) G_GNUC_CONST;
GType rygel_media_export_media_cache_get_type (void) G_GNUC_CONST;
GType rygel_media_export_recursive_file_monitor_get_type (void) G_GNUC_CONST;
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTaskPrivate))
enum  {
	RYGEL_MEDIA_EXPORT_HARVESTING_TASK_DUMMY_PROPERTY,
	RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CANCELLABLE
};
static void _g_object_unref0_ (gpointer var);
static void _g_queue_free__g_object_unref0_ (GQueue* self);
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_BATCH_SIZE 256
#define RYGEL_MEDIA_EXPORT_HARVESTING_TASK_HARVESTER_ATTRIBUTES G_FILE_ATTRIBUTE_STANDARD_NAME "," G_FILE_ATTRIBUTE_STANDARD_TYPE "," G_FILE_ATTRIBUTE_TIME_MODIFIED "," G_FILE_ATTRIBUTE_STANDARD_CONTENT_TYPE "," G_FILE_ATTRIBUTE_STANDARD_SIZE "," G_FILE_ATTRIBUTE_STANDARD_IS_HIDDEN
RygelMediaExportHarvestingTask* rygel_media_export_harvesting_task_new (RygelMediaExportRecursiveFileMonitor* monitor, GFile* file, RygelMediaContainer* parent);
RygelMediaExportHarvestingTask* rygel_media_export_harvesting_task_construct (GType object_type, RygelMediaExportRecursiveFileMonitor* monitor, GFile* file, RygelMediaContainer* parent);
RygelMediaExportMetadataExtractor* rygel_media_export_metadata_extractor_new (void);
RygelMediaExportMetadataExtractor* rygel_media_export_metadata_extractor_construct (GType object_type);
RygelMediaExportMediaCache* rygel_media_export_media_cache_get_default (void);
static void rygel_media_export_harvesting_task_on_extracted_cb (RygelMediaExportHarvestingTask* self, GFile* file, GstDiscovererInfo* dlna, GUPnPDLNAProfile* profile, GFileInfo* file_info);
static void _rygel_media_export_harvesting_task_on_extracted_cb_rygel_media_export_metadata_extractor_extraction_done (RygelMediaExportMetadataExtractor* _sender, GFile* file, GstDiscovererInfo* info, GUPnPDLNAProfile* profile, GFileInfo* file_info, gpointer self);
static void rygel_media_export_harvesting_task_on_extractor_error_cb (RygelMediaExportHarvestingTask* self, GFile* file, GError* _error_);
static void _rygel_media_export_harvesting_task_on_extractor_error_cb_rygel_media_export_metadata_extractor_error (RygelMediaExportMetadataExtractor* _sender, GFile* file, GError* err, gpointer self);
void rygel_media_export_harvesting_task_cancel (RygelMediaExportHarvestingTask* self);
static void rygel_media_export_harvesting_task_real_run_data_free (gpointer _data);
static void rygel_media_export_harvesting_task_real_run (RygelStateMachine* base, GAsyncReadyCallback _callback_, gpointer _user_data_);
static gboolean rygel_media_export_harvesting_task_real_run_co (RygelMediaExportHarvestingTaskRunData* _data_);
static void rygel_media_export_harvesting_task_run_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static gboolean rygel_media_export_harvesting_task_process_file (RygelMediaExportHarvestingTask* self, GFile* file, GFileInfo* info, RygelMediaContainer* parent);
static gboolean rygel_media_export_harvesting_task_on_idle (RygelMediaExportHarvestingTask* self);
static gboolean rygel_media_export_harvesting_task_push_if_changed_or_unknown (RygelMediaExportHarvestingTask* self, GFile* file, GFileInfo* info);
GQuark rygel_media_export_database_error_quark (void);
gboolean rygel_media_export_media_cache_exists (RygelMediaExportMediaCache* self, GFile* file, gint64* timestamp, gint64* size, GError** error);
void rygel_media_export_recursive_file_monitor_add (RygelMediaExportRecursiveFileMonitor* self, GFile* file, GAsyncReadyCallback _callback_, gpointer _user_data_);
void rygel_media_export_recursive_file_monitor_add_finish (RygelMediaExportRecursiveFileMonitor* self, GAsyncResult* _res_);
GType rygel_media_export_db_container_get_type (void) G_GNUC_CONST;
GType rygel_media_export_trackable_db_container_get_type (void) G_GNUC_CONST;
GType rygel_media_export_dummy_container_get_type (void) G_GNUC_CONST;
RygelMediaExportDummyContainer* rygel_media_export_dummy_container_new (GFile* file, RygelMediaContainer* parent);
RygelMediaExportDummyContainer* rygel_media_export_dummy_container_construct (GType object_type, GFile* file, RygelMediaContainer* parent);
gchar* rygel_media_export_media_cache_get_id (GFile* file);
gboolean rygel_media_export_harvester_is_eligible (GFileInfo* info);
static gboolean rygel_media_export_harvesting_task_process_children (RygelMediaExportHarvestingTask* self, GList* list);
void rygel_media_export_dummy_container_seen (RygelMediaExportDummyContainer* self, GFile* file);
static void rygel_media_export_harvesting_task_enumerate_directory_data_free (gpointer _data);
static void rygel_media_export_harvesting_task_enumerate_directory (RygelMediaExportHarvestingTask* self, GAsyncReadyCallback _callback_, gpointer _user_data_);
static void rygel_media_export_harvesting_task_enumerate_directory_finish (RygelMediaExportHarvestingTask* self, GAsyncResult* _res_);
static gboolean rygel_media_export_harvesting_task_enumerate_directory_co (RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_);
static void rygel_media_export_harvesting_task_enumerate_directory_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static void _g_list_free__g_object_unref0_ (GList* self);
static void rygel_media_export_harvesting_task_cleanup_database (RygelMediaExportHarvestingTask* self);
static void rygel_media_export_harvesting_task_do_update (RygelMediaExportHarvestingTask* self);
void rygel_media_export_media_cache_remove_by_id (RygelMediaExportMediaCache* self, const gchar* id, GError** error);
void rygel_media_export_metadata_extractor_extract (RygelMediaExportMetadataExtractor* self, GFile* file, const gchar* content_type);
RygelMediaItem* rygel_media_export_item_factory_create_simple (RygelMediaContainer* parent, GFile* file, GFileInfo* info);
RygelMediaItem* rygel_media_export_item_factory_create_from_info (RygelMediaContainer* parent, GFile* file, GstDiscovererInfo* info, GUPnPDLNAProfile* profile, GFileInfo* file_info);
GType rygel_media_export_updatable_object_get_type (void) G_GNUC_CONST;
void rygel_media_export_updatable_object_non_overriding_commit (RygelMediaExportUpdatableObject* self, GAsyncReadyCallback _callback_, gpointer _user_data_);
void rygel_media_export_updatable_object_non_overriding_commit_finish (RygelMediaExportUpdatableObject* self, GAsyncResult* _res_, GError** error);
static void rygel_media_export_harvesting_task_finalize (GObject* obj);
static void _vala_rygel_media_export_harvesting_task_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_rygel_media_export_harvesting_task_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);


static gpointer _g_object_ref0 (gpointer self) {
#line 31 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return self ? g_object_ref (self) : NULL;
#line 390 "rygel-media-export-harvesting-task.c"
}


FileQueueEntry* file_queue_entry_construct (GType object_type, GFile* file, gboolean known, const gchar* content_type) {
	FileQueueEntry* self = NULL;
	GFile* _tmp0_ = NULL;
	GFile* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	const gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
#line 30 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 30 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (content_type != NULL, NULL);
#line 30 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (FileQueueEntry*) g_type_create_instance (object_type);
#line 31 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = file;
#line 31 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 31 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->file);
#line 31 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->file = _tmp1_;
#line 32 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = known;
#line 32 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->known = _tmp2_;
#line 33 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = content_type;
#line 33 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp4_ = g_strdup (_tmp3_);
#line 33 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_free0 (self->content_type);
#line 33 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->content_type = _tmp4_;
#line 30 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return self;
#line 429 "rygel-media-export-harvesting-task.c"
}


FileQueueEntry* file_queue_entry_new (GFile* file, gboolean known, const gchar* content_type) {
#line 30 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return file_queue_entry_construct (TYPE_FILE_QUEUE_ENTRY, file, known, content_type);
#line 436 "rygel-media-export-harvesting-task.c"
}


static void value_file_queue_entry_init (GValue* value) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	value->data[0].v_pointer = NULL;
#line 443 "rygel-media-export-harvesting-task.c"
}


static void value_file_queue_entry_free_value (GValue* value) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (value->data[0].v_pointer) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		file_queue_entry_unref (value->data[0].v_pointer);
#line 452 "rygel-media-export-harvesting-task.c"
	}
}


static void value_file_queue_entry_copy_value (const GValue* src_value, GValue* dest_value) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (src_value->data[0].v_pointer) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		dest_value->data[0].v_pointer = file_queue_entry_ref (src_value->data[0].v_pointer);
#line 462 "rygel-media-export-harvesting-task.c"
	} else {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		dest_value->data[0].v_pointer = NULL;
#line 466 "rygel-media-export-harvesting-task.c"
	}
}


static gpointer value_file_queue_entry_peek_pointer (const GValue* value) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return value->data[0].v_pointer;
#line 474 "rygel-media-export-harvesting-task.c"
}


static gchar* value_file_queue_entry_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (collect_values[0].v_pointer) {
#line 481 "rygel-media-export-harvesting-task.c"
		FileQueueEntry* object;
		object = collect_values[0].v_pointer;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (object->parent_instance.g_class == NULL) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 488 "rygel-media-export-harvesting-task.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 492 "rygel-media-export-harvesting-task.c"
		}
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		value->data[0].v_pointer = file_queue_entry_ref (object);
#line 496 "rygel-media-export-harvesting-task.c"
	} else {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		value->data[0].v_pointer = NULL;
#line 500 "rygel-media-export-harvesting-task.c"
	}
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return NULL;
#line 504 "rygel-media-export-harvesting-task.c"
}


static gchar* value_file_queue_entry_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	FileQueueEntry** object_p;
	object_p = collect_values[0].v_pointer;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (!object_p) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 515 "rygel-media-export-harvesting-task.c"
	}
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (!value->data[0].v_pointer) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		*object_p = NULL;
#line 521 "rygel-media-export-harvesting-task.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		*object_p = value->data[0].v_pointer;
#line 525 "rygel-media-export-harvesting-task.c"
	} else {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		*object_p = file_queue_entry_ref (value->data[0].v_pointer);
#line 529 "rygel-media-export-harvesting-task.c"
	}
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return NULL;
#line 533 "rygel-media-export-harvesting-task.c"
}


GParamSpec* param_spec_file_queue_entry (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	ParamSpecFileQueueEntry* spec;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (g_type_is_a (object_type, TYPE_FILE_QUEUE_ENTRY), NULL);
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return G_PARAM_SPEC (spec);
#line 547 "rygel-media-export-harvesting-task.c"
}


gpointer value_get_file_queue_entry (const GValue* value) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, TYPE_FILE_QUEUE_ENTRY), NULL);
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return value->data[0].v_pointer;
#line 556 "rygel-media-export-harvesting-task.c"
}


void value_set_file_queue_entry (GValue* value, gpointer v_object) {
	FileQueueEntry* old;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, TYPE_FILE_QUEUE_ENTRY));
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	old = value->data[0].v_pointer;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (v_object) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, TYPE_FILE_QUEUE_ENTRY));
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		value->data[0].v_pointer = v_object;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		file_queue_entry_ref (value->data[0].v_pointer);
#line 576 "rygel-media-export-harvesting-task.c"
	} else {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		value->data[0].v_pointer = NULL;
#line 580 "rygel-media-export-harvesting-task.c"
	}
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (old) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		file_queue_entry_unref (old);
#line 586 "rygel-media-export-harvesting-task.c"
	}
}


void value_take_file_queue_entry (GValue* value, gpointer v_object) {
	FileQueueEntry* old;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, TYPE_FILE_QUEUE_ENTRY));
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	old = value->data[0].v_pointer;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (v_object) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, TYPE_FILE_QUEUE_ENTRY));
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		value->data[0].v_pointer = v_object;
#line 605 "rygel-media-export-harvesting-task.c"
	} else {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		value->data[0].v_pointer = NULL;
#line 609 "rygel-media-export-harvesting-task.c"
	}
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (old) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		file_queue_entry_unref (old);
#line 615 "rygel-media-export-harvesting-task.c"
	}
}


static void file_queue_entry_class_init (FileQueueEntryClass * klass) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	file_queue_entry_parent_class = g_type_class_peek_parent (klass);
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	FILE_QUEUE_ENTRY_CLASS (klass)->finalize = file_queue_entry_finalize;
#line 625 "rygel-media-export-harvesting-task.c"
}


static void file_queue_entry_instance_init (FileQueueEntry * self) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->ref_count = 1;
#line 632 "rygel-media-export-harvesting-task.c"
}


static void file_queue_entry_finalize (FileQueueEntry* obj) {
	FileQueueEntry * self;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_FILE_QUEUE_ENTRY, FileQueueEntry);
#line 26 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->file);
#line 28 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_free0 (self->content_type);
#line 644 "rygel-media-export-harvesting-task.c"
}


GType file_queue_entry_get_type (void) {
	static volatile gsize file_queue_entry_type_id__volatile = 0;
	if (g_once_init_enter (&file_queue_entry_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { value_file_queue_entry_init, value_file_queue_entry_free_value, value_file_queue_entry_copy_value, value_file_queue_entry_peek_pointer, "p", value_file_queue_entry_collect_value, "p", value_file_queue_entry_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (FileQueueEntryClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) file_queue_entry_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (FileQueueEntry), 0, (GInstanceInitFunc) file_queue_entry_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType file_queue_entry_type_id;
		file_queue_entry_type_id = g_type_register_fundamental (g_type_fundamental_next (), "FileQueueEntry", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_once_init_leave (&file_queue_entry_type_id__volatile, file_queue_entry_type_id);
	}
	return file_queue_entry_type_id__volatile;
}


gpointer file_queue_entry_ref (gpointer instance) {
	FileQueueEntry* self;
	self = instance;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_atomic_int_inc (&self->ref_count);
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return instance;
#line 669 "rygel-media-export-harvesting-task.c"
}


void file_queue_entry_unref (gpointer instance) {
	FileQueueEntry* self;
	self = instance;
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		FILE_QUEUE_ENTRY_GET_CLASS (self)->finalize (self);
#line 25 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 682 "rygel-media-export-harvesting-task.c"
	}
}


static void _g_object_unref0_ (gpointer var) {
#line 42 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 690 "rygel-media-export-harvesting-task.c"
}


static void _g_queue_free__g_object_unref0_ (GQueue* self) {
#line 42 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_queue_foreach (self, (GFunc) _g_object_unref0_, NULL);
#line 42 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_queue_free (self);
#line 699 "rygel-media-export-harvesting-task.c"
}


static void _rygel_media_export_harvesting_task_on_extracted_cb_rygel_media_export_metadata_extractor_extraction_done (RygelMediaExportMetadataExtractor* _sender, GFile* file, GstDiscovererInfo* info, GUPnPDLNAProfile* profile, GFileInfo* file_info, gpointer self) {
#line 66 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_on_extracted_cb (self, file, info, profile, file_info);
#line 706 "rygel-media-export-harvesting-task.c"
}


static void _rygel_media_export_harvesting_task_on_extractor_error_cb_rygel_media_export_metadata_extractor_error (RygelMediaExportMetadataExtractor* _sender, GFile* file, GError* err, gpointer self) {
#line 67 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_on_extractor_error_cb (self, file, err);
#line 713 "rygel-media-export-harvesting-task.c"
}


RygelMediaExportHarvestingTask* rygel_media_export_harvesting_task_construct (GType object_type, RygelMediaExportRecursiveFileMonitor* monitor, GFile* file, RygelMediaContainer* parent) {
	RygelMediaExportHarvestingTask * self = NULL;
	RygelMediaExportMetadataExtractor* _tmp0_ = NULL;
	GFile* _tmp1_ = NULL;
	GFile* _tmp2_ = NULL;
	RygelMediaContainer* _tmp3_ = NULL;
	RygelMediaContainer* _tmp4_ = NULL;
	RygelMediaExportMediaCache* _tmp5_ = NULL;
	RygelMediaExportMetadataExtractor* _tmp6_ = NULL;
	RygelMediaExportMetadataExtractor* _tmp7_ = NULL;
	GeeLinkedList* _tmp8_ = NULL;
	GQueue* _tmp9_ = NULL;
	RygelMediaExportRecursiveFileMonitor* _tmp10_ = NULL;
	RygelMediaExportRecursiveFileMonitor* _tmp11_ = NULL;
#line 58 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (monitor != NULL, NULL);
#line 58 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 58 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (parent != NULL, NULL);
#line 58 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (RygelMediaExportHarvestingTask*) g_object_new (object_type, NULL);
#line 61 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = rygel_media_export_metadata_extractor_new ();
#line 61 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->extractor);
#line 61 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->extractor = _tmp0_;
#line 62 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = file;
#line 62 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = _g_object_ref0 (_tmp1_);
#line 62 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->origin);
#line 62 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->origin = _tmp2_;
#line 63 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = parent;
#line 63 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp4_ = _g_object_ref0 (_tmp3_);
#line 63 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->parent);
#line 63 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->parent = _tmp4_;
#line 64 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp5_ = rygel_media_export_media_cache_get_default ();
#line 64 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->cache);
#line 64 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->cache = _tmp5_;
#line 66 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp6_ = self->priv->extractor;
#line 66 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_signal_connect_object (_tmp6_, "extraction-done", (GCallback) _rygel_media_export_harvesting_task_on_extracted_cb_rygel_media_export_metadata_extractor_extraction_done, self, 0);
#line 67 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp7_ = self->priv->extractor;
#line 67 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_signal_connect_object (_tmp7_, "error", (GCallback) _rygel_media_export_harvesting_task_on_extractor_error_cb_rygel_media_export_metadata_extractor_error, self, 0);
#line 69 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp8_ = gee_linked_list_new (TYPE_FILE_QUEUE_ENTRY, (GBoxedCopyFunc) file_queue_entry_ref, file_queue_entry_unref, NULL, NULL, NULL);
#line 69 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->files);
#line 69 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->files = (GeeQueue*) _tmp8_;
#line 70 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp9_ = g_queue_new ();
#line 70 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	__g_queue_free__g_object_unref0_0 (self->priv->containers);
#line 70 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->containers = _tmp9_;
#line 71 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp10_ = monitor;
#line 71 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp11_ = _g_object_ref0 (_tmp10_);
#line 71 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->monitor);
#line 71 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->monitor = _tmp11_;
#line 58 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return self;
#line 797 "rygel-media-export-harvesting-task.c"
}


RygelMediaExportHarvestingTask* rygel_media_export_harvesting_task_new (RygelMediaExportRecursiveFileMonitor* monitor, GFile* file, RygelMediaContainer* parent) {
#line 58 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return rygel_media_export_harvesting_task_construct (RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, monitor, file, parent);
#line 804 "rygel-media-export-harvesting-task.c"
}


void rygel_media_export_harvesting_task_cancel (RygelMediaExportHarvestingTask* self) {
	GCancellable* _tmp0_ = NULL;
	GCancellable* _tmp1_ = NULL;
	GCancellable* _tmp2_ = NULL;
	GCancellable* _tmp3_ = NULL;
#line 74 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 77 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = g_cancellable_new ();
#line 77 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _tmp0_;
#line 77 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_state_machine_set_cancellable ((RygelStateMachine*) self, _tmp1_);
#line 77 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_tmp1_);
#line 78 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) self);
#line 78 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = _tmp2_;
#line 78 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_cancellable_cancel (_tmp3_);
#line 829 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_real_run_data_free (gpointer _data) {
	RygelMediaExportHarvestingTaskRunData* _data_;
	_data_ = _data;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_data_->self);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_slice_free (RygelMediaExportHarvestingTaskRunData, _data_);
#line 840 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_real_run (RygelStateMachine* base, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	RygelMediaExportHarvestingTask * self;
	RygelMediaExportHarvestingTaskRunData* _data_;
	RygelMediaExportHarvestingTask* _tmp0_ = NULL;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (RygelMediaExportHarvestingTask*) base;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = g_slice_new0 (RygelMediaExportHarvestingTaskRunData);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_async_result = g_simple_async_result_new (G_OBJECT (self), _callback_, _user_data_, rygel_media_export_harvesting_task_real_run);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, rygel_media_export_harvesting_task_real_run_data_free);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->self = _tmp0_;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_real_run_co (_data_);
#line 862 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_real_run_finish (RygelStateMachine* base, GAsyncResult* _res_) {
	RygelMediaExportHarvestingTaskRunData* _data_;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
#line 870 "rygel-media-export-harvesting-task.c"
}


/**
     * Extract all metainformation from a given file.
     *
     * What action will be taken depends on the arguments
     * * file is a simple file. Then only information of this
     *   file will be extracted
     * * file is a directory and recursive is false. The children
     *   of the directory (if not directories themselves) will be
     *   enqueued for extraction
     * * file is a directory and recursive is true. ++ All ++ children
     *   of the directory will be enqueued for extraction, even directories
     *
     * No matter how many children are contained within file's hierarchy,
     * only one event is sent when all the children are done.
     */
static void rygel_media_export_harvesting_task_run_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	RygelMediaExportHarvestingTaskRunData* _data_;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = _user_data_;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_source_object_ = source_object;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_res_ = _res_;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_real_run_co (_data_);
#line 899 "rygel-media-export-harvesting-task.c"
}


static gboolean rygel_media_export_harvesting_task_real_run_co (RygelMediaExportHarvestingTaskRunData* _data_) {
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	switch (_data_->_state_) {
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 0:
#line 908 "rygel-media-export-harvesting-task.c"
		goto _state_0;
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 1:
#line 912 "rygel-media-export-harvesting-task.c"
		goto _state_1;
		default:
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_assert_not_reached ();
#line 917 "rygel-media-export-harvesting-task.c"
	}
	_state_0:
	{
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp0_ = NULL;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp0_ = _data_->self->origin;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp1_ = NULL;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp1_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) _data_->self);
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp2_ = NULL;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp2_ = _data_->_tmp1_;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_state_ = 1;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_file_query_info_async (_data_->_tmp0_, RYGEL_MEDIA_EXPORT_HARVESTING_TASK_HARVESTER_ATTRIBUTES, G_FILE_QUERY_INFO_NONE, G_PRIORITY_DEFAULT, _data_->_tmp2_, rygel_media_export_harvesting_task_run_ready, _data_);
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 939 "rygel-media-export-harvesting-task.c"
		_state_1:
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp3_ = NULL;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp3_ = g_file_query_info_finish (_data_->_tmp0_, _data_->_res_, &_data_->_inner_error_);
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->info = _data_->_tmp3_;
#line 98 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_data_->_inner_error_ != NULL) {
#line 949 "rygel-media-export-harvesting-task.c"
			goto __catch63_g_error;
		}
#line 104 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp4_ = NULL;
#line 104 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp4_ = _data_->self->origin;
#line 104 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp5_ = NULL;
#line 104 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp5_ = _data_->self->priv->parent;
#line 104 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp6_ = FALSE;
#line 104 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp6_ = rygel_media_export_harvesting_task_process_file (_data_->self, _data_->_tmp4_, _data_->info, _data_->_tmp5_);
#line 104 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_data_->_tmp6_) {
#line 105 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp7_ = 0;
#line 105 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp7_ = g_file_info_get_file_type (_data_->info);
#line 105 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_data_->_tmp7_ != G_FILE_TYPE_DIRECTORY) {
#line 106 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp8_ = NULL;
#line 106 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp8_ = _data_->self->priv->containers;
#line 106 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp9_ = NULL;
#line 106 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp9_ = _data_->self->priv->parent;
#line 106 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp10_ = NULL;
#line 106 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp10_ = _g_object_ref0 (_data_->_tmp9_);
#line 106 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				g_queue_push_tail (_data_->_tmp8_, _data_->_tmp10_);
#line 986 "rygel-media-export-harvesting-task.c"
			}
#line 108 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_media_export_harvesting_task_on_idle (_data_->self);
#line 990 "rygel-media-export-harvesting-task.c"
		} else {
#line 110 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_signal_emit_by_name ((RygelStateMachine*) _data_->self, "completed");
#line 994 "rygel-media-export-harvesting-task.c"
		}
#line 97 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_data_->info);
#line 998 "rygel-media-export-harvesting-task.c"
	}
	goto __finally63;
	__catch63_g_error:
	{
#line 97 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_error_ = _data_->_inner_error_;
#line 97 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_inner_error_ = NULL;
#line 113 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp11_ = NULL;
#line 113 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp11_ = _data_->_error_;
#line 113 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (!g_error_matches (_data_->_tmp11_, G_IO_ERROR, G_IO_ERROR_CANCELLED)) {
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp12_ = NULL;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp12_ = _ ("Failed to harvest file %s: %s");
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp13_ = NULL;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp13_ = _data_->self->origin;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp14_ = NULL;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp14_ = g_file_get_uri (_data_->_tmp13_);
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp15_ = NULL;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp15_ = _data_->_tmp14_;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp16_ = NULL;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp16_ = _data_->_error_;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp17_ = NULL;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp17_ = _data_->_tmp16_->message;
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_warning (_data_->_tmp12_, _data_->_tmp15_, _data_->_tmp17_);
#line 114 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_free0 (_data_->_tmp15_);
#line 1041 "rygel-media-export-harvesting-task.c"
		} else {
#line 118 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp18_ = NULL;
#line 118 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp18_ = _data_->self->origin;
#line 118 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp19_ = NULL;
#line 118 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp19_ = g_file_get_uri (_data_->_tmp18_);
#line 118 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp20_ = NULL;
#line 118 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp20_ = _data_->_tmp19_;
#line 118 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_debug ("rygel-media-export-harvesting-task.vala:118: Harvesting of uri %s was " \
"cancelled", _data_->_tmp20_);
#line 118 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_free0 (_data_->_tmp20_);
#line 1059 "rygel-media-export-harvesting-task.c"
		}
#line 121 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_signal_emit_by_name ((RygelStateMachine*) _data_->self, "completed");
#line 97 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_data_->_error_);
#line 1065 "rygel-media-export-harvesting-task.c"
	}
	__finally63:
#line 97 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_data_->_inner_error_ != NULL) {
#line 97 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 97 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_data_->_inner_error_);
#line 97 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 1076 "rygel-media-export-harvesting-task.c"
	}
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_data_->_state_ == 0) {
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_simple_async_result_complete_in_idle (_data_->_async_result);
#line 1082 "rygel-media-export-harvesting-task.c"
	} else {
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_simple_async_result_complete (_data_->_async_result);
#line 1086 "rygel-media-export-harvesting-task.c"
	}
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_object_unref (_data_->_async_result);
#line 96 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return FALSE;
#line 1092 "rygel-media-export-harvesting-task.c"
}


/**
     * Add a file to the meta-data extraction queue.
     *
     * The file will only be added to the queue if one of the following
     * conditions is met:
     *   - The file is not in the cache
     *   - The current mtime of the file is larger than the cached
     *   - The size has changed
     * @param file to check
     * @param info FileInfo of the file to check
     * @return true, if the file has been queued, false otherwise.
     */
static gboolean rygel_media_export_harvesting_task_push_if_changed_or_unknown (RygelMediaExportHarvestingTask* self, GFile* file, GFileInfo* info) {
	gboolean result = FALSE;
	gint64 timestamp = 0LL;
	gint64 size = 0LL;
	GError * _inner_error_ = NULL;
#line 137 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 137 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (file != NULL, FALSE);
#line 137 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (info != NULL, FALSE);
#line 1119 "rygel-media-export-harvesting-task.c"
	{
		gboolean _tmp0_ = FALSE;
		RygelMediaExportMediaCache* _tmp1_ = NULL;
		GFile* _tmp2_ = NULL;
		gint64 _tmp3_ = 0LL;
		gint64 _tmp4_ = 0LL;
		gboolean _tmp5_ = FALSE;
#line 142 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp1_ = self->priv->cache;
#line 142 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp2_ = file;
#line 142 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = rygel_media_export_media_cache_exists (_tmp1_, _tmp2_, &_tmp3_, &_tmp4_, &_inner_error_);
#line 142 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		timestamp = _tmp3_;
#line 142 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		size = _tmp4_;
#line 142 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = _tmp5_;
#line 142 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_inner_error_ != NULL) {
#line 1141 "rygel-media-export-harvesting-task.c"
			goto __catch64_g_error;
		}
#line 142 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp0_) {
#line 1146 "rygel-media-export-harvesting-task.c"
			gint64 mtime = 0LL;
			GFileInfo* _tmp6_ = NULL;
			guint64 _tmp7_ = 0ULL;
			gboolean _tmp8_ = FALSE;
			gint64 _tmp9_ = 0LL;
			gint64 _tmp10_ = 0LL;
			gboolean _tmp14_ = FALSE;
#line 143 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp6_ = info;
#line 143 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp7_ = g_file_info_get_attribute_uint64 (_tmp6_, G_FILE_ATTRIBUTE_TIME_MODIFIED);
#line 143 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			mtime = (gint64) _tmp7_;
#line 146 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp9_ = mtime;
#line 146 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp10_ = timestamp;
#line 146 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_tmp9_ > _tmp10_) {
#line 146 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp8_ = TRUE;
#line 1168 "rygel-media-export-harvesting-task.c"
			} else {
				GFileInfo* _tmp11_ = NULL;
				gint64 _tmp12_ = 0LL;
				gint64 _tmp13_ = 0LL;
#line 147 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp11_ = info;
#line 147 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp12_ = g_file_info_get_size (_tmp11_);
#line 147 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp13_ = size;
#line 147 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp8_ = _tmp12_ != _tmp13_;
#line 1181 "rygel-media-export-harvesting-task.c"
			}
#line 146 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp14_ = _tmp8_;
#line 146 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			if (_tmp14_) {
#line 1187 "rygel-media-export-harvesting-task.c"
				FileQueueEntry* entry = NULL;
				GFile* _tmp15_ = NULL;
				GFileInfo* _tmp16_ = NULL;
				const gchar* _tmp17_ = NULL;
				FileQueueEntry* _tmp18_ = NULL;
				GeeQueue* _tmp19_ = NULL;
				FileQueueEntry* _tmp20_ = NULL;
#line 148 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp15_ = file;
#line 148 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp16_ = info;
#line 148 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp17_ = g_file_info_get_content_type (_tmp16_);
#line 148 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp18_ = file_queue_entry_new (_tmp15_, TRUE, _tmp17_);
#line 148 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				entry = _tmp18_;
#line 151 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp19_ = self->priv->files;
#line 151 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp20_ = entry;
#line 151 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				gee_queue_offer (_tmp19_, _tmp20_);
#line 153 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				result = TRUE;
#line 153 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_file_queue_entry_unref0 (entry);
#line 153 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				return result;
#line 1217 "rygel-media-export-harvesting-task.c"
			}
		} else {
			FileQueueEntry* entry = NULL;
			GFile* _tmp21_ = NULL;
			GFileInfo* _tmp22_ = NULL;
			const gchar* _tmp23_ = NULL;
			FileQueueEntry* _tmp24_ = NULL;
			GeeQueue* _tmp25_ = NULL;
			FileQueueEntry* _tmp26_ = NULL;
#line 156 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp21_ = file;
#line 156 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp22_ = info;
#line 156 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp23_ = g_file_info_get_content_type (_tmp22_);
#line 156 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp24_ = file_queue_entry_new (_tmp21_, FALSE, _tmp23_);
#line 156 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			entry = _tmp24_;
#line 159 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp25_ = self->priv->files;
#line 159 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp26_ = entry;
#line 159 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			gee_queue_offer (_tmp25_, _tmp26_);
#line 161 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			result = TRUE;
#line 161 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_file_queue_entry_unref0 (entry);
#line 161 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return result;
#line 1249 "rygel-media-export-harvesting-task.c"
		}
	}
	goto __finally64;
	__catch64_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp27_ = NULL;
		GError* _tmp28_ = NULL;
		const gchar* _tmp29_ = NULL;
#line 141 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_error_ = _inner_error_;
#line 141 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_inner_error_ = NULL;
#line 164 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp27_ = _ ("Failed to query database: %s");
#line 164 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp28_ = _error_;
#line 164 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp29_ = _tmp28_->message;
#line 164 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_warning (_tmp27_, _tmp29_);
#line 141 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_error_);
#line 1273 "rygel-media-export-harvesting-task.c"
	}
	__finally64:
#line 141 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_inner_error_ != NULL) {
#line 141 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 141 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_inner_error_);
#line 141 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 1284 "rygel-media-export-harvesting-task.c"
	}
#line 167 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	result = FALSE;
#line 167 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return result;
#line 1290 "rygel-media-export-harvesting-task.c"
}


static gboolean rygel_media_export_harvesting_task_process_file (RygelMediaExportHarvestingTask* self, GFile* file, GFileInfo* info, RygelMediaContainer* parent) {
	gboolean result = FALSE;
	GFileInfo* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	GFileInfo* _tmp2_ = NULL;
	GFileType _tmp3_ = 0;
#line 170 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 170 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (file != NULL, FALSE);
#line 170 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (info != NULL, FALSE);
#line 170 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (parent != NULL, FALSE);
#line 173 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = info;
#line 173 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = g_file_info_get_is_hidden (_tmp0_);
#line 173 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp1_) {
#line 174 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = FALSE;
#line 174 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 1318 "rygel-media-export-harvesting-task.c"
	}
#line 177 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = info;
#line 177 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = g_file_info_get_file_type (_tmp2_);
#line 177 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp3_ == G_FILE_TYPE_DIRECTORY) {
#line 1326 "rygel-media-export-harvesting-task.c"
		RygelMediaExportRecursiveFileMonitor* _tmp4_ = NULL;
		GFile* _tmp5_ = NULL;
		RygelMediaExportDummyContainer* container = NULL;
		GFile* _tmp6_ = NULL;
		RygelMediaContainer* _tmp7_ = NULL;
		RygelMediaExportDummyContainer* _tmp8_ = NULL;
		GQueue* _tmp9_ = NULL;
		RygelMediaExportDummyContainer* _tmp10_ = NULL;
		RygelMediaContainer* _tmp11_ = NULL;
		RygelMediaExportDummyContainer* dummy_parent = NULL;
		RygelMediaContainer* _tmp12_ = NULL;
		RygelMediaExportDummyContainer* _tmp13_ = NULL;
		gboolean _tmp14_ = FALSE;
		RygelMediaExportDummyContainer* _tmp15_ = NULL;
		gboolean _tmp22_ = FALSE;
#line 179 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp4_ = self->priv->monitor;
#line 179 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = file;
#line 179 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		rygel_media_export_recursive_file_monitor_add (_tmp4_, _tmp5_, NULL, NULL);
#line 181 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp6_ = file;
#line 181 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = parent;
#line 181 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp8_ = rygel_media_export_dummy_container_new (_tmp6_, _tmp7_);
#line 181 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		container = _tmp8_;
#line 182 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp9_ = self->priv->containers;
#line 182 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp10_ = container;
#line 182 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp11_ = _g_object_ref0 ((RygelMediaContainer*) _tmp10_);
#line 182 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_queue_push_tail (_tmp9_, _tmp11_);
#line 186 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp12_ = parent;
#line 186 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp13_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp12_, RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER) ? ((RygelMediaExportDummyContainer*) _tmp12_) : NULL);
#line 186 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		dummy_parent = _tmp13_;
#line 187 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp15_ = dummy_parent;
#line 187 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp15_ == NULL) {
#line 187 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp14_ = TRUE;
#line 1376 "rygel-media-export-harvesting-task.c"
		} else {
			RygelMediaExportDummyContainer* _tmp16_ = NULL;
			GeeList* _tmp17_ = NULL;
			GFile* _tmp18_ = NULL;
			gchar* _tmp19_ = NULL;
			gchar* _tmp20_ = NULL;
			gboolean _tmp21_ = FALSE;
#line 188 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp16_ = dummy_parent;
#line 188 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp17_ = _tmp16_->children;
#line 188 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp18_ = file;
#line 188 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp19_ = rygel_media_export_media_cache_get_id (_tmp18_);
#line 188 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp20_ = _tmp19_;
#line 188 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp21_ = gee_collection_contains ((GeeCollection*) _tmp17_, _tmp20_);
#line 188 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp14_ = !_tmp21_;
#line 188 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_free0 (_tmp20_);
#line 1400 "rygel-media-export-harvesting-task.c"
		}
#line 187 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp22_ = _tmp14_;
#line 187 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp22_) {
#line 1406 "rygel-media-export-harvesting-task.c"
			RygelMediaContainer* _tmp23_ = NULL;
			RygelMediaExportDummyContainer* _tmp24_ = NULL;
#line 189 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp23_ = parent;
#line 189 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp24_ = container;
#line 189 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_trackable_container_add_child_tracked (G_TYPE_CHECK_INSTANCE_TYPE (_tmp23_, RYGEL_TYPE_TRACKABLE_CONTAINER) ? ((RygelTrackableContainer*) _tmp23_) : NULL, (RygelMediaObject*) _tmp24_, NULL, NULL);
#line 1415 "rygel-media-export-harvesting-task.c"
		}
#line 192 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = TRUE;
#line 192 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (dummy_parent);
#line 192 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (container);
#line 192 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 1425 "rygel-media-export-harvesting-task.c"
	} else {
		GFileInfo* _tmp25_ = NULL;
		gboolean _tmp26_ = FALSE;
#line 196 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp25_ = info;
#line 196 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp26_ = rygel_media_export_harvester_is_eligible (_tmp25_);
#line 196 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp26_) {
#line 1435 "rygel-media-export-harvesting-task.c"
			GFile* _tmp27_ = NULL;
			GFileInfo* _tmp28_ = NULL;
			gboolean _tmp29_ = FALSE;
#line 197 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp27_ = file;
#line 197 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp28_ = info;
#line 197 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp29_ = rygel_media_export_harvesting_task_push_if_changed_or_unknown (self, _tmp27_, _tmp28_);
#line 197 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			result = _tmp29_;
#line 197 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			return result;
#line 1449 "rygel-media-export-harvesting-task.c"
		}
#line 200 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = FALSE;
#line 200 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 1455 "rygel-media-export-harvesting-task.c"
	}
}


static gboolean rygel_media_export_harvesting_task_process_children (RygelMediaExportHarvestingTask* self, GList* list) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	GList* _tmp1_ = NULL;
	gboolean _tmp5_ = FALSE;
	RygelMediaExportDummyContainer* container = NULL;
	GQueue* _tmp6_ = NULL;
	gconstpointer _tmp7_ = NULL;
	RygelMediaContainer* _tmp8_ = NULL;
	RygelMediaExportDummyContainer* _tmp9_ = NULL;
	GList* _tmp10_ = NULL;
#line 204 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = list;
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp1_ == NULL) {
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = TRUE;
#line 1479 "rygel-media-export-harvesting-task.c"
	} else {
		GCancellable* _tmp2_ = NULL;
		GCancellable* _tmp3_ = NULL;
		gboolean _tmp4_ = FALSE;
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp2_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) self);
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp3_ = _tmp2_;
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp4_ = g_cancellable_is_cancelled (_tmp3_);
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = _tmp4_;
#line 1492 "rygel-media-export-harvesting-task.c"
	}
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp5_ = _tmp0_;
#line 205 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp5_) {
#line 206 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = FALSE;
#line 206 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 1502 "rygel-media-export-harvesting-task.c"
	}
#line 209 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp6_ = self->priv->containers;
#line 209 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp7_ = g_queue_peek_head (_tmp6_);
#line 209 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp8_ = (RygelMediaContainer*) _tmp7_;
#line 209 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp9_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp8_, RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER) ? ((RygelMediaExportDummyContainer*) _tmp8_) : NULL);
#line 209 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	container = _tmp9_;
#line 211 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp10_ = list;
#line 1516 "rygel-media-export-harvesting-task.c"
	{
		GList* info_collection = NULL;
		GList* info_it = NULL;
#line 211 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		info_collection = _tmp10_;
#line 211 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		for (info_it = info_collection; info_it != NULL; info_it = info_it->next) {
#line 1524 "rygel-media-export-harvesting-task.c"
			GFileInfo* _tmp11_ = NULL;
			GFileInfo* info = NULL;
#line 211 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp11_ = _g_object_ref0 ((GFileInfo*) info_it->data);
#line 211 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			info = _tmp11_;
#line 1531 "rygel-media-export-harvesting-task.c"
			{
				GFile* file = NULL;
				RygelMediaExportDummyContainer* _tmp12_ = NULL;
				GFile* _tmp13_ = NULL;
				GFileInfo* _tmp14_ = NULL;
				const gchar* _tmp15_ = NULL;
				GFile* _tmp16_ = NULL;
				GFile* _tmp17_ = NULL;
				GFileInfo* _tmp18_ = NULL;
				RygelMediaExportDummyContainer* _tmp19_ = NULL;
				RygelMediaExportDummyContainer* _tmp20_ = NULL;
				GFile* _tmp21_ = NULL;
#line 212 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp12_ = container;
#line 212 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp13_ = _tmp12_->file;
#line 212 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp14_ = info;
#line 212 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp15_ = g_file_info_get_name (_tmp14_);
#line 212 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp16_ = g_file_get_child (_tmp13_, _tmp15_);
#line 212 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				file = _tmp16_;
#line 214 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp17_ = file;
#line 214 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp18_ = info;
#line 214 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp19_ = container;
#line 214 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				rygel_media_export_harvesting_task_process_file (self, _tmp17_, _tmp18_, (RygelMediaContainer*) _tmp19_);
#line 215 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp20_ = container;
#line 215 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp21_ = file;
#line 215 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				rygel_media_export_dummy_container_seen (_tmp20_, _tmp21_);
#line 211 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_g_object_unref0 (file);
#line 211 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_g_object_unref0 (info);
#line 1574 "rygel-media-export-harvesting-task.c"
			}
		}
	}
#line 218 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	result = TRUE;
#line 218 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (container);
#line 218 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return result;
#line 1584 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_enumerate_directory_data_free (gpointer _data) {
	RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_;
	_data_ = _data;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_data_->self);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_slice_free (RygelMediaExportHarvestingTaskEnumerateDirectoryData, _data_);
#line 1595 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_enumerate_directory (RygelMediaExportHarvestingTask* self, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_;
	RygelMediaExportHarvestingTask* _tmp0_ = NULL;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = g_slice_new0 (RygelMediaExportHarvestingTaskEnumerateDirectoryData);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_async_result = g_simple_async_result_new (G_OBJECT (self), _callback_, _user_data_, rygel_media_export_harvesting_task_enumerate_directory);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, rygel_media_export_harvesting_task_enumerate_directory_data_free);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->self = _tmp0_;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_enumerate_directory_co (_data_);
#line 1614 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_enumerate_directory_finish (RygelMediaExportHarvestingTask* self, GAsyncResult* _res_) {
	RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
#line 1622 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_enumerate_directory_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_ = _user_data_;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_source_object_ = source_object;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_res_ = _res_;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_enumerate_directory_co (_data_);
#line 1636 "rygel-media-export-harvesting-task.c"
}


static void _g_list_free__g_object_unref0_ (GList* self) {
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_list_foreach (self, (GFunc) _g_object_unref0_, NULL);
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_list_free (self);
#line 1645 "rygel-media-export-harvesting-task.c"
}


static gboolean rygel_media_export_harvesting_task_enumerate_directory_co (RygelMediaExportHarvestingTaskEnumerateDirectoryData* _data_) {
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	switch (_data_->_state_) {
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 0:
#line 1654 "rygel-media-export-harvesting-task.c"
		goto _state_0;
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 1:
#line 1658 "rygel-media-export-harvesting-task.c"
		goto _state_1;
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 2:
#line 1662 "rygel-media-export-harvesting-task.c"
		goto _state_2;
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case 3:
#line 1666 "rygel-media-export-harvesting-task.c"
		goto _state_3;
		default:
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_assert_not_reached ();
#line 1671 "rygel-media-export-harvesting-task.c"
	}
	_state_0:
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp0_ = NULL;
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp0_ = _data_->self->priv->containers;
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp1_ = NULL;
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp1_ = g_queue_peek_head (_data_->_tmp0_);
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp2_ = NULL;
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp2_ = (RygelMediaContainer*) _data_->_tmp1_;
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp3_ = NULL;
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp3_ = (G_TYPE_CHECK_INSTANCE_TYPE (_data_->_tmp2_, RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER) ? ((RygelMediaExportDummyContainer*) _data_->_tmp2_) : NULL)->file;
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp4_ = NULL;
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->_tmp4_ = _g_object_ref0 (_data_->_tmp3_);
#line 222 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_data_->directory = _data_->_tmp4_;
#line 1696 "rygel-media-export-harvesting-task.c"
	{
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp5_ = NULL;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp5_ = _data_->directory;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp6_ = NULL;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp6_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) _data_->self);
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp7_ = NULL;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp7_ = _data_->_tmp6_;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_state_ = 1;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_file_enumerate_children_async (_data_->_tmp5_, RYGEL_MEDIA_EXPORT_HARVESTING_TASK_HARVESTER_ATTRIBUTES, G_FILE_QUERY_INFO_NONE, G_PRIORITY_DEFAULT, _data_->_tmp7_, rygel_media_export_harvesting_task_enumerate_directory_ready, _data_);
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 1716 "rygel-media-export-harvesting-task.c"
		_state_1:
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp8_ = NULL;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp8_ = g_file_enumerate_children_finish (_data_->_tmp5_, _data_->_res_, &_data_->_inner_error_);
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->enumerator = _data_->_tmp8_;
#line 224 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_data_->_inner_error_ != NULL) {
#line 1726 "rygel-media-export-harvesting-task.c"
			goto __catch65_g_error;
		}
#line 230 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->list = NULL;
#line 1731 "rygel-media-export-harvesting-task.c"
		{
#line 231 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_data_->_tmp9_ = TRUE;
#line 231 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			while (TRUE) {
#line 231 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp10_ = FALSE;
#line 231 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp10_ = _data_->_tmp9_;
#line 231 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (!_data_->_tmp10_) {
#line 235 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_data_->_tmp11_ = NULL;
#line 235 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_data_->_tmp11_ = _data_->list;
#line 235 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_data_->_tmp12_ = FALSE;
#line 235 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_data_->_tmp12_ = rygel_media_export_harvesting_task_process_children (_data_->self, _data_->_tmp11_);
#line 235 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					if (!_data_->_tmp12_) {
#line 235 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
						break;
#line 1755 "rygel-media-export-harvesting-task.c"
					}
				}
#line 231 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp9_ = FALSE;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp14_ = NULL;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp14_ = _data_->enumerator;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp15_ = NULL;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp15_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) _data_->self);
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp16_ = NULL;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp16_ = _data_->_tmp15_;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_state_ = 2;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				g_file_enumerator_next_files_async (_data_->_tmp14_, RYGEL_MEDIA_EXPORT_HARVESTING_TASK_BATCH_SIZE, G_PRIORITY_DEFAULT, _data_->_tmp16_, rygel_media_export_harvesting_task_enumerate_directory_ready, _data_);
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				return FALSE;
#line 1778 "rygel-media-export-harvesting-task.c"
				_state_2:
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp17_ = NULL;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp17_ = g_file_enumerator_next_files_finish (_data_->_tmp14_, _data_->_res_, &_data_->_inner_error_);
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->_tmp13_ = _data_->_tmp17_;
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (_data_->_inner_error_ != NULL) {
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					__g_list_free__g_object_unref0_0 (_data_->list);
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (_data_->enumerator);
#line 1792 "rygel-media-export-harvesting-task.c"
					goto __catch65_g_error;
				}
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				__g_list_free__g_object_unref0_0 (_data_->list);
#line 232 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_data_->list = _data_->_tmp13_;
#line 1799 "rygel-media-export-harvesting-task.c"
			}
		}
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp18_ = NULL;
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp18_ = _data_->enumerator;
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp19_ = NULL;
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp19_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) _data_->self);
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp20_ = NULL;
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp20_ = _data_->_tmp19_;
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_state_ = 3;
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_file_enumerator_close_async (_data_->_tmp18_, G_PRIORITY_DEFAULT, _data_->_tmp20_, rygel_media_export_harvesting_task_enumerate_directory_ready, _data_);
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 1820 "rygel-media-export-harvesting-task.c"
		_state_3:
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_file_enumerator_close_finish (_data_->_tmp18_, _data_->_res_, &_data_->_inner_error_);
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_data_->_inner_error_ != NULL) {
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			__g_list_free__g_object_unref0_0 (_data_->list);
#line 237 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (_data_->enumerator);
#line 1830 "rygel-media-export-harvesting-task.c"
			goto __catch65_g_error;
		}
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		__g_list_free__g_object_unref0_0 (_data_->list);
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_data_->enumerator);
#line 1837 "rygel-media-export-harvesting-task.c"
	}
	goto __finally65;
	__catch65_g_error:
	{
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->err = _data_->_inner_error_;
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_inner_error_ = NULL;
#line 239 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp21_ = NULL;
#line 239 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp21_ = _ ("failed to enumerate folder: %s");
#line 239 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp22_ = NULL;
#line 239 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp22_ = _data_->err;
#line 239 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp23_ = NULL;
#line 239 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_data_->_tmp23_ = _data_->_tmp22_->message;
#line 239 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_warning (_data_->_tmp21_, _data_->_tmp23_);
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_data_->err);
#line 1862 "rygel-media-export-harvesting-task.c"
	}
	__finally65:
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_data_->_inner_error_ != NULL) {
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_data_->directory);
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_data_->_inner_error_);
#line 223 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return FALSE;
#line 1875 "rygel-media-export-harvesting-task.c"
	}
#line 242 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_cleanup_database (_data_->self);
#line 243 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_do_update (_data_->self);
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (_data_->directory);
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_data_->_state_ == 0) {
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_simple_async_result_complete_in_idle (_data_->_async_result);
#line 1887 "rygel-media-export-harvesting-task.c"
	} else {
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_simple_async_result_complete (_data_->_async_result);
#line 1891 "rygel-media-export-harvesting-task.c"
	}
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_object_unref (_data_->_async_result);
#line 221 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return FALSE;
#line 1897 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_cleanup_database (RygelMediaExportHarvestingTask* self) {
	RygelMediaExportDummyContainer* container = NULL;
	GQueue* _tmp0_ = NULL;
	gconstpointer _tmp1_ = NULL;
	RygelMediaContainer* _tmp2_ = NULL;
	RygelMediaExportDummyContainer* _tmp3_ = NULL;
	GError * _inner_error_ = NULL;
#line 246 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 247 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = self->priv->containers;
#line 247 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = g_queue_peek_head (_tmp0_);
#line 247 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = (RygelMediaContainer*) _tmp1_;
#line 247 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp2_, RYGEL_MEDIA_EXPORT_TYPE_DUMMY_CONTAINER) ? ((RygelMediaExportDummyContainer*) _tmp2_) : NULL);
#line 247 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	container = _tmp3_;
#line 1920 "rygel-media-export-harvesting-task.c"
	{
		{
			GeeList* _child_list = NULL;
			RygelMediaExportDummyContainer* _tmp4_ = NULL;
			GeeList* _tmp5_ = NULL;
			GeeList* _tmp6_ = NULL;
			gint _child_size = 0;
			GeeList* _tmp7_ = NULL;
			gint _tmp8_ = 0;
			gint _tmp9_ = 0;
			gint _child_index = 0;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp4_ = container;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp5_ = _tmp4_->children;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp6_ = _g_object_ref0 (_tmp5_);
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_child_list = _tmp6_;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp7_ = _child_list;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp8_ = gee_collection_get_size ((GeeCollection*) _tmp7_);
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp9_ = _tmp8_;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_child_size = _tmp9_;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_child_index = -1;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			while (TRUE) {
#line 1952 "rygel-media-export-harvesting-task.c"
				gint _tmp10_ = 0;
				gint _tmp11_ = 0;
				gint _tmp12_ = 0;
				gchar* child = NULL;
				GeeList* _tmp13_ = NULL;
				gint _tmp14_ = 0;
				gpointer _tmp15_ = NULL;
				RygelMediaExportMediaCache* _tmp16_ = NULL;
				const gchar* _tmp17_ = NULL;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp10_ = _child_index;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_child_index = _tmp10_ + 1;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp11_ = _child_index;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp12_ = _child_size;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (!(_tmp11_ < _tmp12_)) {
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					break;
#line 1974 "rygel-media-export-harvesting-task.c"
				}
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp13_ = _child_list;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp14_ = _child_index;
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp15_ = gee_list_get (_tmp13_, _tmp14_);
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				child = (gchar*) _tmp15_;
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp16_ = self->priv->cache;
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_tmp17_ = child;
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				rygel_media_export_media_cache_remove_by_id (_tmp16_, _tmp17_, &_inner_error_);
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				if (_inner_error_ != NULL) {
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_free0 (child);
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (_child_list);
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					if (_inner_error_->domain == RYGEL_MEDIA_EXPORT_DATABASE_ERROR) {
#line 1998 "rygel-media-export-harvesting-task.c"
						goto __catch66_rygel_media_export_database_error;
					}
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_free0 (child);
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (_child_list);
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					_g_object_unref0 (container);
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					g_clear_error (&_inner_error_);
#line 252 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
					return;
#line 2013 "rygel-media-export-harvesting-task.c"
				}
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
				_g_free0 (child);
#line 2017 "rygel-media-export-harvesting-task.c"
			}
#line 251 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (_child_list);
#line 2021 "rygel-media-export-harvesting-task.c"
		}
	}
	goto __finally66;
	__catch66_rygel_media_export_database_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp18_ = NULL;
		RygelMediaExportDummyContainer* _tmp19_ = NULL;
		const gchar* _tmp20_ = NULL;
		const gchar* _tmp21_ = NULL;
		GError* _tmp22_ = NULL;
		const gchar* _tmp23_ = NULL;
#line 250 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_error_ = _inner_error_;
#line 250 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_inner_error_ = NULL;
#line 255 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp18_ = _ ("Failed to get children of container %s: %s");
#line 255 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp19_ = container;
#line 255 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp20_ = rygel_media_object_get_id ((RygelMediaObject*) _tmp19_);
#line 255 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp21_ = _tmp20_;
#line 255 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp22_ = _error_;
#line 255 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp23_ = _tmp22_->message;
#line 255 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_warning (_tmp18_, _tmp21_, _tmp23_);
#line 250 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_error_free0 (_error_);
#line 2054 "rygel-media-export-harvesting-task.c"
	}
	__finally66:
#line 250 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_inner_error_ != NULL) {
#line 250 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (container);
#line 250 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 250 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_clear_error (&_inner_error_);
#line 250 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return;
#line 2067 "rygel-media-export-harvesting-task.c"
	}
#line 246 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (container);
#line 2071 "rygel-media-export-harvesting-task.c"
}


static gboolean rygel_media_export_harvesting_task_on_idle (RygelMediaExportHarvestingTask* self) {
	gboolean result = FALSE;
	GCancellable* _tmp0_ = NULL;
	GCancellable* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	GeeQueue* _tmp3_ = NULL;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp5_ = FALSE;
#line 261 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 262 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) self);
#line 262 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _tmp0_;
#line 262 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = g_cancellable_is_cancelled (_tmp1_);
#line 262 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp2_) {
#line 263 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_signal_emit_by_name ((RygelStateMachine*) self, "completed");
#line 265 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		result = FALSE;
#line 265 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		return result;
#line 2099 "rygel-media-export-harvesting-task.c"
	}
#line 268 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = self->priv->files;
#line 268 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp4_ = gee_collection_get_is_empty ((GeeCollection*) _tmp3_);
#line 268 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp5_ = _tmp4_;
#line 268 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (!_tmp5_) {
#line 2109 "rygel-media-export-harvesting-task.c"
		GeeQueue* _tmp6_ = NULL;
		gpointer _tmp7_ = NULL;
		FileQueueEntry* _tmp8_ = NULL;
		GFile* _tmp9_ = NULL;
		gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		RygelMediaExportMetadataExtractor* _tmp12_ = NULL;
		GeeQueue* _tmp13_ = NULL;
		gpointer _tmp14_ = NULL;
		FileQueueEntry* _tmp15_ = NULL;
		GFile* _tmp16_ = NULL;
		GeeQueue* _tmp17_ = NULL;
		gpointer _tmp18_ = NULL;
		FileQueueEntry* _tmp19_ = NULL;
		const gchar* _tmp20_ = NULL;
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp6_ = self->priv->files;
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = gee_queue_peek (_tmp6_);
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp8_ = (FileQueueEntry*) _tmp7_;
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp9_ = _tmp8_->file;
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp10_ = g_file_get_uri (_tmp9_);
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp11_ = _tmp10_;
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_debug ("rygel-media-export-harvesting-task.vala:269: Scheduling file %s for me" \
"ta-data extraction", _tmp11_);
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_free0 (_tmp11_);
#line 269 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_file_queue_entry_unref0 (_tmp8_);
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp12_ = self->priv->extractor;
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp13_ = self->priv->files;
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp14_ = gee_queue_peek (_tmp13_);
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp15_ = (FileQueueEntry*) _tmp14_;
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp16_ = _tmp15_->file;
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp17_ = self->priv->files;
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp18_ = gee_queue_peek (_tmp17_);
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp19_ = (FileQueueEntry*) _tmp18_;
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp20_ = _tmp19_->content_type;
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		rygel_media_export_metadata_extractor_extract (_tmp12_, _tmp16_, _tmp20_);
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_file_queue_entry_unref0 (_tmp19_);
#line 271 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_file_queue_entry_unref0 (_tmp15_);
#line 2167 "rygel-media-export-harvesting-task.c"
	} else {
		GQueue* _tmp21_ = NULL;
		gboolean _tmp22_ = FALSE;
#line 273 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp21_ = self->priv->containers;
#line 273 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp22_ = g_queue_is_empty (_tmp21_);
#line 273 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (!_tmp22_) {
#line 274 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_media_export_harvesting_task_enumerate_directory (self, NULL, NULL);
#line 2179 "rygel-media-export-harvesting-task.c"
		} else {
#line 277 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			g_signal_emit_by_name ((RygelStateMachine*) self, "completed");
#line 2183 "rygel-media-export-harvesting-task.c"
		}
	}
#line 280 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	result = FALSE;
#line 280 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return result;
#line 2190 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_on_extracted_cb (RygelMediaExportHarvestingTask* self, GFile* file, GstDiscovererInfo* dlna, GUPnPDLNAProfile* profile, GFileInfo* file_info) {
	GCancellable* _tmp0_ = NULL;
	GCancellable* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	RygelMediaItem* item = NULL;
	GstDiscovererInfo* _tmp3_ = NULL;
	RygelMediaItem* _tmp16_ = NULL;
	GeeQueue* _tmp32_ = NULL;
	gpointer _tmp33_ = NULL;
	FileQueueEntry* _tmp34_ = NULL;
#line 283 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 283 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (file != NULL);
#line 283 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (file_info != NULL);
#line 287 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = rygel_state_machine_get_cancellable ((RygelStateMachine*) self);
#line 287 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _tmp0_;
#line 287 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = g_cancellable_is_cancelled (_tmp1_);
#line 287 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp2_) {
#line 288 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_signal_emit_by_name ((RygelStateMachine*) self, "completed");
#line 2220 "rygel-media-export-harvesting-task.c"
	}
#line 292 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = dlna;
#line 292 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp3_ == NULL) {
#line 2226 "rygel-media-export-harvesting-task.c"
		GQueue* _tmp4_ = NULL;
		gconstpointer _tmp5_ = NULL;
		GFile* _tmp6_ = NULL;
		GFileInfo* _tmp7_ = NULL;
		RygelMediaItem* _tmp8_ = NULL;
#line 293 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp4_ = self->priv->containers;
#line 293 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = g_queue_peek_head (_tmp4_);
#line 293 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp6_ = file;
#line 293 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = file_info;
#line 293 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp8_ = rygel_media_export_item_factory_create_simple ((RygelMediaContainer*) _tmp5_, _tmp6_, _tmp7_);
#line 293 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (item);
#line 293 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		item = _tmp8_;
#line 2246 "rygel-media-export-harvesting-task.c"
	} else {
		GQueue* _tmp9_ = NULL;
		gconstpointer _tmp10_ = NULL;
		GFile* _tmp11_ = NULL;
		GstDiscovererInfo* _tmp12_ = NULL;
		GUPnPDLNAProfile* _tmp13_ = NULL;
		GFileInfo* _tmp14_ = NULL;
		RygelMediaItem* _tmp15_ = NULL;
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp9_ = self->priv->containers;
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp10_ = g_queue_peek_head (_tmp9_);
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp11_ = file;
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp12_ = dlna;
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp13_ = profile;
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp14_ = file_info;
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp15_ = rygel_media_export_item_factory_create_from_info ((RygelMediaContainer*) _tmp10_, _tmp11_, _tmp12_, _tmp13_, _tmp14_);
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (item);
#line 297 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		item = _tmp15_;
#line 2273 "rygel-media-export-harvesting-task.c"
	}
#line 304 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp16_ = item;
#line 304 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp16_ != NULL) {
#line 2279 "rygel-media-export-harvesting-task.c"
		RygelMediaItem* _tmp17_ = NULL;
		GQueue* _tmp18_ = NULL;
		gconstpointer _tmp19_ = NULL;
		GeeQueue* _tmp20_ = NULL;
		gpointer _tmp21_ = NULL;
		FileQueueEntry* _tmp22_ = NULL;
		gboolean _tmp23_ = FALSE;
		gboolean _tmp24_ = FALSE;
#line 305 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp17_ = item;
#line 305 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp18_ = self->priv->containers;
#line 305 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp19_ = g_queue_peek_head (_tmp18_);
#line 305 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		rygel_media_object_set_parent_ref ((RygelMediaObject*) _tmp17_, (RygelMediaContainer*) _tmp19_);
#line 308 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp20_ = self->priv->files;
#line 308 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp21_ = gee_queue_peek (_tmp20_);
#line 308 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp22_ = (FileQueueEntry*) _tmp21_;
#line 308 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp23_ = _tmp22_->known;
#line 308 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp24_ = _tmp23_;
#line 308 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_file_queue_entry_unref0 (_tmp22_);
#line 308 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		if (_tmp24_) {
#line 2310 "rygel-media-export-harvesting-task.c"
			RygelMediaItem* _tmp25_ = NULL;
#line 309 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp25_ = item;
#line 309 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_media_export_updatable_object_non_overriding_commit (G_TYPE_CHECK_INSTANCE_TYPE (_tmp25_, RYGEL_MEDIA_EXPORT_TYPE_UPDATABLE_OBJECT) ? ((RygelMediaExportUpdatableObject*) _tmp25_) : NULL, NULL, NULL);
#line 2316 "rygel-media-export-harvesting-task.c"
		} else {
			RygelTrackableContainer* container = NULL;
			RygelMediaItem* _tmp26_ = NULL;
			RygelMediaContainer* _tmp27_ = NULL;
			RygelMediaContainer* _tmp28_ = NULL;
			RygelTrackableContainer* _tmp29_ = NULL;
			RygelTrackableContainer* _tmp30_ = NULL;
			RygelMediaItem* _tmp31_ = NULL;
#line 311 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp26_ = item;
#line 311 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp27_ = rygel_media_object_get_parent ((RygelMediaObject*) _tmp26_);
#line 311 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp28_ = _tmp27_;
#line 311 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp29_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp28_, RYGEL_TYPE_TRACKABLE_CONTAINER) ? ((RygelTrackableContainer*) _tmp28_) : NULL);
#line 311 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			container = _tmp29_;
#line 312 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp30_ = container;
#line 312 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_tmp31_ = item;
#line 312 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			rygel_trackable_container_add_child_tracked (_tmp30_, (RygelMediaObject*) _tmp31_, NULL, NULL);
#line 308 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
			_g_object_unref0 (container);
#line 2343 "rygel-media-export-harvesting-task.c"
		}
	}
#line 316 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp32_ = self->priv->files;
#line 316 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp33_ = gee_queue_poll (_tmp32_);
#line 316 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp34_ = (FileQueueEntry*) _tmp33_;
#line 316 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_file_queue_entry_unref0 (_tmp34_);
#line 317 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_do_update (self);
#line 283 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (item);
#line 2358 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_on_extractor_error_cb (RygelMediaExportHarvestingTask* self, GFile* file, GError* _error_) {
	GFile* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	GError* _tmp3_ = NULL;
	const gchar* _tmp4_ = NULL;
	GeeQueue* _tmp5_ = NULL;
	gpointer _tmp6_ = NULL;
	FileQueueEntry* _tmp7_ = NULL;
#line 320 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 320 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (file != NULL);
#line 325 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = file;
#line 325 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = g_file_get_uri (_tmp0_);
#line 325 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = _tmp1_;
#line 325 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = _error_;
#line 325 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp4_ = _tmp3_->message;
#line 325 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_debug ("rygel-media-export-harvesting-task.vala:325: Skipping %s; extraction c" \
"ompletely failed: %s", _tmp2_, _tmp4_);
#line 325 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_free0 (_tmp2_);
#line 329 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp5_ = self->priv->files;
#line 329 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp6_ = gee_queue_poll (_tmp5_);
#line 329 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp7_ = (FileQueueEntry*) _tmp6_;
#line 329 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_file_queue_entry_unref0 (_tmp7_);
#line 330 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_do_update (self);
#line 2399 "rygel-media-export-harvesting-task.c"
}


/**
     * If all files of a container were processed, notify the container
     * about this and set the updating signal.
     * Reschedule the iteration and extraction
     */
static void rygel_media_export_harvesting_task_do_update (RygelMediaExportHarvestingTask* self) {
	gboolean _tmp0_ = FALSE;
	GeeQueue* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp6_ = FALSE;
#line 338 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_return_if_fail (self != NULL);
#line 339 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = self->priv->files;
#line 339 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp2_ = gee_collection_get_is_empty ((GeeCollection*) _tmp1_);
#line 339 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp3_ = _tmp2_;
#line 339 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp3_) {
#line 2424 "rygel-media-export-harvesting-task.c"
		GQueue* _tmp4_ = NULL;
		gboolean _tmp5_ = FALSE;
#line 340 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp4_ = self->priv->containers;
#line 340 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp5_ = g_queue_is_empty (_tmp4_);
#line 340 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = !_tmp5_;
#line 2433 "rygel-media-export-harvesting-task.c"
	} else {
#line 339 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp0_ = FALSE;
#line 2437 "rygel-media-export-harvesting-task.c"
	}
#line 339 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp6_ = _tmp0_;
#line 339 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	if (_tmp6_) {
#line 2443 "rygel-media-export-harvesting-task.c"
		GQueue* _tmp7_ = NULL;
		gpointer _tmp8_ = NULL;
		RygelMediaContainer* _tmp9_ = NULL;
#line 341 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp7_ = self->priv->containers;
#line 341 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp8_ = g_queue_pop_head (_tmp7_);
#line 341 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_tmp9_ = (RygelMediaContainer*) _tmp8_;
#line 341 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		_g_object_unref0 (_tmp9_);
#line 2455 "rygel-media-export-harvesting-task.c"
	}
#line 344 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_on_idle (self);
#line 2459 "rygel-media-export-harvesting-task.c"
}


static GCancellable* rygel_media_export_harvesting_task_real_get_cancellable (RygelStateMachine* base) {
	GCancellable* result;
	RygelMediaExportHarvestingTask* self;
	GCancellable* _tmp0_ = NULL;
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (RygelMediaExportHarvestingTask*) base;
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = self->priv->_cancellable;
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	result = _tmp0_;
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	return result;
#line 2475 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_real_set_cancellable (RygelStateMachine* base, GCancellable* value) {
	RygelMediaExportHarvestingTask* self;
	GCancellable* _tmp0_ = NULL;
	GCancellable* _tmp1_ = NULL;
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = (RygelMediaExportHarvestingTask*) base;
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp0_ = value;
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->_cancellable);
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv->_cancellable = _tmp1_;
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_object_notify ((GObject *) self, "cancellable");
#line 2495 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_class_init (RygelMediaExportHarvestingTaskClass * klass) {
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_parent_class = g_type_class_peek_parent (klass);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_type_class_add_private (klass, sizeof (RygelMediaExportHarvestingTaskPrivate));
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_rygel_media_export_harvesting_task_get_property;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_rygel_media_export_harvesting_task_set_property;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_OBJECT_CLASS (klass)->finalize = rygel_media_export_harvesting_task_finalize;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CANCELLABLE, g_param_spec_object ("cancellable", "cancellable", "cancellable", g_cancellable_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 2512 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_rygel_state_machine_interface_init (RygelStateMachineIface * iface) {
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	rygel_media_export_harvesting_task_rygel_state_machine_parent_iface = g_type_interface_peek_parent (iface);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	iface->run = (void (*)(RygelStateMachine*)) rygel_media_export_harvesting_task_real_run;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	iface->run_finish = rygel_media_export_harvesting_task_real_run_finish;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	iface->get_cancellable = rygel_media_export_harvesting_task_real_get_cancellable;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	iface->set_cancellable = rygel_media_export_harvesting_task_real_set_cancellable;
#line 2527 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_instance_init (RygelMediaExportHarvestingTask * self) {
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self->priv = RYGEL_MEDIA_EXPORT_HARVESTING_TASK_GET_PRIVATE (self);
#line 2534 "rygel-media-export-harvesting-task.c"
}


static void rygel_media_export_harvesting_task_finalize (GObject* obj) {
	RygelMediaExportHarvestingTask * self;
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTask);
#line 39 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->origin);
#line 40 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->extractor);
#line 41 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->cache);
#line 42 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	__g_queue_free__g_object_unref0_0 (self->priv->containers);
#line 43 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->files);
#line 44 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->monitor);
#line 45 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->parent);
#line 48 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	_g_object_unref0 (self->priv->_cancellable);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	G_OBJECT_CLASS (rygel_media_export_harvesting_task_parent_class)->finalize (obj);
#line 2560 "rygel-media-export-harvesting-task.c"
}


GType rygel_media_export_harvesting_task_get_type (void) {
	static volatile gsize rygel_media_export_harvesting_task_type_id__volatile = 0;
	if (g_once_init_enter (&rygel_media_export_harvesting_task_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (RygelMediaExportHarvestingTaskClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) rygel_media_export_harvesting_task_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (RygelMediaExportHarvestingTask), 0, (GInstanceInitFunc) rygel_media_export_harvesting_task_instance_init, NULL };
		static const GInterfaceInfo rygel_state_machine_info = { (GInterfaceInitFunc) rygel_media_export_harvesting_task_rygel_state_machine_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType rygel_media_export_harvesting_task_type_id;
		rygel_media_export_harvesting_task_type_id = g_type_register_static (G_TYPE_OBJECT, "RygelMediaExportHarvestingTask", &g_define_type_info, 0);
		g_type_add_interface_static (rygel_media_export_harvesting_task_type_id, RYGEL_TYPE_STATE_MACHINE, &rygel_state_machine_info);
		g_once_init_leave (&rygel_media_export_harvesting_task_type_id__volatile, rygel_media_export_harvesting_task_type_id);
	}
	return rygel_media_export_harvesting_task_type_id__volatile;
}


static void _vala_rygel_media_export_harvesting_task_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	RygelMediaExportHarvestingTask * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTask);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	switch (property_id) {
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CANCELLABLE:
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		g_value_set_object (value, rygel_state_machine_get_cancellable ((RygelStateMachine*) self));
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		break;
#line 2589 "rygel-media-export-harvesting-task.c"
		default:
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		break;
#line 2595 "rygel-media-export-harvesting-task.c"
	}
}


static void _vala_rygel_media_export_harvesting_task_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	RygelMediaExportHarvestingTask * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, RYGEL_MEDIA_EXPORT_TYPE_HARVESTING_TASK, RygelMediaExportHarvestingTask);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
	switch (property_id) {
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		case RYGEL_MEDIA_EXPORT_HARVESTING_TASK_CANCELLABLE:
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		rygel_state_machine_set_cancellable ((RygelStateMachine*) self, g_value_get_object (value));
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		break;
#line 2611 "rygel-media-export-harvesting-task.c"
		default:
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 37 "/home/jku/src/jhbuild/sources/rygel/src/plugins/media-export/rygel-media-export-harvesting-task.vala"
		break;
#line 2617 "rygel-media-export-harvesting-task.c"
	}
}



